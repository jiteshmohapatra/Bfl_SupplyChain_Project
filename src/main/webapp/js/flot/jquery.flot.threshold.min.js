/* Javascript plotting library for jQuery, version 0.8.3.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

*/
(function ($) {
  const options = { series: { threshold: null } }; function init(plot) { function thresholdData(plot, s, datapoints, below, color) { const ps = datapoints.pointsize; let i; let x; let y; let p; let prevp; const thresholded = $.extend({}, s); thresholded.datapoints = { points: [], pointsize: ps, format: datapoints.format }; thresholded.label = null; thresholded.color = color; thresholded.threshold = null; thresholded.originSeries = s; thresholded.data = []; const origpoints = datapoints.points; const addCrossingPoints = s.lines.show; const threspoints = []; const newpoints = []; let m; for (i = 0; i < origpoints.length; i += ps) { x = origpoints[i]; y = origpoints[i + 1]; prevp = p; if (y < below)p = threspoints; else p = newpoints; if (addCrossingPoints && prevp != p && x != null && i > 0 && origpoints[i - ps] != null) { const interx = x + (below - y) * (x - origpoints[i - ps]) / (y - origpoints[i - ps + 1]); prevp.push(interx); prevp.push(below); for (m = 2; m < ps; ++m)prevp.push(origpoints[i + m]); p.push(null); p.push(null); for (m = 2; m < ps; ++m)p.push(origpoints[i + m]); p.push(interx); p.push(below); for (m = 2; m < ps; ++m)p.push(origpoints[i + m]); }p.push(x); p.push(y); for (m = 2; m < ps; ++m)p.push(origpoints[i + m]); }datapoints.points = newpoints; thresholded.datapoints.points = threspoints; if (thresholded.datapoints.points.length > 0) { const origIndex = $.inArray(s, plot.getData()); plot.getData().splice(origIndex + 1, 0, thresholded); } } function processThresholds(plot, s, datapoints) { if (!s.threshold) return; if (s.threshold instanceof Array) { s.threshold.sort((a, b) => a.below - b.below); $(s.threshold).each((i, th) => { thresholdData(plot, s, datapoints, th.below, th.color); }); } else { thresholdData(plot, s, datapoints, s.threshold.below, s.threshold.color); } }plot.hooks.processDatapoints.push(processThresholds); }$.plot.plugins.push({
    init, options, name: 'threshold', version: '1.2',
  });
}(jQuery));
