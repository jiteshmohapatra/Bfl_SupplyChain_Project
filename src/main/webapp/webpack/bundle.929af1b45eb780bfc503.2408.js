/*! For license information please see bundle.929af1b45eb780bfc503.2408.js.LICENSE.txt */
(self.webpackChunkopenboxes=self.webpackChunkopenboxes||[]).push([[2408],{1001:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r={XLS:"application/vnd.ms-excel",PDF:"application/pdf"}},5419:e=>{e.exports=function(e,t,n,r){var o=new Blob(void 0!==r?[r,e]:[e],{type:n||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,t);else{var i=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(o):window.webkitURL.createObjectURL(o),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",t),void 0===a.download&&a.setAttribute("target","_blank"),document.body.appendChild(a),a.click(),setTimeout((function(){document.body.removeChild(a),window.URL.revokeObjectURL(i)}),200)}}},25824:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var r=n(96540),o=n(924),i=n(2543),a=n.n(i),u=n(5556),c=n.n(u),l=n(90952),s=n(70373),f=n.n(s),d=n(26438),p=n(26216);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=I(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,n||[],I(e).constructor):t.apply(e,n))}(this,t,[e])).state={showModal:!1},n.openModal=n.openModal.bind(n),n.closeModal=n.closeModal.bind(n),n.save=n.save.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),n=t,(i=[{key:"openModal",value:function(){this.props.onOpen(),this.setState({showModal:!0})}},{key:"closeModal",value:function(){this.props.onClose(),this.setState({showModal:!1})}},{key:"save",value:function(e){this.props.onSave(e),this.setState({showModal:!1})}},{key:"render",value:function(){var e=this,t=this.props.title,n=this.props.defaultTitleMessage;return r.createElement("div",{className:this.props.wrapperClassName},this.props.renderButton?this.props.renderButton({openModal:this.openModal}):r.createElement("button",{type:"button",className:"btn-xs ".concat(this.props.btnOpenClassName),style:this.props.btnOpenStyle,disabled:this.props.btnOpenDisabled,onClick:function(){return e.openModal()}},this.props.btnOpenIcon&&r.createElement("i",{className:"fa ".concat(this.props.btnOpenIcon," mr-1"),"aria-hidden":"true"}),this.props.btnOpenText&&!this.props.btnOpenAsIcon&&r.createElement(p.A,{id:this.props.btnOpenText,defaultMessage:this.props.btnOpenDefaultText})),r.createElement(f(),{isOpen:this.props.showModal||this.state.showModal,onRequestClose:this.closeModal,className:"modal-content-custom",shouldCloseOnOverlayClick:!1},r.createElement("div",{className:this.props.bodyContainerClassName,style:this.props.bodyContainerStyle},"string"==typeof t?r.createElement("h5",{className:"text-center"}," ",r.createElement(p.A,{id:t,defaultMessage:n})):r.createElement(t,null),r.createElement("hr",null),r.createElement(l.lV,{onSubmit:function(t){return e.save(t)},initialValues:this.props.initialValues,validate:this.props.validate,mutators:b({},o.A),render:function(t){var n=t.handleSubmit,o=t.values;return r.createElement("form",{id:"modalForm",onSubmit:n},e.props.children,e.props.renderBodyWithValues(o),a().map(e.props.fields,(function(t,n){return(0,d.bl)(t,n,b(b({},e.props.formProps),{},{values:o}))})),r.createElement("hr",null),r.createElement("div",{className:e.props.btnContainerClassName,role:"group",style:e.props.btnContainerStyle},r.createElement("button",{type:"button",className:e.props.btnCancelClassName,style:e.props.btnCancelStyle,onClick:function(){return e.closeModal()}},r.createElement(p.A,{id:e.props.btnCancelText,defaultMessage:e.props.btnCancelDefaultText})),r.createElement("button",{type:"submit",className:e.props.btnSaveClassName,style:e.props.btnSaveStyle,disabled:e.props.btnSaveDisabled},r.createElement(p.A,{id:e.props.btnSaveText,defaultMessage:e.props.btnSaveDefaultText}))))}}))))}}])&&h(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(r.Component);const E=S;S.propTypes={btnOpenText:c().string,btnOpenDefaultText:c().string,btnOpenClassName:c().string,btnOpenStyle:c().shape({}),btnOpenDisabled:c().bool,btnOpenAsIcon:c().bool,btnOpenIcon:c().string,title:c().oneOfType([c().string,c().func]).isRequired,defaultTitleMessage:c().string.isRequired,children:c().element,bodyContainerClassName:c().string,bodyContainerStyle:c().shape({}),btnContainerClassName:c().string,btnContainerStyle:c().shape({}),renderButton:c().func,wrapperClassName:c().string,btnSaveText:c().string,btnSaveDefaultText:c().string,btnSaveClassName:c().string,btnSaveStyle:c().shape({}),btnSaveDisabled:c().bool,btnCancelText:c().string,btnCancelDefaultText:c().string,btnCancelClassName:c().string,btnCancelStyle:c().shape({}),onOpen:c().func,onSave:c().func,onClose:c().func,validate:c().func,renderBodyWithValues:c().func,initialValues:c().oneOfType([c().shape({}),c().arrayOf(c().shape({}))]),fields:c().shape({}),formProps:c().shape({}),showModal:c().bool},S.defaultProps={btnOpenText:"react.default.button.open.label",btnOpenDefaultText:"Open",btnOpenClassName:"btn btn-outline-primary",btnOpenStyle:{},btnOpenDisabled:!1,btnOpenAsIcon:!1,btnOpenIcon:"",children:null,bodyContainerClassName:"modal-body-container",bodyContainerStyle:{},btnContainerClassName:"btn-group float-right",btnContainerStyle:{},wrapperClassName:null,btnSaveText:"react.default.button.save.label",btnSaveDefaultText:"Save",btnSaveClassName:"btn btn-outline-success",btnSaveStyle:{},btnSaveDisabled:!1,btnCancelText:"react.default.button.cancel.label",btnCancelDefaultText:"Cancel",btnCancelClassName:"btn btn-outline-secondary",btnCancelStyle:{},renderButton:void 0,onOpen:function(){return null},onSave:function(){return null},onClose:function(){return null},validate:function(){return null},renderBodyWithValues:function(){return null},initialValues:[],fields:{},formProps:{},showModal:!1}},44323:(e,t,n)=>{"use strict";n.d(t,{Eh:()=>m,FN:()=>I,OL:()=>y,SH:()=>b,aA:()=>w,ut:()=>g,vk:()=>h,xc:()=>O});var r=n(96540),o=n(2543),i=n.n(o),a=n(51836),u=n(33152),c=n(70317),l=n(88024);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){var t,n;return null!=e&&e.orderAdjustment||null!=e&&e.isAdjustment||null==e||null===(t=e.displayNames)||void 0===t||!t.default?null==e?void 0:e.description:r.createElement(a.Tooltip,{html:null==e?void 0:e.productName,theme:"transparent",delay:"150",duration:"250",hideDelay:"50"},null===(n=e.displayNames)||void 0===n?void 0:n.default)},b=function(e){return null!=e&&e.name?"(source: ".concat(null==e?void 0:e.name,")"):null},y=function(e){var t;return r.createElement("div",{className:"d-flex"},r.createElement("span",{className:"text-truncate"},(null==e?void 0:e.displayName)||(null==e||null===(t=e.displayNames)||void 0===t?void 0:t.default)||(null==e?void 0:e.name)),(0,l.A)(null==e?void 0:e.handlingIcons))},h=function(e){return i().map(e.containers,(function(e){return p(p({},e),{},{shipmentItems:i().map(e.shipmentItems,(function(e){return i().get(e,"recipient.id")?i().omit(e,"product.displayNames"):i().omit(p(p({},e),{},{recipient:""}),"product.displayNames")}))})}))},g=function(e){var t,n,r,o=e.product,i=e.filterValue,a=o.productCode,u=o.name,c=o.displayNames,l=null==i?void 0:i.toLowerCase();return(null==a||null===(t=a.toLowerCase())||void 0===t?void 0:t.includes(l))||(null==u||null===(n=u.toLowerCase())||void 0===n?void 0:n.includes(l))||(null==c||null===(r=c.default)||void 0===r||null===(r=r.toLowerCase())||void 0===r?void 0:r.includes(l))},w=function(e){var t=e.translate,n=e.errors,r="".concat(t("react.stockMovement.errors.errorInLine.label","Error occurred in line"),":"),o=n.reduce((function(e,n,r){return[].concat(function(e){if(Array.isArray(e))return f(e)}(o=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["".concat(n&&"".concat(r+1," - ").concat(i().map(n,(function(e){return t("".concat(e))}))))]);var o}),[]);(0,u.A)(c.A.ERROR_OUTLINED)({message:r,detailsArray:o})},I=function(e){return i().omitBy(e,(function(e){return!("boolean"==typeof e||"number"==typeof e||e instanceof Date)&&i().isEmpty(e)}))},O=function(e,t,n){var r;return null===(r=(null==e?void 0:e.length)>n?"".concat(i().take(e,n).join(""),"..."):e)||void 0===r?void 0:r.split(t)}},50166:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r={TEXT_INPUT:"TextInput",DATE_FIELD:"DateField",SELECT_FIELD:"SelectField"}},50563:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(697),o=n(8949);const i=function(){var e=(0,r.wA)();return{show:function(){return e((0,o.xc)())},hide:function(){return e((0,o.W$)())}}}},51546:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(96540),o=n(5556),i=n.n(o),a=n(41357),u=n(51836),c=n(26216),l=function(e){var t=e.children,n=e.tooltip,o=e.required,i=e.button,l=e.title,s=e.errorMessage,f=e.className,d=e.inputId,p=e.labelPosition,v=e.hideErrorMessageWrapper;return r.createElement("div",{className:"input-wrapper-container ".concat(f," input-wrapper-label-position-").concat(p)},r.createElement("div",{className:"input-wrapper-title"},r.createElement("div",{className:"input-wrapper-label"},r.createElement("label",{htmlFor:d,className:"m-0"},l&&r.createElement(c.A,{id:null==l?void 0:l.id,defaultMessage:null==l?void 0:l.defaultMessage})),n&&r.createElement(u.Tooltip,{html:r.createElement("span",{className:"p-1"},r.createElement(c.A,{id:n.id,defaultMessage:n.defaultMessage}))},r.createElement("span",{className:"input-wrapper-tooltip"},r.createElement(a.Kt4,{className:"ml-1"}))),o&&r.createElement("span",{className:"input-wrapper-asterisk ml-1"},"*")),i&&r.createElement("div",{onClick:i.onClick,role:"presentation",className:"input-wrapper-button"},r.createElement(c.A,{id:i.id,defaultMessage:i.defaultMessage}))),t,!v&&r.createElement("div",{className:"input-wrapper-error-message"},s))};const s=l;l.propTypes={children:i().node.isRequired,tooltip:i().shape({id:i().string.isRequired,defaultMessage:i().string.isRequired}),required:i().bool,title:i().shape({id:i().string.isRequired,defaultMessage:i().string.isRequired}),button:i().shape({id:i().string.isRequired,defaultMessage:i().string.isRequired,onClick:i().func.isRequired}),errorMessage:i().string,className:i().string,inputId:i().string,labelPosition:i().oneOf(["top","bottom","left","right"]),hideErrorMessageWrapper:i().bool},l.defaultProps={tooltip:null,required:!1,title:null,button:null,errorMessage:null,className:"",inputId:void 0,labelPosition:"top",hideErrorMessageWrapper:!1}},55216:(e,t,n)=>{"use strict";n.d(t,{A:()=>d,k:()=>p});var r=n(5419),o=n.n(r),i=n(38798),a=n(1001),u=n(43256);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=function(e){var t=e.url,n=e.params,r=e.format,c=void 0===r?"csv":r,l=e.filename,f=e.afterExporting;return u.Ay.get(t,{responseType:"blob",params:s({format:c},n),paramsSerializer:i.A.stringify}).then((function(e){var t=e.headers["content-disposition"].split("filename=")[1].replaceAll('"',"").split(".")[0],n=l||t||"file";return o()(e.data,"".concat(n,".").concat(c),a.A[c]),null==f||f(),e}))};var p=function(e){var t;return e?null===(t=e.split("filename=")[1])||void 0===t||null===(t=t.split(";")[0])||void 0===t?void 0:t.replaceAll('"',""):null}},57358:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(96540),o=n(50166);const i=function(e){var t=e.columnId,n=e.fieldIndex,i=e.rowIndex,a=e.fieldId,u=e.ref,c=e.type;(0,r.useEffect)((function(){var e,r,l,s=t&&n===i&&a===t;if(s&&c===o.A.DATE_FIELD)return null===(e=u.current)||void 0===e||e.setOpen(!0),void(null===(r=u.current)||void 0===r||null===(r=r.input)||void 0===r||r.focus());s&&(null===(l=u.current)||void 0===l||l.focus())}),[t,n,i,a,u])}},58647:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(46857),o=n(43256),i=n(55216);const a={getInvoices:function(e){return o.Ay.get(r.R7,e)},getInvoice:function(e,t){return o.Ay.get((0,r.It)(e),t)},saveInvoice:function(e,t){return o.Ay.post((0,r.It)(e),t)},submitInvoice:function(e){return o.Ay.post((0,r.Jo)(e))},postInvoice:function(e){return o.Ay.post((0,r.nW)(e))},getInvoiceItems:function(e,t){return o.Ay.get((0,r.$y)(e),t)},saveInvoiceItems:function(e,t){return o.Ay.post((0,r.$y)(e),t)},removeInvoiceItem:function(e){return o.Ay.delete((0,r.Pb)(e))},getInvoiceOrders:function(e,t){return o.Ay.get((0,r.KS)(e),t)},getInvoiceShipments:function(e,t){return o.Ay.get((0,r._M)(e),t)},saveInvoiceItemsCandidates:function(e,t){return o.Ay.post((0,r.dY)(e),t)},downloadInvoices:function(e){return(0,i.A)({url:r.R7,params:e})}}},69085:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Lt});var r=n(96540),o=n(5556),i=n.n(o),a=n(88600),u=n(697),c=n(8949),l=n(58647),s=n(924),f=n(46894),d=n.n(f),p=n(2543),v=n.n(p),m=n(23350),b=n(90952),y=n(46857),h=n(43256);const g=function(e){return h.Ah.post((0,y.f4)(null==e?void 0:e.id),e)};var w=n(41640),I=n(93638),O=n(45814),S=n(34297),E=n(25824),P=n(50709),j=n(84079),x=n(44323);function A(e){if(!e)return"";var t=Number.parseFloat(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return t<0||t.startsWith("-")?"(".concat(t.replace("-",""),")"):t}var N=n(66792),C=n(26216);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return(t=L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e){if("object"!=M(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var W={invoiceItems:{type:w.A,arrowsNavigation:!0,maxTableHeight:"calc(100vh - 500px)",overflowStyle:"overlay",fields:{checked:{fieldKey:"",label:"",flexWidth:"0.4",type:function(e){var t=e.rowIndex,n=e.fieldValue,o=e.selectRow;return r.createElement(j.A,{id:t.toString(),disabled:!1,className:"ml-1",value:n.checked,onChange:function(e){return o(e,t)}})}},orderNumber:{type:O.A,label:"react.invoice.orderNumber.label",defaultMessage:"PO Number",flexWidth:"1",getDynamicAttr:function(e){var t=e.values,n=e.rowIndex,r=t&&t.invoiceItems&&t.invoiceItems[n]&&t.invoiceItems[n].orderId;return{url:r?P.fr.show(r):""}}},shipmentNumber:{type:O.A,label:"react.invoice.shipmentNumber.label",defaultMessage:"Shipment Number",flexWidth:"1",getDynamicAttr:function(e){var t=e.values,n=e.rowIndex,r=t&&t.invoiceItems&&t.invoiceItems[n]&&t.invoiceItems[n].shipmentId;return{url:r?P.ti.show(r):""}}},budgetCode:{type:O.A,label:"react.invoice.budgetCode.label",defaultMessage:"Budget Code",flexWidth:"1"},glCode:{type:O.A,label:"react.invoice.glCode.label",defaultMessage:"GL Code",flexWidth:"1"},productCode:{type:O.A,label:"react.invoice.itemNumber.label",defaultMessage:"Item No",flexWidth:"1"},description:{type:O.A,label:"react.invoice.description.label",defaultMessage:"Description",flexWidth:"3",attributes:{className:"text-left"},getDynamicAttr:function(e){return{formatValue:function(){var t,n=e.values,r=e.rowIndex,o=null==n||null===(t=n.invoiceItems)||void 0===t?void 0:t[r];return(0,x.Eh)(o)}}}},supplierCode:{type:O.A,label:"react.invoice.supplierCode.label",defaultMessage:"Supplier Code",flexWidth:"1"},quantity:{type:O.A,label:"react.invoice.quantity.label",defaultMessage:"Qty",flexWidth:"1"},quantityToInvoice:{type:S.A,label:"react.invoice.quantityToInvoice.label",defaultMessage:"Qty to Invoice",flexWidth:"1",attributes:{type:"number"},getDynamicAttr:function(e){var t=e.updateRow,n=e.values,r=e.rowIndex;return{onChange:function(){return t(n,r)}}}},uom:{type:O.A,label:"react.invoice.uom.label",defaultMessage:"UoM",flexWidth:"1"},unitPrice:{type:O.A,label:"react.invoice.unitPrice.label",defaultMessage:"Unit Price",flexWidth:"1",attributes:{formatValue:function(e){return e?A(e):e}}}}}};function F(e){var t={invoiceItems:[]};return v().forEach(e.invoiceItems,(function(e,n){e.checked&&(v().toInteger(e.quantityToInvoice)>e.quantity||v().toInteger(e.quantityToInvoice)<=0)&&(t.invoiceItems[n]={quantityToInvoice:"react.invoice.errors.quantityToInvoice.label"})})),t}var B={selectedInvoiceItems:null,formValues:{invoiceItems:[]},sortOrder:0,orderNumberOptions:[],shipmentNumberOptions:[],selectedOrderNumbers:[],selectedShipmentNumbers:[]},U=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=V(t),function(e,t){if(t&&("object"==M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,q()?Reflect.construct(t,n||[],V(e).constructor):t.apply(e,n))}(this,t,[e])).state=B,n.onOpen=n.onOpen.bind(n),n.onSave=n.onSave.bind(n),n.selectRow=n.selectRow.bind(n),n.updateRow=n.updateRow.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),n=t,(o=[{key:"onOpen",value:function(){var e=this;return this.props.onOpen().then((function(){e.setState(B,(function(){e.fetchInvoiceItemCandidates()}))}))}},{key:"onSave",value:function(){var e=this;this.props.showSpinner();var t=this.props.invoiceId,n=this.state.selectedInvoiceItems,r={invoiceItems:v().map(n,(function(e,t){return{id:t,quantityToInvoice:v().toInteger(e.quantityToInvoice)}}))};l.A.saveInvoiceItems(t,r).then((function(){e.setState(B,(function(){e.props.hideSpinner(),e.props.onResponse({startIndex:0})}))})).catch((function(){return e.props.hideSpinner()}))}},{key:"setSelectedOrders",value:function(e){var t=this;this.setState({selectedOrderNumbers:e},(function(){return t.fetchInvoiceItemCandidates()}))}},{key:"setSelectedShipments",value:function(e){var t=this;this.setState({selectedShipmentNumbers:e},(function(){return t.fetchInvoiceItemCandidates()}))}},{key:"getSortOrder",value:function(){return this.setState((function(e){return{sortOrder:e.sortOrder+1}})),this.state.sortOrder}},{key:"selectRow",value:function(e,t){var n=this.state,r=n.formValues,o=n.selectedInvoiceItems,i={formValues:{invoiceItems:v().map(r.invoiceItems,(function(n,r){return t===r?k(k({},n),{},{checked:e,quantityToInvoice:e?n.quantity:"",sortOrder:e?n.sortOrder:""}):k({},n)}))}};e?i=k(k({},i),{},{selectedInvoiceItems:k(k({},o),{},T({},r.invoiceItems[t].id,k(k({},r.invoiceItems[t]),{},{quantityToInvoice:e?r.invoiceItems[t].quantity:"",sortOrder:e?r.invoiceItems[t].sortOrder:""})))}):(delete o[r.invoiceItems[t].id],i=k(k({},i),{},{selectedInvoiceItems:o})),this.setState(i)}},{key:"updateRow",value:function(e,t){var n=this.state.selectedInvoiceItems,r=e.invoiceItems[t];r.checked=!0,this.setState({formValues:d()(e,{invoiceItems:T({},t,{$set:r})}),selectedInvoiceItems:k(k({},n),{},T({},r.id,{quantityToInvoice:r.quantityToInvoice,sortOrder:r.sortOrder}))})}},{key:"fetchInvoiceItemCandidates",value:function(){var e=this,t=this.state,n=t.selectedOrderNumbers,r=t.selectedShipmentNumbers,o=t.selectedInvoiceItems,i=this.props.invoiceId,a={orderNumbers:v().map(n,(function(e){return e.value})),shipmentNumbers:v().map(r,(function(e){return e.value}))};return l.A.saveInvoiceItemsCandidates(i,a).then((function(t){e.setState({formValues:{invoiceItems:v().map(t.data.data,(function(t){return k(k({},t),{},{checked:o&&!!o[t.id],quantityToInvoice:o&&o[t.id]?o[t.id].quantityToInvoice:"",sortOrder:e.getSortOrder()})}))}},(function(){e.fetchOrderNumbers(i),e.fetchShipmentNumbers(i)}))}))}},{key:"fetchOrderNumbers",value:function(e){var t=this;0===this.state.orderNumberOptions.length&&l.A.getInvoiceOrders(e).then((function(e){t.setState({orderNumberOptions:v().map(e.data.data,(function(e){return{value:e,label:e}}))})}))}},{key:"fetchShipmentNumbers",value:function(e){var t=this;0===this.state.shipmentNumberOptions.length&&l.A.getInvoiceShipments(e).then((function(e){t.setState({shipmentNumberOptions:v().map(e.data.data,(function(e){return{value:e,label:e}}))})}))}},{key:"checkAllVisibleItems",value:function(e){var t=this.state.formValues,n=d()(t,{invoiceItems:{$apply:function(t){return t.map((function(t){return k(k({},t),{},{checked:e,quantityToInvoice:e?t.quantity:"",sortOrder:e?t.sortOrder:""})}))}}}),r=this.state.selectedInvoiceItems?this.state.selectedInvoiceItems:[];e?v().map(n.invoiceItems,(function(t,o){return r[t.id]=k(k({},n.invoiceItems[o]),{},{quantityToInvoice:e?n.invoiceItems[o].quantity:"",sortOrder:e?n.invoiceItems[o].sortOrder:""})})):v().map(n.invoiceItems,(function(e,t){delete r[n.invoiceItems[t].id]})),this.setState({formValues:n,selectedInvoiceItems:k({},r)})}},{key:"checkSelected",value:function(){var e=this;return v().every(this.state.formValues.invoiceItems,(function(t){return v().includes(v().keys(e.state.selectedInvoiceItems),t.id)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.formValues,o=t.orderNumberOptions,i=t.shipmentNumberOptions,a=t.selectedOrderNumbers,u=t.selectedShipmentNumbers,c=this.props,l=c.translate,s=c.btnOpenDisabled;return r.createElement(E.A,{onSave:this.onSave,fields:W,validate:F,initialValues:n,title:"react.invoice.addInvoiceItems.label",defaultTitleMessage:"Add invoice items",formProps:{selectRow:this.selectRow,updateRow:this.updateRow},renderButton:function(t){var n=t.openModal;return r.createElement("button",{type:"button",className:"btn-xs",disabled:s,onClick:function(){e.onOpen().then((function(){return n()}))}},r.createElement(C.A,{id:"react.default.button.addLines.label",defaultMessage:"Add lines"}))},btnSaveText:"react.invoice.addInvoiceItems.label",btnSaveDefaultText:"Add invoice items",btnOpenDisabled:s,btnSaveDisabled:!v().find(n.invoiceItems,(function(e){return e.checked}))},r.createElement("div",{className:"d-flex mb-3 justify-content-start align-items-center w-100 combined-shipment-filter"},r.createElement(N.A,{fieldName:"orderNumber",placeholder:l("react.invoice.selectOrders.label","Select orders..."),value:a,multi:!0,options:o,showValueTooltip:!0,onChange:function(t){return e.setSelectedOrders(t)},classes:"",cache:!1})," ",r.createElement(N.A,{fieldName:"shipmentNumber",placeholder:l("react.invoice.selectShipments.label","Select shipments..."),value:u,multi:!0,options:i,showValueTooltip:!0,onChange:function(t){return e.setSelectedShipments(t)},classes:"",cache:!1})),r.createElement("div",null,r.createElement(j.A,{disabled:!1,className:"m-3",checked:this.checkSelected(),onChange:function(t){return e.checkAllVisibleItems(t)}})))}}])&&D(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);const z=(0,u.Ng)((function(e){return{translate:(0,C.H)((0,a.ro)(e.localize))}}),{showSpinner:c.xc,hideSpinner:c.W$})(U);U.propTypes={showSpinner:i().func.isRequired,hideSpinner:i().func.isRequired,translate:i().func.isRequired,onResponse:i().func.isRequired,onOpen:i().func.isRequired,invoiceId:i().string.isRequired,btnOpenDisabled:i().bool},U.defaultProps={btnOpenDisabled:!1};var G=n(26438);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function $(){$=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),u=new C(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",v="executing",m="completed",b={};function y(){}function h(){}function g(){}var w={};l(w,a,(function(){return this}));var I=Object.getPrototypeOf,O=I&&I(I(M([])));O&&O!==n&&r.call(O,a)&&(w=O);var S=g.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Y(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=d;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=x(u,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Y(t)+" is not iterable")}return h.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:h,configurable:!0}),h.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(P.prototype),l(P.prototype,u,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,c,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function K(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ne(r.key),r)}}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return(t=ne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e){var t=function(e){if("object"!=Y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Y(t)?t:t+""}var re={type:I.A,label:"react.default.button.delete.label",defaultMessage:"Delete",flexWidth:"1",fieldKey:"",buttonLabel:"react.default.button.delete.label",buttonDefaultMessage:"Delete",getDynamicAttr:function(e){var t=e.fieldValue,n=e.removeItem,r=e.updateTotalCount,o=e.values,i=e.rowIndex;return{onClick:t&&t.id?function(){n(t.id,o,i),r(-1)}:function(){r(-1)}}},attributes:{className:"btn btn-outline-danger"}},oe={invoiceItems:{type:w.A,virtualized:!0,totalCount:function(e){return e.totalCount},isRowLoaded:function(e){return e.isRowLoaded},loadMoreRows:function(e){return(0,e.loadMoreRows)()},isFirstPageLoaded:function(e){return e.isFirstPageLoaded},addButton:function(e){var t=e.values,n=e.loadMoreRows,o=e.saveBeforeOpenInvoiceCandidates;return r.createElement(z,{onOpen:function(){return o(t)},invoiceId:t.id,onResponse:n})},fields:{orderNumber:{type:O.A,label:"react.invoice.orderNumber.label",defaultMessage:"PO Number",flexWidth:"1",getDynamicAttr:function(e){var t=e.values,n=e.rowIndex,r=t&&t.invoiceItems&&t.invoiceItems[n]&&t.invoiceItems[n].orderId;return{url:r?P.fr.show(r):""}}},shipmentNumber:{type:O.A,label:"react.invoice.shipmentNumber.label",defaultMessage:"Shipment Number",flexWidth:"1",getDynamicAttr:function(e){var t=e.values,n=e.rowIndex,r=t&&t.invoiceItems&&t.invoiceItems[n]&&t.invoiceItems[n].shipmentId;return{url:r?P.ti.show(r):""}}},budgetCode:{type:O.A,label:"react.invoice.budgetCode.label",defaultMessage:"Budget Code",flexWidth:"1"},glCode:{type:O.A,label:"react.invoice.glCode.label",defaultMessage:"GL Code",flexWidth:"1"},productCode:{type:O.A,label:"react.invoice.itemNo.label",defaultMessage:"Item No",flexWidth:"1"},description:{type:O.A,label:"react.invoice.description.label",defaultMessage:"Description",flexWidth:"5",attributes:{className:"text-left"},getDynamicAttr:function(e){return{formatValue:function(){var t,n=e.values,r=e.rowIndex,o=null==n||null===(t=n.invoiceItems)||void 0===t?void 0:t[r];return(0,x.Eh)(o)}}}},quantity:{type:S.A,label:"react.invoice.qty.label",defaultMessage:"Qty",flexWidth:"1.1",required:!0,attributes:{type:"number",showError:!0},getDynamicAttr:function(e){var t=e.rowIndex,n=e.values,r=e.updateRow,o=e.validateInvoiceItem,i=e.debouncedInvoiceItemValidation;return{onBlur:function(){r(n,t),o({invoiceItem:n.invoiceItems[t],rowIndex:t})},onChange:function(e){i({invoiceItem:ee(ee({},n.invoiceItems[t]),{},{quantity:e}),rowIndex:t})}}}},uom:{type:O.A,label:"react.invoice.uom.label",defaultMessage:"UOM",flexWidth:"1"},unitPrice:{type:O.A,label:"react.invoice.unitPrice.label",defaultMessage:"Unit Price",flexWidth:"1",attributes:{formatValue:function(e){return e?A(e):e}}},amount:{type:O.A,label:"react.invoice.totalPrice.label",defaultMessage:"Total Price",flexWidth:"1",attributes:{formatValue:function(e){return e?A(e):e}}},deleteButton:re}}},ie=function(e){return v().some(e,(function(e){return 0===v().parseInt(e.quantity)}))},ae=function(e){var t={invoiceItems:[]};return v().forEach(null==e?void 0:e.invoiceItems,(function(e,n){v().isNil(null==e?void 0:e.quantity)&&(t.invoiceItems[n]={quantity:"react.invoice.error.enterQuantity.label"}),v().has(e,"isValid")&&!e.isValid&&(t.invoiceItems[n]={quantity:null==e?void 0:e.errorMessage})})),t},ue=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=X(t),function(e,t){if(t&&("object"==Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(t,n||[],X(e).constructor):t.apply(e,n))}(this,t,[e])).state={values:ee(ee({},n.props.initialValues),{},{invoiceItems:[],totalValue:0}),isFirstPageLoaded:!1},n.isRowLoaded=n.isRowLoaded.bind(n),n.loadMoreRows=n.loadMoreRows.bind(n),n.updateTotalCount=n.updateTotalCount.bind(n),n.removeItem=n.removeItem.bind(n),n.updateRow=n.updateRow.bind(n),n.saveInvoiceItems=n.saveInvoiceItems.bind(n),n.validateInvoiceItem=n.validateInvoiceItem.bind(n),n.confirmSave=n.confirmSave.bind(n),n.save=n.save.bind(n),n.saveBeforeOpenInvoiceCandidates=n.saveBeforeOpenInvoiceCandidates.bind(n),n.debouncedInvoiceItemValidation=v().debounce(n.validateInvoiceItem,1e3),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(t,e),n=t,o=[{key:"setInvoiceItems",value:function(e,t){var n=this;this.props.showSpinner();var r=e.data,o=r.data,i=r.totalCount,a=v().isNull(t)||0===t?o:v().uniqBy(v().concat(this.state.values.invoiceItems,o),"id"),u=v().reduce(a,(function(e,t){return e+(t.totalAmount?parseFloat(t.totalAmount):0)}),0);this.setState((function(e){return{values:ee(ee({},e.values),{},{invoiceItems:a,totalCount:i,totalValue:u})}}),(function(){v().isNull(t)||n.state.values.invoiceItems.length===n.state.values.totalCount||n.loadMoreRows({startIndex:t+n.props.pageSize}),n.props.hideSpinner()}))}},{key:"isRowLoaded",value:function(e){var t=e.index;return!!this.state.values.invoiceItems[t]}},{key:"loadMoreRows",value:function(e){var t=this,n=e.startIndex;this.setState({isFirstPageLoaded:!0}),l.A.getInvoiceItems(this.state.values.id,{params:{offset:n,max:this.props.pageSize}}).then((function(e){t.setInvoiceItems(e,n)}))}},{key:"updateTotalCount",value:function(e){this.setState((function(t){return{values:ee(ee({},t.values),{},{totalCount:t.values.totalCount+e})}}))}},{key:"updateRow",value:function(e,t){var n=e.invoiceItems[t];this.setState({values:d()(e,{invoiceItems:te({},t,{$set:n})})})}},{key:"saveInvoiceItems",value:function(e){var t={id:e.id,invoiceItems:v().map(e.invoiceItems,(function(e){return{id:e.id,quantity:v().toInteger(e.quantity)}}))};return t.invoiceItems.length?l.A.saveInvoiceItems(this.state.values.id,t).catch((function(){return Promise.reject(new Error("react.invoice.error.saveInvoiceItems.label"))})):Promise.resolve()}},{key:"confirmSave",value:function(e){(0,m.ZX)({title:this.props.translate("react.invoice.message.confirmSave.label","Confirm save"),message:this.props.translate("react.invoice.confirmSave.message","Are you sure you want to save? There are some lines with empty or zero quantity, those lines will be deleted."),buttons:[{label:this.props.translate("react.default.yes.label","Yes"),onClick:e},{label:this.props.translate("react.default.no.label","No")}]})}},{key:"nextPage",value:function(e){var t=this;ie(e.invoiceItems)?this.confirmSave((function(){t.saveInvoiceItems(e).then((function(){return t.props.nextPage(e)}))})):this.saveInvoiceItems(e).then((function(){return t.props.nextPage(e)}))}},{key:"previousPage",value:function(e){var t=this;ie(e.invoiceItems)?this.confirmSave((function(){t.saveInvoiceItems(e).then((function(){return t.props.previousPage(e)}))})):this.saveInvoiceItems(e).then((function(){return t.props.previousPage(e)}))}},{key:"removeItem",value:function(e,t,n){var r=this,o=t.invoiceItems[n],i=parseFloat(this.state.values.totalValue)-parseFloat(o.totalAmount);return l.A.removeInvoiceItem(e).then((function(){r.setState((function(e){return{values:ee(ee({},e.values),{},{invoiceItems:d()(e.values.invoiceItems,{$splice:[[n,1]]}),totalValue:i})}}))})).catch((function(){return r.props.hideSpinner(),Promise.reject(new Error("react.invoice.error.deleteInvoiceItem.label"))}))}},{key:"validateInvoiceItem",value:(i=$().mark((function e(t){var n,r,o,i,a,u;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.invoiceItem,r=t.rowIndex,this.debouncedInvoiceItemValidation.cancel(),o=this.state.values,e.prev=3,e.next=6,g(v().pick(n,["quantity","id","shipmentId"]));case 6:i=d()(o,{invoiceItems:te({},r,{isValid:{$set:!0},quantity:{$set:n.quantity}})}),this.setState({values:i}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),u=d()(o,{invoiceItems:te({},r,{isValid:{$set:!1},errorMessage:{$set:(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a||null===(a=a.data)||void 0===a||null===(a=a.errorMessages)||void 0===a?void 0:a[0])||""},quantity:{$set:n.quantity}})}),this.setState({values:u});case 14:case"end":return e.stop()}}),e,this,[[3,10]])})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){K(o,n,r,a,u,"next",e)}function u(e){K(o,n,r,a,u,"throw",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"saveBeforeOpenInvoiceCandidates",value:function(e){var t=this;return new Promise((function(n){return ie(e.invoiceItems)?t.confirmSave((function(){t.saveInvoiceItems(e).then((function(){t.loadMoreRows({startIndex:0})})).finally((function(){return n()}))})):t.saveInvoiceItems(e).finally((function(){return n()}))}))}},{key:"save",value:function(e){var t=this;return ie(e.invoiceItems)?(this.confirmSave((function(){t.saveInvoiceItems(e).then((function(){t.loadMoreRows({startIndex:0})}))})),null):this.saveInvoiceItems(e)}},{key:"saveAndExit",value:function(e){var t=this;ie(e.invoiceItems)?this.confirmSave((function(){t.saveInvoiceItems(e).then((function(){window.location=P.m5.show(e.id)}))})):this.saveInvoiceItems(e).then((function(){window.location=P.m5.show(e.id)}))}},{key:"render",value:function(){var e=this;return r.createElement(b.lV,{onSubmit:function(){},mutators:ee({},s.A),initialValues:this.state.values,validate:ae,render:function(t){var n,o,i=t.handleSubmit,a=t.values,u=t.invalid;return r.createElement("div",{className:"d-flex flex-column"},r.createElement("span",{className:"buttons-container"},r.createElement("button",{type:"button",className:"btn btn-outline-secondary float-right btn-form btn-xs",disabled:u,onClick:function(){return e.save(a)}},r.createElement("span",null,r.createElement("i",{className:"fa fa-floppy-o pr-2"}),r.createElement(C.A,{id:"react.default.button.save.label",defaultMessage:"Save"}))),r.createElement("button",{type:"button",className:"btn btn-outline-secondary float-right btn-form btn-xs",disabled:u,onClick:function(){return e.saveAndExit(a)}},r.createElement("span",null,r.createElement("i",{className:"fa fa-sign-out pr-2"}),r.createElement(C.A,{id:"react.default.button.saveAndExit.label",defaultMessage:"Save and exit"})))),r.createElement("form",{onSubmit:i},r.createElement("div",{className:"table-form"},v().map(oe,(function(t,n){return(0,G.bl)(t,n,{values:a,totalCount:e.state.values.totalCount,loadMoreRows:e.loadMoreRows,isRowLoaded:e.isRowLoaded,isFirstPageLoaded:e.state.isFirstPageLoaded,updateTotalCount:e.updateTotalCount,removeItem:e.removeItem,saveBeforeOpenInvoiceCandidates:e.saveBeforeOpenInvoiceCandidates,updateRow:e.updateRow,validateInvoiceItem:e.validateInvoiceItem,debouncedInvoiceItemValidation:e.debouncedInvoiceItemValidation})}))),r.createElement("div",{className:"font-weight-bold float-right mr-5er e mt-1"},r.createElement(C.A,{id:"react.default.total.label",defaultMessage:"Total"}),": ",e.state.values.totalValue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," ",e.state.values.currencyUom.code)," ",r.createElement("div",{className:"submit-buttons"},r.createElement("button",{type:"button",onClick:function(){return e.previousPage(a)},className:"btn btn-outline-primary btn-form btn-xs"},r.createElement(C.A,{id:"react.default.button.previous.label",defaultMessage:"Previous"})),r.createElement("button",{type:"button",disabled:u||!(null!==(n=a.invoiceItems)&&void 0!==n&&n.length)||(o=a.invoiceItems,v().every(o,(function(e){return 0===v().parseInt(e.quantity)}))),onClick:function(){return e.nextPage(a)},className:"btn btn-outline-primary btn-form float-right btn-xs"},r.createElement(C.A,{id:"react.default.button.next.label",defaultMessage:"Next"})))))}})}}],o&&Q(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i,a}(r.Component);const ce=(0,u.Ng)((function(e){return{pageSize:e.session.pageSize,translate:(0,C.H)((0,a.ro)(e.localize))}}),{showSpinner:c.xc,hideSpinner:c.W$})(ue);ue.propTypes={initialValues:i().shape({}).isRequired,previousPage:i().func.isRequired,nextPage:i().func.isRequired,pageSize:i().number.isRequired,showSpinner:i().func.isRequired,hideSpinner:i().func.isRequired,translate:i().func.isRequired};var le={invoiceItems:{type:w.A,virtualized:!0,totalCount:function(e){return e.totalCount},isRowLoaded:function(e){return e.isRowLoaded},loadMoreRows:function(e){return(0,e.loadMoreRows)()},getDynamicRowAttr:function(e){var t=e.rowValues;return{className:t&&t.totalAmount&&t.totalAmount<0?"negative-row-value":""}},fields:{orderNumber:{type:O.A,label:"react.invoice.orderNumber.label",defaultMessage:"PO Number",flexWidth:"1",getDynamicAttr:function(e){var t=e.invoiceItems,n=e.rowIndex,r=t&&t[n]&&t[n].orderId;return{url:r?P.fr.show(r):""}}},shipmentNumber:{type:O.A,label:"react.invoice.shipmentNumber.label",defaultMessage:"Shipment Number",flexWidth:"1",getDynamicAttr:function(e){var t=e.invoiceItems,n=e.rowIndex,r=t&&t[n]&&t[n].shipmentId;return{url:r?P.ti.show(r):""}}},budgetCode:{type:O.A,label:"react.invoice.budgetCode.label",defaultMessage:"Budget Code",flexWidth:"1"},glCode:{type:O.A,label:"react.invoice.glCode.label",defaultMessage:"GL Code",flexWidth:"1"},productCode:{type:O.A,label:"react.invoice.itemNo.label",defaultMessage:"Item No",flexWidth:"1"},description:{type:O.A,label:"react.invoice.description.label",defaultMessage:"Description",flexWidth:"5",attributes:{className:"text-left"},getDynamicAttr:function(e){return{formatValue:function(){var t=e.invoiceItems,n=e.rowIndex,r=null==t?void 0:t[n];return(0,x.Eh)(r)}}}},quantity:{type:O.A,label:"react.invoice.qty.label",defaultMessage:"Qty",flexWidth:"1"},uom:{type:O.A,label:"react.invoice.uom.label",defaultMessage:"UOM",flexWidth:"1"},unitPrice:{type:O.A,label:"react.invoice.unitPrice.label",defaultMessage:"Unit Price",flexWidth:"1",attributes:{formatValue:function(e){return e?A(e):e}}},amount:{type:O.A,label:"react.invoice.totalPrice.label",defaultMessage:"Total Price",flexWidth:"1",attributes:{formatValue:function(e){return e?A(e):e}}}}}},se=function(e){var t=e.invoiceItems,n=e.invoiceId,o=e.totalCount,i=e.loadMoreRows,a=(0,r.useCallback)((function(e){var n=e.index;return!!t[n]}),[t]);return r.createElement("div",{className:"my-2 table-form"},v().map(le,(function(e,r){return(0,G.bl)(e,r,{invoiceId:n,invoiceItems:t,totalCount:o,loadMoreRows:i,isRowLoaded:a})})))};se.propTypes={invoiceId:i().string.isRequired,invoiceItems:i().shape({}).isRequired,totalCount:i().number.isRequired,loadMoreRows:i().func.isRequired};const fe=se;var de=n(90524),pe=n(79738);function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(null,arguments)}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var be={invoiceNumber:{type:S.A,label:"react.invoice.invoiceNumber.label",defaultMessage:"Invoice number",attributes:{disabled:!0}},vendorName:{type:S.A,label:"react.Invoice.vendor.label",defaultMessage:"Vendor",attributes:{disabled:!0}},vendorInvoiceNumber:{type:S.A,label:"react.invoice.vendorInvoiceNumber.label",defaultMessage:"Vendor Invoice Number",attributes:{disabled:!0}},dateInvoiced:{type:pe.A,label:"react.invoice.invoiceDate.label",defaultMessage:"Invoice Date",attributes:{disabled:!0,dateFormat:"MM/DD/YYYY"}},"currencyUom.code":{type:S.A,label:"react.invoice.currency.label",defaultMessage:"Currency",attributes:{disabled:!0}},totalValue:{type:S.A,label:"react.invoice.total.label",defaultMessage:"Total",attributes:{disabled:!0},getDynamicAttr:function(e){var t=e.values;return{className:t&&t.totalValue&&(t.totalValue<0||t.totalValue.startsWith("("))?"negative-value":""}}}},ye=function(e){var t,n,o=e.values,i=e.disableSaveButton,a=e.updateInvoiceItem,u=e.canUpdateInvoiceItems,c=e.save,l=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,n)||function(e,t){if(e){if("string"==typeof e)return me(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=l[0],f=l[1],d=function(){window.location=P.m5.show(o.id)};return r.createElement("div",{className:"classic-form classic-form-condensed"},r.createElement("span",{className:"buttons-container classic-form-buttons"},r.createElement("button",{type:"button",className:"btn btn-outline-secondary float-right btn-form btn-xs",disabled:i,onClick:function(){u?a(d):d()}},r.createElement("span",null,r.createElement("i",{className:"fa fa-sign-out pr-2"}),r.createElement(C.A,{id:"react.default.button.saveAndExit.label",defaultMessage:"Save and exit"}))),u&&r.createElement("button",{type:"button",className:"btn btn-outline-secondary float-right btn-form btn-xs",disabled:i,onClick:function(){return c()}},r.createElement("span",null,r.createElement("i",{className:"fa fa-save pr-2"}),r.createElement(C.A,{id:"react.default.button.save.label",defaultMessage:"Save"}))),r.createElement("span",{className:"mr-3"},r.createElement("div",{className:"dropdown"},r.createElement("button",{type:"button",onClick:function(){f((function(e){return!e}))},className:"dropdown-button float-right mb-1 btn btn-outline-secondary align-self-end btn-xs"},r.createElement("span",null,r.createElement("i",{className:"fa fa-sign-out pr-2"}),r.createElement(C.A,{id:"react.default.button.download.label",defaultMessage:"Download"}))),r.createElement("div",{className:"dropdown-content print-buttons-container col-md-3 flex-grow-1\n            ".concat(s?"visible":"")},o.documents&&o.documents.length>0&&v().map(o.documents,(function(e,t){return e.hidden?null:r.createElement(de.A,ve({link:e.link,buttonTitle:e.name},e,{key:t,disabled:!1}))})))))),r.createElement("div",{className:"form-title"},r.createElement(C.A,{id:"react.invoice.options.label",defaultMessage:"Invoice options"})),v().map(be,(function(e,t){return(0,G.bl)(e,t,{values:o})})))};ye.propTypes={values:i().shape({id:i().string.isRequired,documents:i().arrayOf(i().shape({})).isRequired}).isRequired,disableSaveButton:i().bool.isRequired,updateInvoiceItem:i().func.isRequired,canUpdateInvoiceItems:i().bool.isRequired,save:i().func.isRequired};const he=ye;var ge=n(51836),we=n(87054),Ie=n(94731);function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(null,arguments)}var Se={invoiceItems:{type:w.A,virtualized:!0,totalCount:function(e){return e.totalCount},isRowLoaded:function(e){return e.isRowLoaded},loadMoreRows:function(e){return(0,e.loadMoreRows)()},getDynamicRowAttr:function(e){var t=e.rowValues;return{className:(null==t?void 0:t.amount)<0?"negative-row-value":""}},fields:{rowIcon:{type:function(e){var t=e.invoiceItems,n=e.rowIndex,o=e.isPrepaymentInvoice,i=!!t,a=t[n];return i&&(o||(null==a?void 0:a.isPrepaymentItem)||(null==a?void 0:a.inverse))?r.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.createElement(ge.Tooltip,{html:"Prepayment",theme:"transparent",delay:"150",duration:"250",hideDelay:"50"},r.createElement("b",null,"Ⓟ"))):null!=a&&a.isCanceled?r.createElement(RiCopyrightLine,{size:"23px",color:"black"}):null},label:"",defaultMessage:"",flexWidth:"0.25"},shipmentNumber:{type:O.A,label:"react.invoice.shipmentNumber.label",defaultMessage:"Shipment Number",flexWidth:"1",getDynamicAttr:function(e){var t=e.invoiceItems,n=e.rowIndex,r=t[n],o=t&&t[n]&&t[n].shipmentId;return{url:o?P.ti.show(o):"",formatValue:function(e){return null!=r&&r.inverse?"":e}}}},budgetCode:{type:O.A,label:"react.invoice.budgetCode.label",defaultMessage:"Budget Code",flexWidth:"1"},glCode:{type:O.A,label:"react.invoice.glCode.label",defaultMessage:"GL Code",flexWidth:"1"},productCode:{type:O.A,label:"react.invoice.itemNo.label",defaultMessage:"Item No",flexWidth:"1"},description:{type:O.A,label:"react.invoice.description.label",defaultMessage:"Description",flexWidth:"5",attributes:{className:"text-left"},getDynamicAttr:function(e){return{formatValue:function(){var t=e.invoiceItems,n=e.rowIndex,r=null==t?void 0:t[n];return(0,x.Eh)(r)}}}},quantity:{type:function(e){var t=null==e?void 0:e.invoiceItems[null==e?void 0:e.rowIndex],n=e.validate(t);return!e.isEditable(null==t?void 0:t.id)||null!=t&&t.orderAdjustment?r.createElement(O.A,e):r.createElement(ge.Tooltip,{html:r.createElement("div",{className:"custom-tooltip"},n),theme:"transparent",disabled:!n},r.createElement(we.A,Oe({type:"number",value:t.quantity,showErrorBorder:!!n,onChange:e.updateInvoiceItemData(null==t?void 0:t.id,"quantity")},e)))},label:"react.invoice.qty.label",defaultMessage:"Qty",flexWidth:"1",getDynamicAttr:function(e){return{formatValue:function(){var t,n=e.invoiceItems;return n&&(null===(t=n[e.rowIndex])||void 0===t?void 0:t.isPrepaymentItem)?-1*e.fieldValue:e.fieldValue}}}},uom:{type:O.A,label:"react.invoice.uom.label",defaultMessage:"UOM",flexWidth:"1"},unitPrice:{type:function(e){var t=null==e?void 0:e.invoiceItems[null==e?void 0:e.rowIndex],n=e.validate(t);return e.isEditable(null==t?void 0:t.id)&&null!=t&&t.orderAdjustment?r.createElement(ge.Tooltip,{html:r.createElement("div",{className:"custom-tooltip"},n),theme:"transparent",disabled:!n},r.createElement(we.A,Oe({type:"number",value:t.unitPrice,showErrorBorder:!!n,onChange:e.updateInvoiceItemData(null==t?void 0:t.id,"unitPrice")},e))):r.createElement(O.A,e)},label:"react.invoice.unitPrice.label",defaultMessage:"Unit Price",flexWidth:"1",attributes:{formatValue:function(e){return e?A(e):e}}},amount:{type:O.A,label:"react.invoice.totalPrice.label",defaultMessage:"Total Price",flexWidth:"1",attributes:{formatValue:function(e){return e?A(e):e}}},actionDots:{type:function(e){var t,n=null==e||null===(t=e.invoiceItems)||void 0===t?void 0:t[e.rowIndex];return e.isActionMenuVisible(e.invoiceStatus,null==n?void 0:n.inverse,e.isPrepaymentInvoice)?r.createElement(Ie.A,{positions:["left"],actions:e.actions(n),id:null==e?void 0:e.rowIndex}):null},flexWidth:"1"}}}},Ee=function(e){var t=e.invoiceItems,n=e.updateInvoiceItemData,o=e.invoiceId,i=e.totalCount,a=e.loadMoreRows,u=e.isPrepaymentInvoice,c=e.invoicePrepaidItemsTableData,l=e.invoiceStatus,s=c.actions,f=c.isRowLoaded,d=c.isEditable,p=c.editableRows,m=c.validate,b=c.isActionMenuVisible;return r.createElement("div",{className:"my-2 table-form prepayment-invoice-table"},v().map(Se,(function(e,r){return(0,G.bl)(e,r,{invoiceId:o,invoiceItems:t,totalCount:i,loadMoreRows:a,isRowLoaded:f,isPrepaymentInvoice:u,editableRows:p,updateInvoiceItemData:n,validate:m,isEditable:d,actions:s,invoiceStatus:l,isActionMenuVisible:b})})))};Ee.propTypes={invoiceId:i().string.isRequired,isPrepaymentInvoice:i().bool.isRequired,invoiceItems:i().shape({}).isRequired,totalCount:i().number.isRequired,loadMoreRows:i().func.isRequired,updateInvoiceItemData:i().func.isRequired,invoicePrepaidItemsTableData:i().shape({actions:i().arrayOf(i().shape({})).isRequired,isRowLoaded:i().func.isRequired,isEditable:i().func.isRequired,editableRows:i().arrayOf(i().shape({})).isRequired,validate:i().func.isRequired,isActionMenuVisible:i().func.isRequired}).isRequired,invoiceStatus:i().string.isRequired};const Pe=Ee;var je=n(50563);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Ae(){Ae=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),u=new C(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",v="executing",m="completed",b={};function y(){}function h(){}function g(){}var w={};l(w,a,(function(){return this}));var I=Object.getPrototypeOf,O=I&&I(I(M([])));O&&O!==n&&r.call(O,a)&&(w=O);var S=g.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==xe(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=d;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=x(u,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(xe(t)+" is not iterable")}return h.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:h,configurable:!0}),h.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(P.prototype),l(P.prototype,u,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,c,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function Ne(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ce(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||De(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return(t=function(e){var t=function(e){if("object"!=xe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||De(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){if(e){if("string"==typeof e)return Le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var qe=n(41357);const Ve=function(e,t){return h.Ay.post((0,y.FR)(e),t)},_e=function(e){return h.Ay.delete((0,y.S3)(e))},We="PENDING",Fe="SUBMITTED";var Be=n(15516);function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function ze(e){return function(e){if(Array.isArray(e))return Ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){$e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e,t,n){return(t=function(e){var t=function(e){if("object"!=Ue(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ue(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(){Ke=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),u=new C(r||[]);return o(a,"_invoke",{value:j(e,n,u)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",v="executing",m="completed",b={};function y(){}function h(){}function g(){}var w={};l(w,a,(function(){return this}));var I=Object.getPrototypeOf,O=I&&I(I(M([])));O&&O!==n&&r.call(O,a)&&(w=O);var S=g.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Ue(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function j(t,n,r){var o=d;return function(i,a){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=x(u,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?m:p,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Ue(t)+" is not iterable")}return h.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:h,configurable:!0}),h.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(P.prototype),l(P.prototype,u,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new P(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),l(S,c,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},t}function Qe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function He(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Qe(i,r,o,a,u,"next",e)}function u(e){Qe(i,r,o,a,u,"throw",e)}a(void 0)}))}}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||Je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n){return(t=function(e){var t=function(e){if("object"!=et(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==et(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ot="PREPAYMENT_INVOICE",it=function(e){var t=e.initialValues,n=e.previousPage,o=function(e){var t=e.initialValues,n=(0,je.A)(),o=(0,u.d4)((function(e){return{pageSize:e.session.pageSize,isSuperuser:e.session.isSuperuser}})),i=o.pageSize,a=o.isSuperuser,c=Te((0,r.useState)(Re(Re({},t),{},{invoiceItems:new Map})),2),s=c[0],f=c[1],d=(0,r.useCallback)((function(){n.show(),l.A.getInvoice(s.id).then((function(e){f((function(t){return Re(Re({},t),{},{documents:e.data.data.documents,totalValue:e.data.data.totalValue})}))})).finally((function(){return n.hide()}))}),[s.id]);(0,r.useEffect)((function(){s.id&&d()}),[s.id]);var p=(0,r.useMemo)((function(){return A(s.totalValue.toFixed(2))}),[s.totalValue]),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Map(e.map((function(e,n){return[n+t,e]})))},m=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n.show();var o=e.data,i=o.data,a=o.totalCount;f((function(e){return Re(Re({},e),{},{invoiceItems:t?v(i):(n=e.invoiceItems,o=i,u=r,c=v(o,u),new Map([].concat(Ce(Array.from(n)),Ce(c)))),totalCount:a});var n,o,u,c})),n.hide()},b=(0,r.useCallback)((function(e){var t=e.startIndex,n=e.stopIndex,r=e.overrideInvoiceItems,o=void 0!==r&&r;return l.A.getInvoiceItems(s.id,{params:{offset:t,max:n?n-t+1:i}}).then((function(e){m(e,o,t)}))}),[s.id,i]),y=function(){var e,t=(e=Ae().mark((function e(t){var r,o,i;return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.callback,o=t.overrideInvoiceItems,i=void 0!==o&&o,e.prev=1,n.show(),e.next=5,d();case 5:return e.next=7,b({startIndex:0,stopIndex:s.totalCount,overrideInvoiceItems:i});case 7:return e.prev=7,null==r||r(),n.hide(),e.finish(7);case 11:case"end":return e.stop()}}),e,null,[[1,,7,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Ne(i,r,o,a,u,"next",e)}function u(e){Ne(i,r,o,a,u,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return{isSuperuser:a,stateValues:Re(Re({},s),{},{invoiceItems:Array.from(s.invoiceItems.values())}),invoiceItemsMap:s.invoiceItems,fetchInvoiceData:d,totalValue:p,submitInvoice:function(){l.A.submitInvoice(s.id).then((function(){window.location=P.m5.show(s.id)}))},postInvoice:function(){l.A.postInvoice(s.id).then((function(){window.location=P.m5.show(s.id)}))},setInvoiceItems:m,updateInvoiceItemData:function(e){return function(t,n){return function(r){null==e||e(t,ke({},n,r)),f((function(e){return Re(Re({},e),{},{invoiceItems:new Map(Array.from(e.invoiceItems).map((function(e){var o=Te(e,2),i=o[0],a=o[1];return a.id===t?[i,Re(Re({},a),{},ke({},n,r))]:[i,a]})))})}))}}},refetchData:y,loadMoreRows:b}}({initialValues:t}),i=o.isSuperuser,a=o.stateValues,c=o.totalValue,f=o.submitInvoice,d=o.postInvoice,p=o.updateInvoiceItemData,m=o.refetchData,y=o.loadMoreRows,h=o.invoiceItemsMap,g=(0,je.A)(),w=function(e){var t=e.invoiceItems,n=e.updateInvoiceItemData,o=e.invoiceId,i=e.refetchData,a=e.invoiceItemsMap,u=(0,je.A)(),c=(0,Be.A)(),l=Xe((0,r.useState)({}),2),s=l[0],f=l[1],d=Xe((0,r.useState)([]),2),p=d[0],m=d[1];(0,r.useEffect)((function(){Object.entries(s).forEach((function(e){var t=Xe(e,2),r=t[0],o=t[1];n()(r,"quantity")(null==o?void 0:o.quantity),n()(r,"unitPrice")(null==o?void 0:o.unitPrice)}))}),[t.length]);var b=function(e){return e in s},y=function(){var e=He(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.show(),e.prev=1,e.next=4,_e(t);case 4:f((function(e){return v().omit(e,t)})),m((function(e){return e.filter((function(e){return e!==t}))})),i({overrideInvoiceItems:!0});case 7:return e.prev=7,u.hide(),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=He(Ke().mark((function e(n){var r;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.filter((function(e){return b(e.id)})).map((function(e){return null!=e&&e.orderAdjustment?{id:e.id,unitPrice:e.unitPrice}:{id:e.id,quantity:e.quantity}}))).length){e.next=5;break}return e.next=5,Ve(o,r);case 5:null==n||n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u.hide();case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),g=(0,r.useCallback)((function(e){var t=e.index;return!!a.get(t)}),[t]),w=function(){f({}),m([])},I=function(){var e=He(Ke().mark((function e(){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:i({overrideInvoiceItems:!0,callback:w});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{actions:function(e){var t={defaultLabel:"Remove",label:"react.default.button.remove.label",leftIcon:r.createElement(qe.WFf,null),variant:"danger",onClick:function(){return y(e.id)}},n={defaultLabel:"Edit",label:"react.default.button.edit.label",leftIcon:r.createElement(qe.Jno,null),onClick:function(){return t={rowId:e.id,quantity:e.quantity,unitPrice:e.unitPrice},n=t.rowId,r=t.quantity,o=t.unitPrice,void f((function(e){return Ye(Ye({},e),{},$e({},n,{quantity:r,unitPrice:o}))}));var t,n,r,o}};return null!=e&&e.isCanceled||null!=e&&e.orderAdjustment&&0===(null==e?void 0:e.unitPrice)?[t]:[n,t]},isEditable:b,validate:function(e){return b(null==e?void 0:e.id)?null!=e&&e.orderAdjustment?function(e){var t=e.amount>0&&e.unitPrice<0||(null==e?void 0:e.amount)<0&&e.unitPrice>0,n=e.unitPriceAvailableToInvoice,r=e.amount,o=Math.abs(n)+Math.abs(r);return!e.unitPrice||o<Math.abs(e.unitPrice)||t?(m((function(t){return[].concat(ze(t),[null==e?void 0:e.id])})),c("react.invoice.errors.unitPrice.label","Wrong amount to invoice value")):(m((function(t){return t.filter((function(t){return e.id!==t}))})),null)}(e):function(e){return v().toInteger(null==e?void 0:e.quantityAvailableToInvoice)<(null==e?void 0:e.quantity)||v().toInteger(null==e?void 0:e.quantity)<=0?(m((function(t){return[].concat(ze(t),[null==e?void 0:e.id])})),c("react.invoice.errors.quantityToInvoice.label","Wrong quantity to invoice value")):(m((function(t){return t.filter((function(t){return e.id!==t}))})),null)}(e):null},updateRow:function(e,t){return f((function(n){return Ye(Ye({},n),{},$e({},e,Ye(Ye({},n[e]),t)))}))},updateInvoiceItem:h,isActionMenuVisible:function(e,t,n){return!(n||t||e!==We&&e!==Fe)},save:I,editableRows:s,isRowLoaded:g,isValid:!p.length}}({invoiceItems:a.invoiceItems,invoiceId:a.id,invoiceItemsMap:h,updateInvoiceItemData:p,refetchData:m}),I=w.isValid,O=w.updateRow,S=w.updateInvoiceItem,E=w.save;return r.createElement("div",null,r.createElement(b.lV,{onSubmit:function(){},initialValues:nt(nt({},a),{},{totalValue:c}),mutators:nt({},s.A),render:function(e){var t=e.handleSubmit,o=e.values;return r.createElement("form",{onSubmit:t},r.createElement(he,{values:o,updateInvoiceItem:S,refetchData:m,save:E,canUpdateInvoiceItems:o.invoiceType!==ot&&a.hasPrepaymentInvoice,disableSaveButton:!I&&o.invoiceType!==ot}),r.createElement("div",{className:"submit-buttons"},r.createElement("button",{type:"button",className:"btn btn-outline-primary btn-form btn-xs",onClick:function(){return n(o)},disabled:o.datePosted||o.invoiceType===ot||o.hasPrepaymentInvoice},r.createElement(C.A,{id:"react.default.button.previous.label",defaultMessage:"Previous"})),r.createElement("button",{type:"button",onClick:function(){g.show(),o.invoiceType!==ot&&a.hasPrepaymentInvoice?S(f):f()},className:"btn btn-outline-success float-right btn-form btn-xs",disabled:o.dateSubmitted||o.datePosted||!a.invoiceItems.length||!I&&o.invoiceType!==ot},r.createElement(C.A,{id:"react.invoice.submit.label",defaultMessage:"Submit for Approval"})),i&&r.createElement("button",{type:"button",onClick:function(){g.show(),o.invoiceType!==ot&&a.hasPrepaymentInvoice?S(d):d()},className:"btn btn-outline-success float-right btn-form btn-xs",disabled:o.datePosted||!a.invoiceItems.length||!I&&o.invoiceType!==ot},r.createElement(C.A,{id:"react.invoice.post.label",defaultMessage:"Post Invoice"}))),a.hasPrepaymentInvoice||a.isPrepaymentInvoice?r.createElement(Pe,{invoiceId:o.id,totalCount:a.totalCount,invoiceItems:a.invoiceItems,loadMoreRows:y,isPrepaymentInvoice:a.isPrepaymentInvoice,updateInvoiceItemData:p(O),invoicePrepaidItemsTableData:w,invoiceStatus:a.status}):r.createElement(fe,{invoiceId:o.id,totalCount:a.totalCount,invoiceItems:a.invoiceItems,loadMoreRows:y}))}}))};const at=it;it.propTypes={initialValues:i().shape({}).isRequired,previousPage:i().func.isRequired};var ut=n(95093),ct=n.n(ut),lt=n(84976),st=n(10734),ft=n(24178);function dt(e){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e,t,n){return(t=yt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yt(r.key),r)}}function yt(e){var t=function(e){if("object"!=dt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dt(t)?t:t+""}function ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ht=function(){return!!e})()}function gt(e){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gt(e)}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}function It(e){var t={};return e.vendor||(t.vendor="react.default.error.requiredField.label"),e.vendorInvoiceNumber||(t.vendorInvoiceNumber="react.default.error.requiredField.label"),e.dateInvoiced?ct()(e.dateInvoiced,"MM/DD/YYYY",!0).isValid()||(t.dateInvoiced="react.default.error.invalid.date"):t.dateInvoiced="react.default.error.requiredField.label",e.currencyUom||(t.currencyUom="react.default.error.requiredField.label"),t}var Ot={invoiceNumber:{type:S.A,label:"react.invoice.invoiceNumber.label",defaultMessage:"Invoice number",attributes:{disabled:!0}},vendor:{type:st.A,label:"react.Invoice.vendor.label",defaultMessage:"Vendor",attributes:{required:!0,async:!0,showValueTooltip:!0,openOnClick:!1,autoload:!1,cache:!1,options:[],filterOptions:function(e){return e}},getDynamicAttr:function(e){return{loadOptions:e.debouncedOrganizationsFetch}}},vendorInvoiceNumber:{type:S.A,label:"react.invoice.vendorInvoiceNumber.label",defaultMessage:"Vendor Invoice Number",attributes:{required:!0}},dateInvoiced:{type:pe.A,label:"react.invoice.invoiceDate.label",defaultMessage:"Invoice Date",attributes:{required:!0,dateFormat:"MM/DD/YYYY",autoComplete:"off"}},currencyUom:{label:"react.invoice.currency.label",defaultMessage:"Currency",type:st.A,attributes:{required:!0,showValueTooltip:!0,valueKey:"id",labelKey:"name"},getDynamicAttr:function(e){return{options:e.currencies}}}},St=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=gt(t),function(e,t){if(t&&("object"==dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ht()?Reflect.construct(t,n||[],gt(e).constructor):t.apply(e,n))}(this,t,[e])).state={values:n.props.initialValues},n.debounceOrganizationsFetch=(0,ft.A0)(n.props.debounceTime,n.props.minSearchLength),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.props.fetchCurrencies()}},{key:"checkInvoiceChange",value:function(e){if(!this.state.id)return!1;var t=this.props.initialValues,n=t.vendor,r=t.vendorInvoiceNumber,o=t.dateInvoiced,i=t.currencyUom,a=e.vendor&&n&&e.vendor.id!==n.id,u=r!==e.vendorInvoiceNumber,c=o!==e.dateInvoiced,l=e.currencyUom&&i&&e.vendor.id!==n.id;return a||u||c||l}},{key:"saveInvoice",value:function(e){var t=this;if(e.vendor&&e.vendorInvoiceNumber&&e.dateInvoiced&&e.currencyUom){this.props.showSpinner();var n={vendor:e.vendor.id,vendorInvoiceNumber:e.vendorInvoiceNumber,dateInvoiced:e.dateInvoiced,currencyUom:{id:e.currencyUom.id}};l.A.saveInvoice(e.id||"",n).then((function(n){if(n.data){var r=n.data.data;t.props.history.push(P.m5.edit(r.id)),t.props.nextPage(vt(vt({},e),{},{id:r.id,vendorName:r.vendorName,invoiceNumber:r.invoiceNumber,totalCount:r.totalCount,currencyUom:r.currencyUom})),t.props.hideSpinner()}})).catch((function(){return t.props.hideSpinner(),Promise.reject(new Error(t.props.translate("react.invoice.error.createInvoice.label","Could not create invoice")))}))}}},{key:"resetToInitialValues",value:function(){var e=this;this.setState({values:{}},(function(){return e.setState({values:e.props.initialValues})}))}},{key:"nextPage",value:function(e){var t=this;this.checkInvoiceChange(e)?(0,m.ZX)({title:this.props.translate("react.invoice.confirmChange.label","Confirm change"),message:this.props.translate("react.invoice.confirmChange.label","Do you want to change invoice data?"),buttons:[{label:this.props.translate("react.default.no.label","No"),onClick:function(){return t.resetToInitialValues()}},{label:this.props.translate("react.default.yes.label","Yes"),onClick:function(){return t.saveInvoice(e)}}]}):this.saveInvoice(e)}},{key:"render",value:function(){var e=this;return r.createElement(b.lV,{onSubmit:function(t){return e.nextPage(t)},validate:It,initialValues:this.state.values,render:function(t){t.form;var n=t.handleSubmit;return r.createElement("form",{onSubmit:n},r.createElement("div",{className:"classic-form with-description"},v().map(Ot,(function(t,n){return(0,G.bl)(t,n,{currencies:e.props.currencies,debouncedOrganizationsFetch:e.debounceOrganizationsFetch})}))),r.createElement("div",{className:"submit-buttons"},r.createElement("button",{type:"submit",className:"btn btn-outline-primary float-right btn-xs"},r.createElement(C.A,{id:"react.default.button.next.label",defaultMessage:"Next"}))))}})}}])&&bt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);const Et=(0,lt.withRouter)((0,u.Ng)((function(e){return{translate:(0,C.H)((0,a.ro)(e.localize)),currencies:e.unitOfMeasure.currency,debounceTime:e.session.searchConfig.debounceTime,minSearchLength:e.session.searchConfig.minSearchLength}}),{showSpinner:c.xc,hideSpinner:c.W$,fetchCurrencies:c.CW})(St));St.propTypes={initialValues:i().shape({vendor:i().shape({}),vendorInvoiceNumber:i().string,dateInvoiced:i().string,currencyUom:i().shape({})}).isRequired,fetchCurrencies:i().func.isRequired,showSpinner:i().func.isRequired,hideSpinner:i().func.isRequired,nextPage:i().func.isRequired,history:i().shape({push:i().func}).isRequired,translate:i().func.isRequired,currencies:i().arrayOf(i().shape({})).isRequired,debounceTime:i().number.isRequired,minSearchLength:i().number.isRequired};var Pt=n(80461);function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tt(r.key),r)}}function Ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ct=function(){return!!e})()}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}function Rt(e,t){return Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rt(e,t)}function kt(e,t,n){return(t=Tt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e){var t=function(e){if("object"!=jt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jt(t)?t:t+""}var Dt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),kt(n=function(e,t,n){return t=Mt(t),function(e,t){if(t&&("object"==jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ct()?Reflect.construct(t,n||[],Mt(e).constructor):t.apply(e,n))}(this,t,[e]),"pageList",[Et,ce,at]),kt(n,"dataFetched",!1),n.state={values:n.props.initialValues,currentPage:1},n.updateWizardValues=n.updateWizardValues.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rt(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.props.fetchTranslations("","invoice"),this.props.invoiceTranslationsFetched&&(this.dataFetched=!0,this.fetchInitialValues())}},{key:"componentWillReceiveProps",value:function(e){this.props.locale&&this.props.locale!==e.locale&&this.props.fetchTranslations(e.locale,"invoice"),e.invoiceTranslationsFetched&&!this.dataFetched&&(this.dataFetched=!0,this.fetchInitialValues())}},{key:"wizardTitle",get:function(){var e=this.state.values;return e.invoiceNumber?[{text:this.props.translate("react.invoice.label","Invoice"),color:"#000000",delimeter:" | "},{text:e.invoiceNumber,color:"#000000",delimeter:""}]:[]}},{key:"stepList",get:function(){return[this.props.translate("react.invoice.create.label","Create"),this.props.translate("react.invoice.addItems.label","Add items"),this.props.translate("react.invoice.confirm.label","Confirm")]}},{key:"updateWizardValues",value:function(e,t){this.setState({currentPage:e,values:t})}},{key:"fetchInitialValues",value:function(){var e=this;this.props.match.params.invoiceId&&(this.props.showSpinner(),l.A.getInvoice(this.props.match.params.invoiceId).then((function(t){var n=At(At({},t.data.data),{},{vendor:{id:t.data.data.vendor,label:t.data.data.vendorName}}),r=2;n.totalCount>0&&(r=3),e.setState({values:n,currentPage:r},(function(){return e.props.hideSpinner()}))})).catch((function(){return e.props.hideSpinner()})))}},{key:"render",value:function(){var e=this.state,t=e.values,n=e.currentPage;return r.createElement(Pt.A,{pageList:this.pageList,stepList:this.stepList,initialValues:t,title:this.wizardTitle,currentPage:n,prevPage:1===n?1:n-1,updateWizardValues:this.updateWizardValues})}}])&&Nt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);const Lt=(0,u.Ng)((function(e){return{locale:e.session.activeLanguage,invoiceTranslationsFetched:e.session.fetchedTranslations.invoice,translate:(0,C.H)((0,a.ro)(e.localize))}}),{showSpinner:c.xc,hideSpinner:c.W$,fetchTranslations:c.dj})(Dt);Dt.propTypes={match:i().shape({params:i().shape({invoiceId:i().string})}).isRequired,showSpinner:i().func.isRequired,hideSpinner:i().func.isRequired,initialValues:i().shape({}),locale:i().string.isRequired,invoiceTranslationsFetched:i().bool.isRequired,fetchTranslations:i().func.isRequired,translate:i().func.isRequired},Dt.defaultProps={initialValues:{}}},84079:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(96540),o=n(5556),i=n.n(o),a=n(26216),u=["value","indeterminate","custom","fieldRef","withLabel","label","defaultMessage"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(null,arguments)}var l=function(e){var t=e.value,n=e.indeterminate,o=e.custom,i=e.fieldRef,l=e.withLabel,s=e.label,f=e.defaultMessage,d=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,u),p=function(e){var t=e.target.checked;d.onChange&&d.onChange(t)};return o?r.createElement("div",{"data-testid":"custom-checkbox",className:"custom-checkbox"},r.createElement("label",{htmlFor:d.id},r.createElement("input",c({id:d.id,type:"checkbox",ref:i,checked:t},d,{onChange:p})))):l?r.createElement("div",{"data-testid":"with-label-checkbox",className:"d-flex align-items-center"},r.createElement("input",c({type:"checkbox",ref:function(e){e&&(e.indeterminate=n),i&&i(e)},checked:t},d,{onChange:p})),r.createElement("label",{htmlFor:d.id,style:{margin:"0 0 0 5px"}},r.createElement(a.A,{id:s,defaultMessage:f||s}))):r.createElement("input",c({"data-testid":"checkbox",type:"checkbox",ref:function(e){e&&(e.indeterminate=n),i&&i(e)},checked:t},d,{onChange:p}))};const s=l;l.propTypes={onChange:i().func,value:i().bool,indeterminate:i().bool,custom:i().bool,id:i().string,fieldRef:i().func,withLabel:i().bool,label:i().string,defaultMessage:i().string},l.defaultProps={onChange:null,value:null,indeterminate:!1,custom:!1,id:"",fieldRef:void 0,withLabel:!1,label:"",defaultMessage:""}},87054:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(96540),o=n(2543),i=n.n(o),a=n(5556),u=n.n(a),c=n(50166),l=n(57358),s=n(26438),f=n(51546);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}var p=["title","tooltip","required","button","disabled","errorMessage","placeholder","id","name","type","decimal","className","showErrorBorder","hideErrorMessageWrapper","onKeyDown","focusProps","onWheel"];function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(null,arguments)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){var t=e.title,n=e.tooltip,o=e.required,a=e.button,u=e.disabled,d=e.errorMessage,m=e.placeholder,y=e.id,h=e.name,g=e.type,w=e.decimal,I=e.className,O=e.showErrorBorder,S=e.hideErrorMessageWrapper,E=e.onKeyDown,P=e.focusProps,j=void 0===P?{}:P,x=e.onWheel,A=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,p),N=(0,r.useRef)(null);(0,l.A)(b(b({},j),{},{ref:N,type:c.A.TEXT_INPUT}));var C="number"===g&&i().isNumber(w)?Math.pow(.1,w):void 0;return r.createElement(f.A,{title:t,tooltip:n,required:o,button:a,inputId:y||h,errorMessage:d,hideErrorMessageWrapper:S},r.createElement("input",v({ref:N,id:y||h,name:h,disabled:u,className:"form-element-input ".concat(I," ").concat(d||O?"has-errors":""," ").concat(S&&O&&"pl-4"),placeholder:m,type:g,step:C},A,{onChange:function(e){var t;if("number"===g){var n,r=Number.isNaN(e.target.valueAsNumber)?void 0:e.target.valueAsNumber;null===(n=A.onChange)||void 0===n||n.call(A,r)}else null===(t=A.onChange)||void 0===t||t.call(A,e)},onBlur:function(e){var t;if("number"===g){var n,r=(0,s.fQ)(e.target.value,w);e.target.value=r,null===(n=A.onChange)||void 0===n||n.call(A,r)}null===(t=A.onBlur)||void 0===t||t.call(A,e)},onKeyDown:E,onWheel:x})))};const g=h;h.propTypes={tooltip:u().shape({id:u().string.isRequired,defaultMessage:u().string.isRequired}),required:u().bool,title:u().shape({id:u().string.isRequired,defaultMessage:u().string.isRequired}),button:u().shape({id:u().string.isRequired,defaultMessage:u().string.isRequired,onClick:u().func.isRequired}),disabled:u().bool,errorMessage:u().string,placeholder:u().string,id:u().string,name:u().string,type:u().string,decimal:u().number,className:u().string,showErrorBorder:u().bool,hideErrorMessageWrapper:u().bool,onKeyDown:u().func,focusProps:u().shape({fieldIndex:u().string,fieldId:u().string,rowIndex:u().string,columnId:u().string}),onWheel:u().func},h.defaultProps={tooltip:null,required:!1,title:null,button:null,errorMessage:null,disabled:!1,placeholder:"",id:void 0,name:void 0,type:"text",decimal:void 0,className:"",showErrorBorder:!1,hideErrorMessageWrapper:!1,onKeyDown:null,focusProps:{},onWheel:null}},90524:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(96540),o=n(5556),i=n.n(o),a=function(e){var t=e.buttonIcon,n=e.buttonTitle,o=e.link,i=e.target,a=e.disabled,u=e.onClick;return r.createElement("a",{href:o,className:"py-1 mb-1 btn btn-outline-secondary ".concat(a?"disabled":""),target:i,rel:"noopener noreferrer",onClick:function(e){return function(e,t,n){t.preventDefault();var r=window.open("","_blank");e?e().then((function(){r.location.href=n})):r.location.href=n}(u,e,o)}},r.createElement("span",null,r.createElement("i",{className:"pr-2 fa ".concat(t)}),n))};const u=a;a.propTypes={buttonIcon:i().string,buttonTitle:i().string,link:i().string.isRequired,target:i().string,disabled:i().bool.isRequired,onClick:i().func.isRequired},a.defaultProps={buttonIcon:"fa-download",buttonTitle:"Print Document",target:"_blank"}},93638:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var r=n(96540),o=n(5556),i=n.n(o),a=n(51836),u=n(26216);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(null,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){var t=e.fieldName,n=e.fieldConfig,o=n.buttonLabel,i=n.buttonDefaultMessage,c=n.getDynamicAttr,s=n.attributes,d=void 0===s?{className:"btn-outline-primary"}:s,p=c?c(e):{},v=f(f({},d),p);return r.createElement("button",l({type:"button",key:t},v,{className:"text-truncate btn btn-xs ".concat(v.className)}),"string"==typeof o?r.createElement(a.Tooltip,{html:o&&r.createElement(u.A,{id:o,defaultMessage:i}),theme:"transparent",arrow:"true",delay:"150",duration:"250",hideDelay:"50"}," ",r.createElement(u.A,{id:o,defaultMessage:i})):r.createElement(o,null))};const v=p;p.propTypes={fieldName:i().string.isRequired,fieldConfig:i().shape({getDynamicAttr:i().func}).isRequired}},94731:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var r=n(96540),o=n(5556),i=n.n(o),a=n(41357),u=n(84976),c=n(10358);const l="LINK",s="REACT_LINK",f="BUTTON";function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const p=function(){var e,t,n=(0,r.useRef)(),o=(e=(0,r.useState)(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{getActionItemType:function(e){return e.href?e.reactLink?s:l:f},buildLink:function(e,t){return"string"==typeof e.href?"".concat(e.href,"/").concat(t):"function"==typeof e.href?e.href(t):null},getPositionClass:function(e){switch(e){case"top":return"dropup";case"left":return"dropleft";case"right":return"dropright";default:return""}},popoverRef:n,isPopoverOpen:o[0],setIsPopoverOpen:o[1]}};var v=n(26216),m=function(e){var t=e.positions,n=e.actions,o=e.dropdownClasses,i=e.popoverClasses,d=e.id,m=p(),b=m.getActionItemType,y=m.buildLink,h=m.popoverRef,g=m.isPopoverOpen,w=m.setIsPopoverOpen;return r.createElement(c.Popover,{"data-testid":"action-dots-component",isOpen:g,positions:t,padding:10,onClickOutside:function(){return w(!1)},ref:h,content:function(){return n&&r.createElement("div",{className:"".concat(i," context-menu padding-8"),"data-testid":"dropdown-menu"},n.map((function(e){var t="".concat(o," d-flex align-items-center gap-8 dropdown-item ").concat("danger"===e.variant?"font-red-ob":""),n=r.createElement(r.Fragment,null,e.leftIcon&&e.leftIcon,e.label&&r.createElement(v.A,{id:e.label,defaultMessage:e.defaultLabel})),i=b(e),a=i===l||s?y(e,d):"";return r.createElement(r.Fragment,{key:e.label},i===f&&r.createElement("button",{type:"button",onClick:function(){e.onClick(d),w(!1)},className:t},n),i===l&&r.createElement("a",{href:a,className:t},n),i===s&&r.createElement(u.N_,{to:a,className:t},n))})))}},r.createElement("button",{"data-testid":"dropdown-toggle",className:"action-dots dropdown-toggle d-flex align-items-center justify-content-center",type:"button",onClick:function(){return w((function(e){return!e}))}},r.createElement(a.vuI,null)))};const b=m;m.propTypes={actions:i().arrayOf(i().shape({leftIcon:i().element.isRequired,label:i().string.isRequired,defaultLabel:i().string.isRequired,href:i().string,reactLink:i().bool,variant:i().string,onClick:i().func})).isRequired,positions:i().arrayOf(i().string),id:i().string.isRequired,dropdownClasses:i().string,popoverClasses:i().string},m.defaultProps={positions:["top","right","left","bottom"],dropdownClasses:"",popoverClasses:""}}}]);
//# sourceMappingURL=bundle.929af1b45eb780bfc503.2408.js.map