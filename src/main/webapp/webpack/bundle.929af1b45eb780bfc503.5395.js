/*! For license information please see bundle.929af1b45eb780bfc503.5395.js.LICENSE.txt */
"use strict";(self.webpackChunkopenboxes=self.webpackChunkopenboxes||[]).push([[5395],{13077:(e,t,n)=>{n.d(t,{A:()=>g});var r=n(96540),o=n(5556),a=n.n(o),i=n(697),s=n(51836),l=n(24178),c=n(88024),u=n(66792),d=["onExactProductSelected","locationId","fieldRef","includeUom"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(null,arguments)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.productCode,n=e.displayName,r=e.displayNames,o=e.name;return"".concat(t," - ").concat(n||(null==r?void 0:r.default)||o)},v=function(e){var t;return r.createElement(s.Tooltip,{html:r.createElement("div",{className:"text-truncate"},e.name),theme:"transparent",disabled:!(e.displayName||null!==(t=e.displayNames)&&void 0!==t&&t.default),position:"top-start"},r.createElement("strong",{style:{color:e.color||"black"},className:"d-flex align-items-center"},e.label||b(e)," ",(0,c.A)(e.handlingIcons)))},h=function(e){return r.createElement("span",{className:"d-flex align-items-center"},r.createElement("span",{style:{color:e.showSelectedOptionColor&&e.color},className:"text-truncate"},e.label||b(e)),(0,c.A)(null==e?void 0:e.handlingIcons))},y=function(e){var t=e.onExactProductSelected,n=e.locationId,o=e.fieldRef,a=e.includeUom,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,d),c=(0,r.useRef)(null),m=f((0,r.useState)(!1),2),b=m[0],y=m[1],g=f((0,r.useState)([]),2),S=g[0],O=g[1],k=f((0,r.useState)(""),2),w=k[0],I=k[1],E=(0,i.d4)((function(e){return{debounceTime:e.session.searchConfig.debounceTime,minSearchLength:e.session.searchConfig.minSearchLength}})),M=E.debounceTime,P=E.minSearchLength,x=(0,l.yH)(M,P,n,{includeUom:a});return(0,r.useEffect)((function(){if(b&&S.length&&w){var e=S.filter((function(e){return e.exactMatch})),n=null;if(1===e.length){var r=f(e,1);n=r[0]}else if(e.length>1){var o=e.find((function(e){return e.productCode===w}));o&&(n=o)}n&&c.current.select.select.setValue(n),t&&setTimeout((function(){return t({product:n})}),0),y(!1),O([])}}),[b,S,w]),r.createElement(u.A,p({},s,{fieldRef:function(e){c.current=e,o&&o(e)},async:!0,options:[],loadOptions:s.loadOptions||function(e,t){return x(e,(function(n){O(n),I(e),t(n)}))},onMenuClose:function(){O([]),I("")},filterOption:function(e){return e},onEnterPress:function(e){e.preventDefault(),e.stopPropagation(),y(!0)},optionRenderer:v,valueRenderer:h}))};y.defaultProps={className:"text-left",openOnClick:!0,autoload:!0,cache:!1,showValueTooltip:!0,onExactProductSelected:void 0,fieldRef:void 0,loadOptions:void 0,includeUom:!1},y.propTypes={className:a().string,openOnClick:a().bool,autoload:a().bool,cache:a().bool,showValueTooltip:a().bool,locationId:a().string.isRequired,onExactProductSelected:a().func,fieldRef:a().func,loadOptions:a().func,includeUom:a().bool};const g=y},25824:(e,t,n)=>{n.d(t,{A:()=>I});var r=n(96540),o=n(924),a=n(2543),i=n.n(a),s=n(5556),l=n.n(s),c=n(90952),u=n(70373),d=n.n(u),p=n(26438),f=n(26216);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=O(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}(this,t,[e])).state={showModal:!1},n.openModal=n.openModal.bind(n),n.closeModal=n.closeModal.bind(n),n.save=n.save.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),n=t,(a=[{key:"openModal",value:function(){this.props.onOpen(),this.setState({showModal:!0})}},{key:"closeModal",value:function(){this.props.onClose(),this.setState({showModal:!1})}},{key:"save",value:function(e){this.props.onSave(e),this.setState({showModal:!1})}},{key:"render",value:function(){var e=this,t=this.props.title,n=this.props.defaultTitleMessage;return r.createElement("div",{className:this.props.wrapperClassName},this.props.renderButton?this.props.renderButton({openModal:this.openModal}):r.createElement("button",{type:"button",className:"btn-xs ".concat(this.props.btnOpenClassName),style:this.props.btnOpenStyle,disabled:this.props.btnOpenDisabled,onClick:function(){return e.openModal()}},this.props.btnOpenIcon&&r.createElement("i",{className:"fa ".concat(this.props.btnOpenIcon," mr-1"),"aria-hidden":"true"}),this.props.btnOpenText&&!this.props.btnOpenAsIcon&&r.createElement(f.A,{id:this.props.btnOpenText,defaultMessage:this.props.btnOpenDefaultText})),r.createElement(d(),{isOpen:this.props.showModal||this.state.showModal,onRequestClose:this.closeModal,className:"modal-content-custom",shouldCloseOnOverlayClick:!1},r.createElement("div",{className:this.props.bodyContainerClassName,style:this.props.bodyContainerStyle},"string"==typeof t?r.createElement("h5",{className:"text-center"}," ",r.createElement(f.A,{id:t,defaultMessage:n})):r.createElement(t,null),r.createElement("hr",null),r.createElement(c.lV,{onSubmit:function(t){return e.save(t)},initialValues:this.props.initialValues,validate:this.props.validate,mutators:v({},o.A),render:function(t){var n=t.handleSubmit,o=t.values;return r.createElement("form",{id:"modalForm",onSubmit:n},e.props.children,e.props.renderBodyWithValues(o),i().map(e.props.fields,(function(t,n){return(0,p.bl)(t,n,v(v({},e.props.formProps),{},{values:o}))})),r.createElement("hr",null),r.createElement("div",{className:e.props.btnContainerClassName,role:"group",style:e.props.btnContainerStyle},r.createElement("button",{type:"button",className:e.props.btnCancelClassName,style:e.props.btnCancelStyle,onClick:function(){return e.closeModal()}},r.createElement(f.A,{id:e.props.btnCancelText,defaultMessage:e.props.btnCancelDefaultText})),r.createElement("button",{type:"submit",className:e.props.btnSaveClassName,style:e.props.btnSaveStyle,disabled:e.props.btnSaveDisabled},r.createElement(f.A,{id:e.props.btnSaveText,defaultMessage:e.props.btnSaveDefaultText}))))}}))))}}])&&y(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a}(r.Component);const I=w;w.propTypes={btnOpenText:l().string,btnOpenDefaultText:l().string,btnOpenClassName:l().string,btnOpenStyle:l().shape({}),btnOpenDisabled:l().bool,btnOpenAsIcon:l().bool,btnOpenIcon:l().string,title:l().oneOfType([l().string,l().func]).isRequired,defaultTitleMessage:l().string.isRequired,children:l().element,bodyContainerClassName:l().string,bodyContainerStyle:l().shape({}),btnContainerClassName:l().string,btnContainerStyle:l().shape({}),renderButton:l().func,wrapperClassName:l().string,btnSaveText:l().string,btnSaveDefaultText:l().string,btnSaveClassName:l().string,btnSaveStyle:l().shape({}),btnSaveDisabled:l().bool,btnCancelText:l().string,btnCancelDefaultText:l().string,btnCancelClassName:l().string,btnCancelStyle:l().shape({}),onOpen:l().func,onSave:l().func,onClose:l().func,validate:l().func,renderBodyWithValues:l().func,initialValues:l().oneOfType([l().shape({}),l().arrayOf(l().shape({}))]),fields:l().shape({}),formProps:l().shape({}),showModal:l().bool},w.defaultProps={btnOpenText:"react.default.button.open.label",btnOpenDefaultText:"Open",btnOpenClassName:"btn btn-outline-primary",btnOpenStyle:{},btnOpenDisabled:!1,btnOpenAsIcon:!1,btnOpenIcon:"",children:null,bodyContainerClassName:"modal-body-container",bodyContainerStyle:{},btnContainerClassName:"btn-group float-right",btnContainerStyle:{},wrapperClassName:null,btnSaveText:"react.default.button.save.label",btnSaveDefaultText:"Save",btnSaveClassName:"btn btn-outline-success",btnSaveStyle:{},btnSaveDisabled:!1,btnCancelText:"react.default.button.cancel.label",btnCancelDefaultText:"Cancel",btnCancelClassName:"btn btn-outline-secondary",btnCancelStyle:{},renderButton:void 0,onOpen:function(){return null},onSave:function(){return null},onClose:function(){return null},validate:function(){return null},renderBodyWithValues:function(){return null},initialValues:[],fields:{},formProps:{},showModal:!1}},27595:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(96540),o=n(5556),a=n.n(o),i=function(e){var t=e.show,n=e.message,o=e.danger,a=e.close,i=e.className,s=(0,r.useMemo)((function(){return("string"!=typeof n&&Array.isArray(n)?n:[n]).map((function(e){return r.createElement("div",null,r.createElement("i",{className:"fa ".concat(o?"fa-times-circle":"fa-exclamation-circle"," pr-2")}),e)}))}),[n]);return t?r.createElement("div",{"data-testid":"alert-message",className:"".concat(i," alert ").concat(o?"alert-danger":"alert-warning"),style:{cursor:a?"pointer":"default",whiteSpace:"pre-line"},role:"presentation",onClick:function(){return a()}},s):null};const s=i;i.propTypes={className:a().string,close:a().func,danger:a().bool,message:a().string,show:a().bool},i.defaultProps={className:"",close:function(){return null},danger:!1,message:"",show:!1}},33095:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(96540),o=n(4395),a=n(13077),i=["className"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const l=function(e){return r.createElement(o.A,s({},e,{renderInput:function(e){var t=e.className,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,i);return r.createElement(a.A,s({},n,{name:n.id,className:"select-xs ".concat(t||""),classNamePrefix:"react-select"}))}}))}},44323:(e,t,n)=>{n.d(t,{Eh:()=>b,FN:()=>O,OL:()=>h,SH:()=>v,aA:()=>S,ut:()=>g,vk:()=>y,xc:()=>k});var r=n(96540),o=n(2543),a=n.n(o),i=n(51836),s=n(33152),l=n(70317),c=n(88024);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){var t,n;return null!=e&&e.orderAdjustment||null!=e&&e.isAdjustment||null==e||null===(t=e.displayNames)||void 0===t||!t.default?null==e?void 0:e.description:r.createElement(i.Tooltip,{html:null==e?void 0:e.productName,theme:"transparent",delay:"150",duration:"250",hideDelay:"50"},null===(n=e.displayNames)||void 0===n?void 0:n.default)},v=function(e){return null!=e&&e.name?"(source: ".concat(null==e?void 0:e.name,")"):null},h=function(e){var t;return r.createElement("div",{className:"d-flex"},r.createElement("span",{className:"text-truncate"},(null==e?void 0:e.displayName)||(null==e||null===(t=e.displayNames)||void 0===t?void 0:t.default)||(null==e?void 0:e.name)),(0,c.A)(null==e?void 0:e.handlingIcons))},y=function(e){return a().map(e.containers,(function(e){return f(f({},e),{},{shipmentItems:a().map(e.shipmentItems,(function(e){return a().get(e,"recipient.id")?a().omit(e,"product.displayNames"):a().omit(f(f({},e),{},{recipient:""}),"product.displayNames")}))})}))},g=function(e){var t,n,r,o=e.product,a=e.filterValue,i=o.productCode,s=o.name,l=o.displayNames,c=null==a?void 0:a.toLowerCase();return(null==i||null===(t=i.toLowerCase())||void 0===t?void 0:t.includes(c))||(null==s||null===(n=s.toLowerCase())||void 0===n?void 0:n.includes(c))||(null==l||null===(r=l.default)||void 0===r||null===(r=r.toLowerCase())||void 0===r?void 0:r.includes(c))},S=function(e){var t=e.translate,n=e.errors,r="".concat(t("react.stockMovement.errors.errorInLine.label","Error occurred in line"),":"),o=n.reduce((function(e,n,r){return[].concat(function(e){if(Array.isArray(e))return d(e)}(o=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),["".concat(n&&"".concat(r+1," - ").concat(a().map(n,(function(e){return t("".concat(e))}))))]);var o}),[]);(0,s.A)(l.A.ERROR_OUTLINED)({message:r,detailsArray:o})},O=function(e){return a().omitBy(e,(function(e){return!("boolean"==typeof e||"number"==typeof e||e instanceof Date)&&a().isEmpty(e)}))},k=function(e,t,n){var r;return null===(r=(null==e?void 0:e.length)>n?"".concat(a().take(e,n).join(""),"..."):e)||void 0===r?void 0:r.split(t)}},82390:(e,t,n)=>{n.r(t),n.d(t,{default:()=>dt});var r=n(96540),o=n(5556),a=n.n(o),i=n(88600),s=n(697),l=n(8949),c=n(924),u=n(46894),d=n.n(u),p=n(5419),f=n.n(p),m=n(2543),b=n.n(m),v=n(95093),h=n.n(v),y=n(23350),g=n(90952),S=n(84914),O=n.n(S),k=n(18915),w=n(46857),I=n(41640),E=n(93638),M=n(79738),P=n(45814),x=n(33095),A=n(10734),D=n(34297),C=n(25824),N=n(13077),T=n(50709),j=n(43256),R=n(84079),q=n(44323),L=n(24178),V=n(66792),F=n(26216);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return(t=z(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function z(e){var t=function(e){if("object"!=_(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}var $={orderItems:{type:I.A,arrowsNavigation:!0,maxTableHeight:"calc(100vh - 500px)",fields:{checked:{fieldKey:"",label:"react.stockMovement.selectAll.label",defaultMessage:"Select All",flexWidth:"0.4",headerAlign:"right",getDynamicAttr:function(e){var t=e.selectAllItems,n=e.allItemsSelected;return{headerHtml:function(){return r.createElement("input",{type:"checkbox",className:"mt-1",checked:n,onClick:t})}}},type:function(e){var t=e.rowIndex,n=e.fieldValue,o=e.selectRow;return r.createElement(R.A,{id:t.toString(),disabled:!1,style:{marginLeft:"1.1rem"},value:n.checked,onChange:function(e){return o(e,t)}})}},orderNumber:{type:P.A,label:"react.stockMovement.orderNumber.label",defaultMessage:"PO Number",flexWidth:"1",fieldKey:"",getDynamicAttr:function(e){var t=e.fieldValue;return{url:null!=t&&t.orderId?T.fr.show(t.orderId):""}},attributes:{formatValue:function(e){return e&&e.orderNumber}}},productCode:{type:P.A,label:"react.stockMovement.productCode.label",defaultMessage:"Product Code",flexWidth:"1"},productName:{type:P.A,label:"react.stockMovement.productName.label",defaultMessage:"Product name",flexWidth:"3",attributes:{className:"text-left ml-1"},getDynamicAttr:function(e){var t,n=e.values,r=e.rowIndex,o=n.orderItems[r],a=(0,q.SH)({name:null==o?void 0:o.productSupplierName});return{color:null==o?void 0:o.color,showValueTooltip:!0,tooltipValue:null===(t=[null==o?void 0:o.productName,a].join(" "))||void 0===t?void 0:t.trim(),formatValue:function(){return(null==o?void 0:o.displayName)||(null==o?void 0:o.productName)}}}},supplierCode:{type:P.A,label:"react.stockMovement.supplierCode.label",defaultMessage:"Supplier code",flexWidth:"1"},budgetCode:{type:P.A,label:"react.stockMovement.budgetCode.label",defaultMessage:"Budget Code",flexWidth:"1"},recipient:{type:P.A,label:"react.stockMovement.recipient.label",defaultMessage:"Recipient",flexWidth:"1.5",attributes:{showValueTooltip:!0}},quantityAvailable:{type:P.A,label:"react.stockMovement.quantityAvailable.label",defaultMessage:"Quantity Available",flexWidth:"1"},quantityToShip:{type:D.A,label:"react.stockMovement.quantityToShip.label",defaultMessage:"Quantity to Ship",flexWidth:"1",attributes:{type:"number"},getDynamicAttr:function(e){var t=e.updateRow,n=e.values,r=e.rowIndex;return{onChange:function(){return t(n,r)}}}},uom:{type:P.A,label:"react.stockMovement.uom.label",defaultMessage:"UoM",flexWidth:"1"}}}};function Q(e){var t={orderItems:[]};return b().forEach(e.orderItems,(function(e,n){e.checked&&(b().toInteger(e.quantityToShip)>e.quantityAvailable||b().toInteger(e.quantityToShip)<0)&&(t.orderItems[n]={quantityToShip:"react.combinedShipments.errors.quantityToShip.label"})})),t}var Z={orderNumberOptions:[],selectedOrders:[],selectedProductId:"",selectedOrderItems:[],formValues:{orderItems:[]},sortOrder:0},X=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=G(t),function(e,t){if(t&&("object"==_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(t,n||[],G(e).constructor):t.apply(e,n))}(this,t,[e])).state=Z,n.onOpen=n.onOpen.bind(n),n.onSave=n.onSave.bind(n),n.selectRow=n.selectRow.bind(n),n.updateRow=n.updateRow.bind(n),n.selectAllItems=n.selectAllItems.bind(n),n.allItemsSelected=n.allItemsSelected.bind(n),n.debounceProductsInOrders=(0,L.sb)(n.props.debounceTime,n.props.minSearchLength,n.props.vendor,n.props.destination),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(t,e),n=t,(o=[{key:"onOpen",value:function(){var e=this;this.props.onOpen().then((function(){e.setState(Z,(function(){e.getOrderNumberOptions(),e.fetchOrderItems()}))}))}},{key:"onSave",value:function(){var e=this;this.props.showSpinner();var t=this.props.shipment,n=this.state.selectedOrderItems,r={itemsToAdd:b().map(n,(function(e,t){return{orderItemId:t,quantityToShip:b().toInteger(e.quantityToShip),sortOrder:b().toInteger(e.sortOrder)}}))},o="/api/combinedShipmentItems/addToShipment/".concat(t);j.Ay.post(o,r).then((function(){e.setState(Z,(function(){e.props.hideSpinner(),e.props.onResponse(e.props.overrideFormValue)}))})).catch((function(){return e.props.hideSpinner()}))}},{key:"getSortOrder",value:function(){return this.setState((function(e){return{sortOrder:e.sortOrder+1}})),this.state.sortOrder}},{key:"getOrderNumberOptions",value:function(){var e=this,t=this.props,n=t.vendor,r=t.destination,o="/api/orderNumberOptions?vendor=".concat(n,"&destination=").concat(r);j.Ay.get(o).then((function(t){return e.setState({orderNumberOptions:t.data.data})}))}},{key:"setSelectedOrders",value:function(e){var t=this;this.setState({selectedOrders:e},(function(){return t.fetchOrderItems()}))}},{key:"setSelectedProduct",value:function(e){var t=this;this.setState({selectedProductId:e?e.id:""},(function(){return t.fetchOrderItems()}))}},{key:"fetchOrderItems",value:function(){var e=this,t=this.state,n=t.selectedOrders,r=t.selectedProductId,o=t.selectedOrderItems,a=this.props,i=a.vendor,s=a.destination,l={orderIds:b().map(n,(function(e){return e.id})),productId:r,vendor:i,destination:s};return j.Ay.post("/api/combinedShipmentItems/findOrderItems",l).then((function(t){return e.setState({formValues:{orderItems:b().map(t.data.orderItems,(function(t){return B(B({},t),{},{checked:!!o[t.orderItemId],quantityToShip:o[t.orderItemId]?o[t.orderItemId].quantityToShip:"",sortOrder:e.getSortOrder()})}))}})}))}},{key:"selectRow",value:function(e,t){var n=this.state,r=n.formValues,o=n.selectedOrderItems,a={formValues:{orderItems:b().map(r.orderItems,(function(n,r){return t===r?B(B({},n),{},{checked:e,quantityToShip:e?n.quantityAvailable:"",sortOrder:e?n.sortOrder:""}):B({},n)}))}};e?a=B(B({},a),{},{selectedOrderItems:B(B({},o),{},U({},r.orderItems[t].orderItemId,{quantityToShip:e?r.orderItems[t].quantityAvailable:"",sortOrder:e?r.orderItems[t].sortOrder:""}))}):(delete o[r.orderItems[t].orderItemId],a=B(B({},a),{},{selectedOrderItems:o})),this.setState(a)}},{key:"updateRow",value:function(e,t){var n=this.state.selectedOrderItems,r=e.orderItems[t];r.checked=!0,this.setState({formValues:d()(e,{orderItems:U({},t,{$set:r})}),selectedOrderItems:B(B({},n),{},U({},r.orderItemId,{quantityToShip:r.quantityToShip,sortOrder:r.sortOrder}))})}},{key:"allItemsSelected",value:function(){return this.state.formValues.orderItems.every((function(e){return e.checked}))}},{key:"selectAllItems",value:function(){var e=this,t=this.allItemsSelected(),n=this.state.formValues.orderItems;this.setState({formValues:{orderItems:n.map((function(e){return B(B({},e),{},{checked:!t,quantityToShip:t?"":e.quantityAvailable,sortOrder:t?"":e.sortOrder})}))}},(function(){return e.updateAllSelectedItems()}))}},{key:"updateAllSelectedItems",value:function(){var e=this.state.formValues.orderItems,t=this.allItemsSelected(),n=e.reduce((function(e,n){return t?B(B({},e),{},U({},n.orderItemId,{quantityToShip:n.quantityAvailable,sortOrder:n.sortOrder})):e}),{});this.setState({selectedOrderItems:n})}},{key:"render",value:function(){var e=this,t=this.state,n=t.orderNumberOptions,o=t.selectedOrders,a=t.formValues,i=this.props,s=i.btnOpenText,l=i.btnOpenDefaultText,c=i.translate,u=i.btnOpenDisabled;return r.createElement(C.A,{onOpen:this.onOpen,onSave:this.onSave,fields:$,validate:Q,initialValues:a,title:"react.combinedShipments.addItemsToShipment.label",defaultTitleMessage:"Add items to shipment",formProps:{selectRow:this.selectRow,updateRow:this.updateRow,selectAllItems:this.selectAllItems,allItemsSelected:this.allItemsSelected()},btnSaveText:"react.combinedShipments.addItemsToShipment.label",btnSaveDefaultText:"Add items to shipment",btnOpenText:s,btnOpenDefaultText:l,btnOpenDisabled:u,btnSaveDisabled:!b().find(a.orderItems,(function(e){return e.checked}))},r.createElement("div",{className:"d-flex mb-3 justify-content-start align-items-center w-100 combined-shipment-filter"},r.createElement(V.A,{fieldName:"orderNumber",placeholder:c("react.combinedShipments.selectOrders.label","Select orders..."),value:o,multi:!0,options:n,showValueTooltip:!0,onChange:function(t){return e.setSelectedOrders(t)},valueKey:"id",labelKey:"orderNumber",classes:"",cache:!1})," ",r.createElement(N.A,{showSelectedOptionColor:!0,placeholder:c("react.combinedShipments.selectProduct.label","Select product..."),loadOptions:this.debounceProductsInOrders,onChange:function(t){return e.setSelectedProduct(t)}})))}}])&&Y(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);const J=(0,s.Ng)((function(e){return{debounceTime:e.session.searchConfig.debounceTime,minSearchLength:e.session.searchConfig.minSearchLength,translate:(0,F.H)((0,i.ro)(e.localize))}}),{showSpinner:l.xc,hideSpinner:l.W$})(X);X.propTypes={vendor:a().string.isRequired,destination:a().string.isRequired,shipment:a().string.isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,debounceTime:a().number.isRequired,minSearchLength:a().number.isRequired,translate:a().func.isRequired,onResponse:a().func.isRequired,onOpen:a().func.isRequired,btnOpenText:a().string,btnOpenDefaultText:a().string,btnOpenDisabled:a().bool,overrideFormValue:a().func.isRequired},X.defaultProps={btnOpenText:"",btnOpenDefaultText:"",btnOpenDisabled:!1};var ee=n(27595),te=n(26438);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function oe(){oe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),s=new D(r||[]);return o(i,"_invoke",{value:M(e,n,s)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",f="suspendedYield",m="executing",b="completed",v={};function h(){}function y(){}function g(){}var S={};c(S,i,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(C([])));k&&k!==n&&r.call(k,i)&&(S=k);var w=g.prototype=h.prototype=Object.create(S);function I(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,a,i,s){var l=d(e[o],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==ne(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,s)}))}s(l.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function M(t,n,r){var o=p;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var l=P(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?b:f,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=b,r.method="throw",r.arg=c.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ne(t)+" is not iterable")}return y.prototype=g,o(w,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:y,configurable:!0}),y.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},I(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new E(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(w),c(w,l,"Generator"),c(w,i,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function ae(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fe(r.key),r)}}function ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ce=function(){return!!e})()}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function pe(e,t,n){return(t=fe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e){var t=function(e){if("object"!=ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}var me={type:E.A,label:"react.default.button.delete.label",defaultMessage:"Delete",flexWidth:"1",fieldKey:"",buttonLabel:"react.default.button.delete.label",buttonDefaultMessage:"Delete",getDynamicAttr:function(e){var t=e.fieldValue,n=e.removeItem,r=e.removeRow,o=e.updateTotalCount;return{onClick:t&&t.id?function(){n(t.id).then((function(){r(),o(-1)}))}:function(){o(-1),r()},disabled:t&&"SUBSTITUTED"===t.statusCode}},attributes:{className:"btn btn-outline-danger"}},be={lineItems:{type:I.A,arrowsNavigation:!0,virtualized:!0,isRowLoaded:function(e){return e.isRowLoaded},loadMoreRows:function(e){return(0,e.loadMoreRows)()},isFirstPageLoaded:function(e){return e.isFirstPageLoaded},addButton:function(e){var t=e.values,n=e.onResponse,o=e.saveItems,a=e.invalid,i=e.overrideFormValue;return r.createElement(J,{shipment:t.stockMovementId,vendor:t.origin.id,destination:t.destination.id,onResponse:n,overrideFormValue:i,btnOpenText:"react.default.button.addLines.label",btnOpenDefaultText:"Add lines",onOpen:function(){return o(t.lineItems)},btnOpenDisabled:a},r.createElement(F.A,{id:"react.default.button.addLine.label",defaultMessage:"Add line"}))},fields:{orderNumber:{type:P.A,label:"react.stockMovement.orderNumber.label",defaultMessage:"Order number",flexWidth:"1",fieldKey:"",getDynamicAttr:function(e){var t=e.fieldValue;return{url:null!=t&&t.orderId?T.fr.show(t.orderId):""}},attributes:{formatValue:function(e){return e&&e.orderNumber}}},product:{type:x.A,label:"react.stockMovement.product.label",defaultMessage:"Product",headerAlign:"left",flexWidth:"4",required:!0,attributes:{showSelectedOptionColor:!0,showValueTooltip:!0,disabled:!0},getDynamicAttr:function(e){var t,n=e.rowIndex,r=e.values.lineItems[n]||{},o=(0,q.SH)(null==r?void 0:r.productSupplier);return{tooltipValue:[null==r||null===(t=r.product)||void 0===t?void 0:t.name,o].join(" ")}}},lotNumber:{type:D.A,label:"react.stockMovement.lot.label",defaultMessage:"Lot",flexWidth:"1",getDynamicAttr:function(e){var t=e.rowIndex,n=e.values,r=e.fetchInventoryItem,o=e.debouncedInventoryItemFetch;return{onBlur:function(){r(n,t)},onChange:function(){o(n,t)}}}},expirationDate:{type:M.A,label:"react.stockMovement.expiry.label",defaultMessage:"Expiry",flexWidth:"1.5",attributes:{dateFormat:"MM/DD/YYYY",autoComplete:"off",placeholderText:"MM/DD/YYYY"},getDynamicAttr:function(e){var t=e.rowIndex,n=e.values,r=e.validateExpirationDate;return{onBlur:function(){r(null==n?void 0:n.lineItems,t)}}}},packsRequested:{type:D.A,label:"react.stockMovement.quantityPOUom.label",defaultMessage:"Quantity (in PO UoM)",fixedWidth:"120px",required:!0,headerTooltip:"react.stockMovement.quantityPerUom.InputTooltip.label",multilineHeader:!0,attributes:{type:"number",showError:!0}},unitOfMeasure:{type:D.A,label:"react.stockMovement.POUom.label",defaultMessage:"PO UoM",fixedWidth:"110px",attributes:{disabled:!0}},calculatedQuantityRequested:{type:D.A,label:"react.stockMovement.quantityEach.label",defaultMessage:"Quantity (each)",multilineHeader:!0,flexWidth:1,attributes:{disabled:!0},getDynamicAttr:function(e){var t=e.rowIndex,n=e.values;return{formatValue:function(){var e=n.lineItems[t]||{};return b().toInteger(e.packsRequested)*b().toInteger(e.packSize)}}}},palletName:{type:D.A,label:"react.stockMovement.packLevel1.label",defaultMessage:"Pack level 1",flexWidth:"1",getDynamicAttr:function(e){return{autoFocus:e.rowIndex===e.rowCount-1}}},boxName:{type:D.A,label:"react.stockMovement.packLevel2.label",defaultMessage:"Pack level 2",flexWidth:"1"},recipient:{type:A.A,label:"react.stockMovement.recipient.label",defaultMessage:"Recipient",flexWidth:"1.5",getDynamicAttr:function(e){var t=e.recipients,n=e.translate,o=e.setRecipientValue;return{headerHtml:function(){return r.createElement(V.A,{placeholder:n("react.stockMovement.recipient.label","Recipient"),className:"select-xs my-2",classNamePrefix:"react-select",options:t,onChange:function(e){e&&o(e)}})},options:t}},attributes:{labelKey:"name",openOnClick:!1}},split:{type:E.A,label:"react.stockMovement.splitLine.label",defaultMessage:"Split",flexWidth:"1",fieldKey:"",buttonLabel:"react.stockMovement.splitLine.label",buttonDefaultMessage:"Split line",getDynamicAttr:function(e){var t=e.fieldValue,n=e.addRow,r=e.rowIndex,o=e.updateTotalCount;return{onClick:function(){o(1),n({product:t.product,recipient:t.recipient,sortOrder:t.sortOrder+1,orderItemId:t.orderItemId,referenceId:t.orderItemId,orderNumber:t.orderNumber,packSize:t.packSize,unitOfMeasure:t.unitOfMeasure,quantityAvailable:t.quantityAvailable},r)}}},attributes:{className:"btn btn-outline-success"}},deleteButton:me}}},ve="react.stockMovement.error.lotAndExpiryControl.label",he=!1,ye=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pe(n=function(e,t,n){return t=ue(t),function(e,t){if(t&&("object"==ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ce()?Reflect.construct(t,n||[],ue(e).constructor):t.apply(e,n))}(this,t,[e]),"dataFetched",!1),pe(n,"isRowLoaded",(function(e){return function(t){var n=t.index;return!!e.lineItems[n]}})),pe(n,"importTemplate",(function(e){return function(t){n.props.showSpinner();var r=new FormData,o=t.target.files[0],a=n.state.values.stockMovementId;return r.append("importFile",o.slice(0,o.size,"text/csv")),j.Ay.post((0,w.$j)(a),r,{headers:{"content-type":"multipart/form-data"}}).then((function(){n.fetchLineItems(e),b().isNil(b().last(n.state.values.lineItems).product)&&n.setState((function(e){return{values:se({},e.values)}}))})).catch((function(){n.props.hideSpinner()}))}})),n.state={values:n.props.initialValues,totalCount:0,isFirstPageLoaded:!1,showAlert:!1,alertMessage:""},n.props.showSpinner(),n.confirmSave=n.confirmSave.bind(n),n.validate=n.validate.bind(n),n.validateWithAlertMessage=n.validateWithAlertMessage.bind(n),n.isValidForSave=n.isValidForSave.bind(n),n.isRowLoaded=n.isRowLoaded.bind(n),n.updateTotalCount=n.updateTotalCount.bind(n),n.removeItem=n.removeItem.bind(n),n.fetchLineItems=n.fetchLineItems.bind(n),n.saveRequisitionItemsInCurrentStep=n.saveRequisitionItemsInCurrentStep.bind(n),n.importTemplate=n.importTemplate.bind(n),n.toggleDropdown=n.toggleDropdown.bind(n),n.fetchInventoryItem=n.fetchInventoryItem.bind(n),n.validateExpirationDate=n.validateExpirationDate.bind(n),n.cancelSavingRequisitionItem=n.cancelSavingRequisitionItem.bind(n),n.changeExpirationDate=n.changeExpirationDate.bind(n),n.debouncedInventoryItemFetch=b().debounce((function(e,t){n.fetchInventoryItem(e,t)}),1e3),n.debouncedProductsFetch=(0,L.yH)(n.props.debounceTime,n.props.minSearchLength,n.props.initialValues.origin.id),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){this.props.stockMovementTranslationsFetched&&(this.dataFetched=!0,this.fetchAllData())}},{key:"componentWillReceiveProps",value:function(e){e.stockMovementTranslationsFetched&&!this.dataFetched&&(this.dataFetched=!0,this.fetchAllData())}},{key:"getLineItemsToBeSaved",value:function(e){var n=t.updateSortOrder(e);return b().map(n,(function(e){return{id:e.id||null,product:{id:e.product.id},quantityRequested:e.packsRequested*e.packSize,palletName:e.palletName,boxName:e.boxName,lotNumber:e.lotNumber,expirationDate:e.expirationDate,recipient:{id:b().isObject(e.recipient)?e.recipient.id||"":e.recipient||""},sortOrder:e.sortOrder,orderItemId:e.orderItemId}}))}},{key:"setLineItems",value:function(e){var t=e.response,n=e.setTableData,r=t.data.data,o=b().map(r,(function(e){return se(se({},e),{},{disabled:!0,referenceId:e.orderItemId})}));null==n||n("lineItems",o),this.props.hideSpinner()}},{key:"updateTotalCount",value:function(e){this.setState((function(t){return{totalCount:t.totalCount+e}}))}},{key:"validate",value:function(e,t){if(!this.dataFetched)return{};var n={lineItems:[]},r=h()(this.props.minimumExpirationDate,"MM/DD/YYYY");return b().forEach(e.lineItems,(function(o,a){b().isNil(o.product)||o.packsRequested&&!(o.packsRequested<=0)||(n.lineItems[a]={packsRequested:"react.stockMovement.error.enterQuantity.label"}),!b().isEmpty(o.boxName)&&b().isEmpty(o.palletName)&&(n.lineItems[a]={boxName:"react.stockMovement.error.boxWithoutPallet.label"});var i=h()(o.expirationDate,"MM/DD/YYYY");r.diff(i)>0&&(n.lineItems[a]={expirationDate:"react.stockMovement.error.invalidDate.label"}),h()().startOf("day").diff(i)>0&&(n.lineItems[a]={expirationDate:"react.stockMovement.error.pastDate.label"});var s=b().filter(e.lineItems,(function(e){return e.referenceId===o.referenceId}));!o.id||s.length>1?b().reduce(s,(function(e,t){return e+(t.packsRequested?b().toInteger(t.packsRequested*t.packSize):0)}),0)>o.quantityAvailable&&b().forEach(e.lineItems,(function(e,t){b().forEach(s,(function(r){e===r&&(n.lineItems[t]={packsRequested:"react.stockMovement.error.higherSplitQuantity.label"})}))})):1===s.length&&o&&o.quantityAvailable<b().toInteger(o.packsRequested*o.packSize)&&(n.lineItems[a]={packsRequested:"react.stockMovement.error.higherQuantity.label"}),t||(o.expirationDate&&(b().isNil(o.lotNumber)||b().isEmpty(o.lotNumber))&&(n.lineItems[a]={lotNumber:"react.stockMovement.error.expiryWithoutLot.label"}),!b().isNil(o.product)&&o.product.lotAndExpiryControl&&(o.expirationDate||!b().isNil(o.lotNumber)&&!b().isEmpty(o.lotNumber)?o.expirationDate?(b().isNil(o.lotNumber)||b().isEmpty(o.lotNumber))&&(n.lineItems[a]={lotNumber:ve}):n.lineItems[a]={expirationDate:ve}:n.lineItems[a]={expirationDate:ve,lotNumber:ve}))})),n}},{key:"validateWithAlertMessage",value:function(e){var t=this,n=this.validate(e),r="";b().forEach(n.lineItems,(function(n,o){if(n){var a=e.lineItems[o].productCode;r?r+=", Row ".concat(o+1,": ").concat(a):r="".concat(t.props.translate("react.stockMovement.errors.followingRowsContainValidationError.label","Following rows contain validation errors: Row")," ").concat(o+1,": ").concat(a)}}));var o=this.state.showAlert;return this.setState({alertMessage:r,showAlert:!(o&&!r)&&o}),n}},{key:"isValidForSave",value:function(e){var t=this.validate(e,!0);return!t.lineItems||t.lineItems.every(b().isEmpty)}},{key:"confirmSave",value:function(e){(0,y.ZX)({title:this.props.translate("react.stockMovement.message.confirmSave.label","Confirm save"),message:this.props.translate("react.stockMovement.confirmSave.message","Are you sure you want to save? There are some lines with empty or zero quantity, those lines will be deleted."),buttons:[{label:this.props.translate("react.default.yes.label","Yes"),onClick:e},{label:this.props.translate("react.default.no.label","No")}]})}},{key:"confirmInventoryItemExpirationDateUpdate",value:function(e,t){(0,y.ZX)({title:this.props.translate("react.stockMovement.message.confirmSave.label","Confirm save"),message:this.props.translate("react.stockMovement.confirmExpiryDateUpdate.message","This will update the expiry date across all depots in the system. Are you sure you want to proceed?"),buttons:[{label:this.props.translate("react.default.yes.label","Yes"),onClick:e},{label:this.props.translate("react.default.no.label","No"),onClick:t}],afterClose:function(){he=!1}})}},{key:"fetchAllData",value:function(){this.props.fetchUsers(),this.fetchAddItemsPageData(),this.props.isPaginated||this.fetchLineItems(),this.props.hideSpinner()}},{key:"fetchLineItems",value:function(e){var t=this,n="".concat((0,w.sp)(this.state.values.stockMovementId),"?stepNumber=2");return j.Ay.get(n).then((function(n){t.setState({totalCount:n.data.data.length}),t.setLineItems({response:n,setTableData:e})})).catch((function(e){return e}))}},{key:"fetchAddItemsPageData",value:function(){var e=this;this.props.showSpinner(),j.Ay.get((0,w.HO)(this.state.values.stockMovementId)).then((function(t){var n=t.data.data.hasManageInventory,r=t.data.data,o=r.statusCode,a=r.lineItems,i=t.data.totalCount,s=b().map(b().sortBy(a,["sortOrder"]),(function(e){return se(se({},e),{},{disabled:!0,referenceId:e.orderItemId})}));e.setState((function(e){return{values:se(se({},e.values),{},{hasManageInventory:n,statusCode:o,lineItems:s}),totalCount:i}}),(function(){return e.props.hideSpinner()}))}))}},{key:"nextPage",value:function(e){var t=this;if(this.validateWithAlertMessage(e).lineItems.length)this.setState({showAlert:!0});else{var n=b().filter(e.lineItems,(function(e){return!b().isEmpty(e)&&e.product}));b().some(n,(function(e){return!e.packsRequested||"0"===e.packsRequested}))?this.confirmSave((function(){return t.saveAndTransitionToNextStep(e,n)})):this.saveAndTransitionToNextStep(e,n)}}},{key:"saveAndTransitionToNextStep",value:function(e,t){this.saveRequisitionItemsAndTransitionToNextStep(e,t)}},{key:"fetchInventoryItem",value:(i=oe().mark((function e(t,n){var r,o,a,i,s,l,c,u=this;return oe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.debouncedInventoryItemFetch.cancel(),a=null==t||null===(r=t.lineItems[n])||void 0===r?void 0:r.lotNumber,i=null==t||null===(o=t.lineItems[n])||void 0===o||null===(o=o.product)||void 0===o?void 0:o.id,a&&i){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,k.A.getInventoryItem(i,a);case 7:s=e.sent,l=s.data,c=null==t?void 0:t.lineItems.map((function(e,t){return n===t?se(se({},e),{},{fetchedInventoryItem:{inventoryItem:l.inventoryItem,quantity:null==l?void 0:l.quantityOnHand}}):e})),this.setState((function(e){return se(se({},e),{},{values:se(se({},e.values),{},{lineItems:c})})}),(function(){var e,r;null!==(e=t.lineItems)&&void 0!==e&&null!==(e=e[n])&&void 0!==e&&e.expirationDate||u.changeExpirationDate(c,n,null==l||null===(r=l.inventoryItem)||void 0===r?void 0:r.expirationDate),u.validateExpirationDate(c,n)}));case 11:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){ae(o,n,r,a,s,"next",e)}function s(e){ae(o,n,r,a,s,"throw",e)}a(void 0)}))},function(e,t){return s.apply(this,arguments)})},{key:"validateExpirationDate",value:function(e,t){var n,r,o,a=this,i=null==e?void 0:e[t],s=(null==i||null===(n=i.fetchedInventoryItem)||void 0===n?void 0:n.inventoryItem)||(null==i?void 0:i.inventoryItem),l=(null!=i&&i.fetchedInventoryItem?null==i||null===(r=i.fetchedInventoryItem)||void 0===r?void 0:r.quantity:null==i||null===(o=i.inventoryItem)||void 0===o?void 0:o.quantity)||0;(null==s?void 0:s.expirationDate)&&(null==i?void 0:i.expirationDate)&&(null==i?void 0:i.lotNumber)&&(null==i?void 0:i.expirationDate)!==(null==s?void 0:s.expirationDate)&&l>0&&!he&&(he=!0,this.confirmInventoryItemExpirationDateUpdate((function(){return a.saveRequisitionItems(a.state.values.lineItems)}),(function(){return a.cancelSavingRequisitionItem(e,t)})))}},{key:"changeExpirationDate",value:function(e,t,n){var r=se(se({},null==e?void 0:e[t]),{},{expirationDate:n});this.setState((function(e){var n;return se(se({},e),{},{values:se(se({},e.values),{},{lineItems:d()(null==e||null===(n=e.values)||void 0===n?void 0:n.lineItems,pe({},t,{$set:r}))})})}))}},{key:"cancelSavingRequisitionItem",value:function(e,t){var n=null==e?void 0:e.map((function(e,n){if(n===t){var r,o,a=(null==e||null===(r=e.fetchedInventoryItem)||void 0===r||null===(r=r.inventoryItem)||void 0===r?void 0:r.expirationDate)||(null==e||null===(o=e.inventoryItem)||void 0===o?void 0:o.expirationDate);return se(se({},e),{},{expirationDate:a})}return e}));this.setState((function(e){return se(se({},e),{},{values:se(se({},e.values),{},{lineItems:n})})}))}},{key:"saveRequisitionItems",value:function(e){var t=this.getLineItemsToBeSaved(e),n={id:this.state.values.stockMovementId,lineItems:t};return n.lineItems.length?j.Ay.post((0,w.SP)(this.state.values.stockMovementId),n).catch((function(){return Promise.reject(new Error("react.stockMovement.error.saveRequisitionItems.label"))})):Promise.resolve()}},{key:"saveRequisitionItemsAndTransitionToNextStep",value:function(e,t){var n=this;this.props.showSpinner(),this.saveRequisitionItems(t).then((function(t){var r=e;t&&(r=se(se({},e),{},{lineItems:b().map(t.data.data.lineItems,(function(e){return se(se({},e),{},{referenceId:e.orderItemId})}))})),n.transitionToNextStep().then((function(){n.props.nextPage(r)})).catch((function(){return n.props.hideSpinner()}))})).catch((function(){return n.props.hideSpinner()}))}},{key:"saveRequisitionItemsInCurrentStep",value:function(e){var t=this,n=this.getLineItemsToBeSaved(e),r={id:this.state.values.stockMovementId,lineItems:n};return r.lineItems.length?j.Ay.post((0,w.SP)(this.state.values.stockMovementId),r).then((function(e){var n=e.data.data.lineItems,r=b().map(b().sortBy(n,["sortOrder"]),(function(e){return se(se({},e),{},{referenceId:e.orderItemId})}));t.setState((function(e){return{values:se(se({},e.values),{},{lineItems:r})}}))})).catch((function(){return Promise.reject(new Error(t.props.translate("react.stockMovement.error.saveRequisitionItems.label","Could not save requisition items")))})):Promise.resolve()}},{key:"save",value:function(e){var t=this,n=b().filter(e.lineItems,(function(e){return!b().isEmpty(e)}));n.length>0?b().some(n,(function(e){return!e.packsRequested||"0"===e.packsRequested}))?this.confirmSave((function(){return t.saveItems(n)})):this.saveItems(n):O().error(this.props.translate("react.stockMovement.error.noShipmentItems.label","Cannot save shipment from PO with no items."),{timeout:2e3})}},{key:"saveAndExit",value:function(e){e.lineItems.length>0?this.validateWithAlertMessage(e).lineItems.length?(0,y.ZX)({title:this.props.translate("react.stockMovement.confirmExit.label","Confirm save"),message:this.props.translate("react.stockMovement.confirmExit.message","Validation errors occurred. Are you sure you want to exit and lose unsaved data?"),buttons:[{label:this.props.translate("react.default.yes.label","Yes"),onClick:function(){window.location=T.ti.show(e.stockMovementId)}},{label:this.props.translate("react.default.no.label","No")}]}):this.saveRequisitionItemsInCurrentStep(e.lineItems).then((function(){window.location=T.ti.show(e.stockMovementId)})):O().error(this.props.translate("react.stockMovement.error.noShipmentItems.label","Cannot save shipment from PO with no items."),{timeout:2e3})}},{key:"saveItems",value:function(e){var t=this;this.props.showSpinner(),this.saveRequisitionItemsInCurrentStep(e).then((function(){t.props.hideSpinner(),O().success(t.props.translate("react.stockMovement.alert.saveSuccess.label","Changes saved successfully"),{timeout:3e3})})).catch((function(){return t.props.hideSpinner()}))}},{key:"removeItem",value:function(e){var t=this;return this.props.showSpinner(),j.Ay.delete((0,w.GS)(e)).then((function(){return t.props.hideSpinner()})).catch((function(){return t.props.hideSpinner(),Promise.reject(new Error("react.stockMovement.error.deleteRequisitionItem.label"))}))}},{key:"removeAll",value:function(){var e=this;return this.props.showSpinner(),j.Ay.delete((0,w.Z1)(this.state.values.stockMovementId)).then((function(){e.setState((function(e){return{totalCount:0,values:se(se({},e.values),{},{lineItems:[]})}}),(function(){return e.props.hideSpinner()}))})).catch((function(){return e.fetchLineItems(),e.props.hideSpinner(),Promise.reject(new Error("react.stockMovement.error.deleteRequisitionItem.label"))}))}},{key:"refresh",value:function(){var e=this;(0,y.ZX)({title:this.props.translate("react.stockMovement.message.confirmRefresh.label","Confirm refresh"),message:this.props.translate("react.stockMovement.confirmRefresh.message","Are you sure you want to refresh? Your progress since last save will be lost."),buttons:[{label:this.props.translate("react.default.yes.label","Yes"),onClick:function(){return e.fetchAllData()}},{label:this.props.translate("react.default.no.label","No")}]})}},{key:"transitionToNextStep",value:function(){return"CREATED"===this.state.values.statusCode?j.Ay.post((0,w.Gj)(this.state.values.stockMovementId),{status:"CHECKING"}):Promise.resolve()}},{key:"previousPage",value:function(e,t){var n=this;t?(0,y.ZX)({title:this.props.translate("react.stockMovement.confirmPreviousPage.label","Validation error"),message:this.props.translate("react.stockMovement.confirmPreviousPage.message.label","Cannot save due to validation error on page"),buttons:[{label:this.props.translate("react.stockMovement.confirmPreviousPage.correctError.label","Correct error")},{label:this.props.translate("react.stockMovement.confirmPreviousPage.continue.label","Continue (lose unsaved work)"),onClick:function(){return n.props.previousPage(e)}}]}):this.saveRequisitionItemsInCurrentStep(e.lineItems).then((function(){return n.props.previousPage(e)}))}},{key:"exportTemplate",value:function(e){var t=this,n="".concat(w.qO,"?vendor=").concat(this.state.values.origin.id,"&destination=").concat(this.state.values.destination.id).concat(e?"&blank=true":"");j.Ay.get(n,{responseType:"blob"}).then((function(e){f()(e.data,"".concat(t.props.translate("react.combinedShipments.template.fileName.label","Order-items-template"),".csv"),"text/csv"),t.props.hideSpinner()})).catch((function(){return t.props.hideSpinner()}))}},{key:"toggleDropdown",value:function(){this.setState((function(e){return{isDropdownVisible:!e.isDropdownVisible}}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.showAlert,o=t.alertMessage;return r.createElement(g.lV,{onSubmit:function(){},validate:this.validate,mutators:se(se({},c.A),{},{override:function(e,t,n){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),o=r[0],a=r[1];(0,n.changeValue)(t,o,(function(){return a}))},setColumnValue:te.UM}),initialValues:this.state.values,render:function(t){var a=t.form,i=t.handleSubmit,s=t.values,l=t.invalid;return r.createElement("div",{className:"d-flex flex-column"},r.createElement(ee.A,{show:n,message:o,danger:!0}),r.createElement("span",{className:"buttons-container"},r.createElement("label",{htmlFor:"csvInput",className:"float-right mb-1 btn btn-outline-secondary align-self-end ml-1 btn-xs"},r.createElement("span",null,r.createElement("i",{className:"fa fa-download pr-2"}),r.createElement(F.A,{id:"react.default.button.importTemplate.label",defaultMessage:"Import template"})),r.createElement("input",{id:"csvInput",type:"file",style:{display:"none"},onChange:e.importTemplate(a.mutators.override),onClick:function(e){e.target.value=null},accept:".csv"})),r.createElement("div",{className:"dropdown"},r.createElement("button",{type:"button",onClick:e.toggleDropdown,className:"dropdown-button float-right mb-1 btn btn-outline-secondary align-self-end btn-xs ml-1"},r.createElement("span",null,r.createElement("i",{className:"fa fa-sign-out pr-2"}),r.createElement(F.A,{id:"react.default.button.download.label",defaultMessage:"Download"}))),r.createElement("div",{className:"dropdown-content print-buttons-container col-md-3 flex-grow-1 \n                        ".concat(e.state.isDropdownVisible?"visible":"")},r.createElement("a",{href:"#",className:"py-1 mb-1 btn btn-outline-secondary",onClick:function(){e.exportTemplate(!1)}},r.createElement("span",null,r.createElement("i",{className:"pr-2 fa fa-download"}),r.createElement(F.A,{id:"react.combinedShipments.availableItems.label",defaultMessage:"Available order items"}))),r.createElement("a",{href:"#",className:"py-1 mb-1 btn btn-outline-secondary",onClick:function(){e.exportTemplate(!0)}},r.createElement("span",null,r.createElement("i",{className:"pr-2 fa fa-download"}),r.createElement(F.A,{id:"react.combinedShipments.blankTemplate.label",defaultMessage:"Blank import template"}))))),r.createElement("button",{type:"button",onClick:function(){return e.refresh()},className:"float-right mb-1 btn btn-outline-secondary align-self-end ml-1 btn-xs"},r.createElement("span",null,r.createElement("i",{className:"fa fa-refresh pr-2"}),r.createElement(F.A,{id:"react.default.button.refresh.label",defaultMessage:"Reload"}))),r.createElement("button",{type:"button",disabled:!e.isValidForSave(s),onClick:function(){return e.save(s)},className:"float-right mb-1 btn btn-outline-secondary align-self-end ml-1 btn-xs"},r.createElement("span",null,r.createElement("i",{className:"fa fa-save pr-2"}),r.createElement(F.A,{id:"react.default.button.save.label",defaultMessage:"Save"}))),r.createElement("button",{type:"button",disabled:!e.isValidForSave(s),onClick:function(){return e.saveAndExit(s)},className:"float-right mb-1 btn btn-outline-secondary align-self-end ml-1 btn-xs"},r.createElement("span",null,r.createElement("i",{className:"fa fa-sign-out pr-2"}),r.createElement(F.A,{id:"react.default.button.saveAndExit.label",defaultMessage:"Save and exit"}))),r.createElement("button",{type:"button",disabled:l,onClick:function(){return e.removeAll()},className:"float-right mb-1 btn btn-outline-danger align-self-end btn-xs ml-1"},r.createElement("span",null,r.createElement("i",{className:"fa fa-remove pr-2"}),r.createElement(F.A,{id:"react.default.button.deleteAll.label",defaultMessage:"Delete all"})))),r.createElement("form",{onSubmit:i},r.createElement("div",{className:"table-form"},b().map(be,(function(t,n){var r;return(0,te.bl)(t,n,{stocklist:s.stocklist,recipients:e.props.recipients,loadMoreRows:function(){},debouncedProductsFetch:e.debouncedProductsFetch,totalCount:e.state.totalCount,isRowLoaded:e.isRowLoaded(s),updateTotalCount:e.updateTotalCount,isPaginated:e.props.isPaginated,isFromOrder:null===(r=e.state.values)||void 0===r?void 0:r.isFromOrder,values:s,isFirstPageLoaded:e.state.isFirstPageLoaded,removeItem:e.removeItem,onResponse:e.fetchLineItems,saveItems:e.saveRequisitionItemsInCurrentStep,invalid:l,fetchInventoryItem:e.fetchInventoryItem,debouncedInventoryItemFetch:e.debouncedInventoryItemFetch,validateExpirationDate:e.validateExpirationDate,setRecipientValue:function(e){return a.mutators.setColumnValue("lineItems","recipient",e)},translate:e.props.translate,overrideFormValue:a.mutators.override})}))),r.createElement("div",{className:"submit-buttons"},r.createElement("button",{type:"submit",disabled:l,onClick:function(){return e.previousPage(s,l)},className:"btn btn-outline-primary btn-form btn-xs"},r.createElement(F.A,{id:"react.default.button.previous.label",defaultMessage:"Previous"})),r.createElement("button",{type:"submit",onClick:function(){return e.nextPage(s)},className:"btn btn-outline-primary btn-form float-right btn-xs",disabled:!b().some(s.lineItems,(function(e){return!b().isEmpty(e)}))},r.createElement(F.A,{id:"react.default.button.next.label",defaultMessage:"Next"})))))}})}}],a=[{key:"updateSortOrder",value:function(e){return b().map(e,(function(e,t){return se(se({},e),{},{sortOrder:e.sortOrder-e.sortOrder%100+t+1})}))}}],o&&le(n.prototype,o),a&&le(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a,i,s}(r.Component);const ge=(0,s.Ng)((function(e){return{recipients:e.users.data,translate:(0,F.H)((0,i.ro)(e.localize)),stockMovementTranslationsFetched:e.session.fetchedTranslations.stockMovement,debounceTime:e.session.searchConfig.debounceTime,minSearchLength:e.session.searchConfig.minSearchLength,minimumExpirationDate:e.session.minimumExpirationDate,hasPackingSupport:e.session.currentLocation.hasPackingSupport,isPaginated:e.session.isPaginated,pageSize:e.session.pageSize}}),{showSpinner:l.xc,hideSpinner:l.W$,fetchUsers:l.hU})(ye);ye.propTypes={initialValues:a().shape({origin:a().shape({id:a().string}),hasManageInventory:a().bool}).isRequired,nextPage:a().func.isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,fetchUsers:a().func.isRequired,recipients:a().arrayOf(a().shape({})).isRequired,translate:a().func.isRequired,stockMovementTranslationsFetched:a().bool.isRequired,debounceTime:a().number.isRequired,minSearchLength:a().number.isRequired,minimumExpirationDate:a().string.isRequired,isPaginated:a().bool.isRequired,previousPage:a().func.isRequired};var Se=n(38798),Oe=n(84976);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e,t,n){return(t=Pe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pe(r.key),r)}}function Pe(e){var t=function(e){if("object"!=ke(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ke(t)?t:t+""}function xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xe=function(){return!!e})()}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}var Ce=Se.A.parse(window.location.search).orderId;function Ne(e){var t={};return e.description||(t.description="react.default.error.requiredField.label"),e.origin||(t.origin="react.default.error.requiredField.label"),e.destination||(t.destination="react.default.error.requiredField.label"),t}var Te={description:{type:D.A,label:"react.stockMovement.description.label",defaultMessage:"Description",attributes:{required:!0,autoFocus:!0}},origin:{type:A.A,label:"react.stockMovement.origin.label",defaultMessage:"Origin",attributes:{required:!0,async:!0,showValueTooltip:!0,openOnClick:!1,autoload:!1,cache:!1,options:[],filterOptions:function(e){return e}},getDynamicAttr:function(e){return{loadOptions:e.debouncedOriginLocationsFetch,disabled:!b().isNil(e.stockMovementId)}}},destination:{type:A.A,label:"react.stockMovement.destination.label",defaultMessage:"Destination",attributes:{required:!0,async:!0,showValueTooltip:!0,openOnClick:!1,autoload:!1,cache:!1,options:[],filterOptions:function(e){return e}},getDynamicAttr:function(e){return{loadOptions:e.debouncedDestinationLocationsFetch,disabled:!(e.isSuperuser&&b().isNil(e.stockMovementId)||e.hasCentralPurchasingEnabled)}}}},je=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=Ae(t),function(e,t){if(t&&("object"==ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xe()?Reflect.construct(t,n||[],Ae(e).constructor):t.apply(e,n))}(this,t,[e])).state={setInitialValues:!0,values:n.props.initialValues},n.debouncedOriginLocationsFetch=(0,L.Uq)(n.props.debounceTime,n.props.minSearchLength,null,!1,!0,!1),n.debouncedDestinationLocationsFetch=(0,L.Uq)(n.props.debounceTime,n.props.minSearchLength,null,!0),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){var e=this;if(Ce){var t="/api/combineShipments/".concat(Ce);j.Ay.get(t).then((function(t){var n=t.data.data;e.setInitialValues(n.origin,n.destination)})).catch((function(e){return e}))}}},{key:"componentWillReceiveProps",value:function(e){this.props.match.params.stockMovementId||!this.state.setInitialValues||!e.location.id||Ce||this.props.hasCentralPurchasingEnabled||this.setInitialValues(null,e.location)}},{key:"setInitialValues",value:function(e,t){var n=[],r=[];e&&(n={id:e.id,type:e.locationType?e.locationType.locationTypeCode:null,name:e.name,label:"".concat(e.organizationCode?"".concat(e.organizationCode," - "):"").concat(e.name)}),t&&(r={id:t.id,type:t.locationType?t.locationType.locationTypeCode:null,name:t.name,label:"".concat(t.name," [").concat(t.locationType?t.locationType.description:null,"]")}),this.setState({values:{destination:r,origin:n},setInitialValues:!1})}},{key:"saveStockMovement",value:function(e){var t=this;if(e.origin&&e.destination&&e.description){this.props.showSpinner();var n={description:e.description,origin:{id:e.origin.id},destination:{id:e.destination.id}},r="";e.stockMovementId?(r="/api/stockMovements/".concat(e.stockMovementId,"/updateRequisition"),n={description:e.description,destination:{id:e.destination.id}}):r="/api/stockMovements/createCombinedShipments",j.Ay.post(r,n).then((function(n){if(n.data){var r=n.data.data;t.props.history.push(T.ti.editCombinedShipments(r.id)),t.props.nextPage(Ie(Ie({},e),{},{dateRequested:r.dateRequested,stockMovementId:r.id,lineItems:r.lineItems,movementNumber:r.identifier,name:r.name}))}})).catch((function(){return t.props.hideSpinner(),Promise.reject(new Error(t.props.translate("react.stockMovement.error.createStockMovement.label","Could not create stock movement")))}))}}},{key:"render",value:function(){var e=this;return r.createElement(g.lV,{onSubmit:function(t){return e.saveStockMovement(t)},validate:Ne,initialValues:this.state.values,render:function(t){var n=t.handleSubmit,o=t.values;return r.createElement("form",{onSubmit:n},r.createElement("div",{className:"classic-form with-description"},b().map(Te,(function(t,n){return(0,te.bl)(t,n,{isSuperuser:e.props.isSuperuser,debouncedDestinationLocationsFetch:e.debouncedDestinationLocationsFetch,debouncedOriginLocationsFetch:e.debouncedOriginLocationsFetch,stockMovementId:o.stockMovementId,hasCentralPurchasingEnabled:e.props.hasCentralPurchasingEnabled})}))),r.createElement("div",{className:"submit-buttons"},r.createElement("button",{type:"submit",className:"btn btn-outline-primary float-right btn-xs"},r.createElement(F.A,{id:"react.default.button.next.label",defaultMessage:"Next"}))))}})}}])&&Me(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);const Re=(0,Oe.withRouter)((0,s.Ng)((function(e){return{location:e.session.currentLocation,isSuperuser:e.session.isSuperuser,translate:(0,F.H)((0,i.ro)(e.localize)),debounceTime:e.session.searchConfig.debounceTime,minSearchLength:e.session.searchConfig.minSearchLength,hasCentralPurchasingEnabled:e.session.currentLocation.hasCentralPurchasingEnabled}}),{showSpinner:l.xc,hideSpinner:l.W$})(je));je.propTypes={match:a().shape({params:a().shape({stockMovementId:a().string})}).isRequired,initialValues:a().shape({origin:a().shape({id:a().string}),destination:a().shape({id:a().string}),stocklist:a().shape({})}).isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,nextPage:a().func.isRequired,history:a().shape({push:a().func}).isRequired,location:a().shape({name:a().string,id:a().string,locationType:a().shape({description:a().string,locationTypeCode:a().string})}).isRequired,isSuperuser:a().bool.isRequired,translate:a().func.isRequired,debounceTime:a().number.isRequired,minSearchLength:a().number.isRequired,hasCentralPurchasingEnabled:a().bool.isRequired};var qe=n(26386),Le=n(90524),Ve=n(91019);function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(null,arguments)}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$e(r.key),r)}}function ze(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ze=function(){return!!e})()}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function Ke(e,t,n){return(t=$e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e){var t=function(e){if("object"!=Fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Fe(t)?t:t+""}var Qe={"origin.name":{label:"react.stockMovement.origin.label",defaultMessage:"Origin",type:function(e){return r.createElement(D.A,e)},attributes:{disabled:!0}},destination:{label:"react.stockMovement.destination.label",defaultMessage:"Destination",fieldKey:"",type:function(e){return e.canBeEdited&&!e.hasStockList?r.createElement(A.A,e):null},getDynamicAttr:function(e){var t=e.canBeEdited,n=e.hasStockList,r=e.debouncedLocationsFetch;return t&&!n?{required:!0,async:!0,showValueTooltip:!0,openOnClick:!1,autoload:!1,loadOptions:r,cache:!1,options:[],filterOptions:function(e){return e}}:{formatValue:function(e){return b().get(e,"name")}}}},"destination.name":{label:"react.stockMovement.destination.label",defaultMessage:"Destination",type:function(e){return e.canBeEdited&&!e.hasStockList?null:r.createElement(D.A,e)},getDynamicAttr:function(e){var t=e.canBeEdited,n=e.hasStockList;return{disabled:!t||n}}},dateShipped:{type:M.A,label:"react.stockMovement.shipDate.label",defaultMessage:"Shipment date",attributes:{dateFormat:"MM/DD/YYYY HH:mm Z",required:!0,showTimeSelect:!0,autoComplete:"off",showError:!0},getDynamicAttr:function(e){var t=e.issued,n=e.showOnly;return{disabled:t||n}}},shipmentType:{type:A.A,label:"react.stockMovement.shipmentType.label",defaultMessage:"Shipment type",attributes:{required:!0,showValueTooltip:!0,valueKey:"id",labelKey:"name"},getDynamicAttr:function(e){var t=e.shipmentTypes,n=e.received;return{options:t,disabled:e.showOnly||n}}},trackingNumber:{type:D.A,label:"react.stockMovement.trackingNumber.label",defaultMessage:"Tracking number",getDynamicAttr:function(e){var t=e.received;return{disabled:e.showOnly||t}}},driverName:{type:D.A,label:"react.stockMovement.driverName.label",defaultMessage:"Driver name",getDynamicAttr:function(e){var t=e.received;return{disabled:e.showOnly||t}}},comments:{type:D.A,label:"react.stockMovement.comments.label",defaultMessage:"Comments",getDynamicAttr:function(e){var t=e.received;return{disabled:e.showOnly||t}}},expectedDeliveryDate:{type:M.A,label:"react.stockMovement.expectedDeliveryDate.label",defaultMessage:"Expected receipt date",attributes:{dateFormat:"MM/DD/YYYY",required:!0,showTimeSelect:!1,autoComplete:"off"}}},Ze={tableItems:{type:I.A,virtualized:!0,totalCount:function(e){return e.totalCount},isRowLoaded:function(e){return e.isRowLoaded},loadMoreRows:function(e){return(0,e.loadMoreRows)()},isFirstPageLoaded:function(e){return e.isFirstPageLoaded},fields:{palletName:{type:P.A,label:"react.stockMovement.packLevel1.label",defaultMessage:"Pack level 1",flexWidth:"3",getDynamicAttr:function(e){return{hide:e.isPalletNameEmpty}}},boxName:{type:P.A,label:"react.stockMovement.packLevel2.label",defaultMessage:"Pack level 2",flexWidth:"3",getDynamicAttr:function(e){return{hide:e.isBoxNameEmpty}}},productCode:{type:P.A,label:"react.stockMovement.code.label",defaultMessage:"Code",flexWidth:"3.5"},product:{type:P.A,label:"react.stockMovement.product.label",defaultMessage:"Product",headerAlign:"left",flexWidth:"7",getDynamicAttr:function(e){var t,n,r=e.isBoxNameEmpty,o=e.isPalletNameEmpty,a=e.tableItems[e.rowIndex]||{},i=[null!=a&&null!==(t=a.product)&&void 0!==t&&null!==(t=t.displayNames)&&void 0!==t&&t.default?null==a||null===(n=a.product)||void 0===n?void 0:n.name:null,(0,q.SH)(null==a?void 0:a.productSupplier)].join(" ").trim();return{showValueTooltip:Boolean(i),tooltipValue:i,flexWidth:7+(r?3:0)+(o?3:0)}},attributes:{className:"text-left",formatValue:q.OL}},lotNumber:{type:P.A,label:"react.stockMovement.lot.label",defaultMessage:"Lot",flexWidth:"3.5"},expirationDate:{type:P.A,label:"react.stockMovement.expiry.label",defaultMessage:"Expiry",flexWidth:"3.5"},quantityPickedPerUom:{type:P.A,label:"react.stockMovement.quantityPickedPOUom.label",defaultMessage:"Qty Picked (in PO UoM)",multilineHeader:!0,fixedWidth:"100px",attributes:{disabled:!0},getDynamicAttr:function(e){var t=e.rowIndex,n=e.tableItems;return{formatValue:function(){var e=n[t]||{};return"".concat(e.packsRequested," ").concat(e.unitOfMeasure)}}}},quantityRequested:{type:P.A,fixedWidth:"150px",label:"react.stockMovement.quantityPickedEach.label",defaultMessage:"Qty Picked (each)"},"recipient.name":{type:P.A,label:"react.stockMovement.recipient.label",defaultMessage:"Recipient",flexWidth:"3.5"}}}},Xe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ke(n=function(e,t,n){return t=He(t),function(e,t){if(t&&("object"==Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ze()?Reflect.construct(t,n||[],He(e).constructor):t.apply(e,n))}(this,t,[e]),"dataFetched",!1),n.state={shipmentTypes:[],documents:[],files:[],values:Ue(Ue({},n.props.initialValues),{},{tableItems:[]}),totalCount:0,isFirstPageLoaded:!1},n.props.showSpinner(),n.onDrop=n.onDrop.bind(n),n.isRowLoaded=n.isRowLoaded.bind(n),n.loadMoreRows=n.loadMoreRows.bind(n),n.toggleDropdown=n.toggleDropdown.bind(n),n.validate=n.validate.bind(n),n.debouncedLocationsFetch=(0,L.Uq)(n.props.debounceTime,n.props.minSearchLength),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.props.showSpinner(),this.props.stockMovementTranslationsFetched&&(this.dataFetched=!0,this.fetchStockMovementData())}},{key:"componentWillReceiveProps",value:function(e){e.stockMovementTranslationsFetched&&!this.dataFetched&&(this.dataFetched=!0,this.fetchStockMovementData())}},{key:"onDrop",value:function(e){var t=this.state.files,n=b().differenceBy(t,e,"name");this.setState({files:b().concat(n,e)})}},{key:"onSave",value:function(e){var t=this;this.props.showSpinner(),this.saveValues(e).then((function(){t.props.hideSpinner(),"ISSUED"===e.statusCode&&t.fetchStockMovementData(),O().success(t.props.translate("react.stockMovement.alert.saveSuccess.label","Changes saved successfully"),{timeout:3e3})})).catch((function(){return t.props.hideSpinner()}))}},{key:"saveValues",value:function(e){var t={destination:{id:e.destination.id},dateShipped:e.dateShipped,shipmentType:{id:e.shipmentType.id},trackingNumber:e.trackingNumber||"",driverName:e.driverName||"",comments:e.comments||"",expectedDeliveryDate:e.expectedDeliveryDate||""};return this.saveShipment(t)}},{key:"removeFile",value:function(e){var t=this.state.files;b().remove(t,(function(t){return t.name===e})),this.setState({files:t})}},{key:"removeFiles",value:function(e){var t=this.state.files;b().forEach(e,(function(e){b().remove(t,(function(t){return t.name===e}))})),this.setState({files:t})}},{key:"fetchShipmentTypes",value:function(){var e=this;return j.Ay.get("/api/generic/shipmentType").then((function(t){var n=b().map(t.data.data,(function(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return We(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(b().split(t.name,"|fr:"),2),r=n[0],o=n[1];return Ue(Ue({},t),{},{label:"fr"===e.props.locale&&o?o:r})}));e.setState({shipmentTypes:n},(function(){return e.props.hideSpinner()}))})).catch((function(){return e.props.hideSpinner()}))}},{key:"fetchStockMovementItems",value:function(){var e=this,t="/api/stockMovements/".concat(this.state.values.stockMovementId,"/stockMovementItems?stepNumber=6");j.Ay.get(t).then((function(t){var n=t.data.data;e.setState((function(e){return{values:Ue(Ue({},e.values),{},{tableItems:n})}}))}))}},{key:"loadMoreRows",value:function(e){var t=this,n=e.startIndex;if(this.state.totalCount){var r="/api/stockMovements/".concat(this.state.values.stockMovementId,"/stockMovementItems?offset=").concat(n,"&max=").concat(this.props.pageSize,"&stepNumber=6");j.Ay.get(r).then((function(e){var r=e.data.data,o=b().map(r,(function(e){return Ue(Ue({},e),{},{productName:e.productName?e.productName:e.product.name})}));t.setState((function(e){return{values:Ue(Ue({},e.values),{},{tableItems:b().uniqBy(b().concat(e.values.tableItems,o),"id")}),isFirstPageLoaded:!0}}),(function(){t.state.values.tableItems.length!==t.state.totalCount&&t.loadMoreRows({startIndex:n+t.props.pageSize})}))}))}}},{key:"isRowLoaded",value:function(e){var t=e.index;return!!this.state.values.tableItems[t]}},{key:"fetchStockMovementData",value:function(){var e=this,t="/api/stockMovements/".concat(this.state.values.stockMovementId,"?stepNumber=6");return j.Ay.get(t).then((function(t){var n=t.data.data,r=t.data.data.associations,o=t.data.totalCount,a=b().filter(r.documents,(function(e){return 5===e.stepNumber})),i=n.destination.locationType;e.setState((function(t){return{documents:a,totalCount:o,values:Ue(Ue({},t.values),{},{dateShipped:n.dateShipped,shipmentType:Ue(Ue({},n.shipmentType),{},{label:(0,Ve.Ay)(n.shipmentType.name,e.props.locale)}),trackingNumber:n.trackingNumber,driverName:n.driverName,comments:n.comments,expectedDeliveryDate:n.expectedDeliveryDate,name:n.name,description:n.description,destination:{id:n.destination.id,type:i?i.locationTypeCode:null,name:n.destination.name,label:"".concat(n.destination.name,"\n                [").concat(i?i.description:null,"]")},shipmentStatus:n.shipmentStatus})}}),(function(){e.props.nextPage(e.state.values),e.fetchShipmentTypes(),e.props.isPaginated||e.fetchStockMovementItems()}))})).catch((function(){return e.props.hideSpinner()}))}},{key:"sendFile",value:function(e){var t="/stockMovement/uploadDocument/".concat(this.state.values.stockMovementId),n=new FormData;return n.append("fileContents",e),j.Ay.post(t,n)}},{key:"sendFiles",value:function(e){var t="/stockMovement/uploadDocuments/".concat(this.state.values.stockMovementId),n=new FormData;return b().forEach(e,(function(e,t){n.append("filesContents[".concat(t,"]"),e)})),j.Ay.post(t,n)}},{key:"saveShipment",value:function(e){var t="/api/stockMovements/".concat(this.state.values.stockMovementId,"/updateShipment");return j.Ay.post(t,e)}},{key:"stateTransitionToIssued",value:function(){var e="/api/stockMovements/".concat(this.state.values.stockMovementId,"/status");return j.Ay.post(e,{status:"ISSUED"})}},{key:"sendFilesAndSave",value:function(e){var t=this,n=this.validate(e);if(b().isEmpty(n)){this.props.showSpinner();var r=this.state.files;r.length>1?this.sendFiles(r).then((function(){O().success(t.props.translate("react.stockMovement.alert.filesSuccess.label","Files uploaded successfuly!"),{timeout:3e3}),t.removeFiles(b().map(r,(function(e){return e.name}))),t.prepareRequestAndSubmitStockMovement(e)})).catch((function(){return O().error(t.props.translate("react.stockMovement.alert.filesError.label","Error occured during files upload!"))})).finally((function(){return t.props.hideSpinner()})):1===r.length?this.sendFile(r[0]).then((function(){O().success(t.props.translate("react.stockMovement.alert.fileSuccess.label","File uploaded successfuly!"),{timeout:3e3}),t.removeFile(r[0].name),t.prepareRequestAndSubmitStockMovement(e)})).catch((function(){return O().error(t.props.translate("react.stockMovement.alert.fileError.label","Error occured during file upload!"))})).finally((function(){return t.props.hideSpinner()})):this.prepareRequestAndSubmitStockMovement(e)}}},{key:"prepareRequestAndSubmitStockMovement",value:function(e){var t=this,n={destination:{id:e.destination.id},dateShipped:e.dateShipped,shipmentType:{id:e.shipmentType.id},trackingNumber:e.trackingNumber||"",driverName:e.driverName||"",comments:e.comments||"",expectedDeliveryDate:e.expectedDeliveryDate||""};this.props.currentLocationId!==e.origin.id&&"SUPPLIER"!==e.origin.type&&e.hasManageInventory?(O().error(this.props.translate("react.stockMovement.alert.sendStockMovement.label","You are not able to send shipment from a location other than origin. Change your current location.")),this.props.hideSpinner()):e.shipmentType.id===b().find(this.state.shipmentTypes,(function(e){return"Default"===e.label})).id?(O().error(this.props.translate("react.stockMovement.alert.populateShipmentType.label","Please populate shipment type before continuing")),this.props.hideSpinner()):this.saveShipment(n).then((function(){t.stateTransitionToIssued().then((function(){window.location=T.ti.show(t.state.values.stockMovementId)})).catch((function(){return t.props.hideSpinner()}))})).catch((function(){return t.props.hideSpinner()}))}},{key:"previousPage",value:function(e,t){var n=this;t?(0,y.ZX)({title:this.props.translate("react.stockMovement.confirmPreviousPage.label","Validation error"),message:this.props.translate("react.stockMovement.confirmPreviousPage.message.label","Cannot save due to validation error on page"),buttons:[{label:this.props.translate("react.stockMovement.confirmPreviousPage.correctError.label","Correct error")},{label:this.props.translate("react.stockMovement.confirmPreviousPage.continue.label","Continue (lose unsaved work)"),onClick:function(){return n.props.previousPage(e)}}]}):this.saveValues(e).then((function(){return n.props.previousPage(e)}))}},{key:"saveAndExit",value:function(e){var t=this.validate(e);b().isEmpty(t)?this.saveValues(e).then((function(){window.location=T.ti.show(e.stockMovementId)})):(0,y.ZX)({title:this.props.translate("react.stockMovement.confirmExit.label","Confirm save"),message:this.props.translate("react.stockMovement.confirmExit.message","Validation errors occurred. Are you sure you want to exit and lose unsaved data?"),buttons:[{label:this.props.translate("react.default.yes.label","Yes"),onClick:function(){window.location=T.ti.show(e.stockMovementId)}},{label:this.props.translate("react.default.no.label","No")}]})}},{key:"rollbackStockMovement",value:function(e){var t=this;this.props.showSpinner();var n="/api/stockMovements/".concat(this.state.values.stockMovementId,"/status"),r=this.props.currentLocationId===e.origin.id,o=this.props.currentLocationId===e.destination.id;e.hasManageInventory&&r||!e.hasManageInventory&&o||this.props.hasCentralPurchasingEnabled?j.Ay.delete(n,{rollback:!0}).then((function(){t.props.hideSpinner(),window.location.reload()})):(this.props.hideSpinner(),O().error(this.props.translate("react.stockMovement.alert.rollbackShipment.label","You are not able to rollback shipment from your location.")))}},{key:"toggleDropdown",value:function(){this.setState((function(e){return{isDropdownVisible:!e.isDropdownVisible}}))}},{key:"validate",value:function(e){var t={},n=h()(this.props.minimumExpirationDate,"MM/DD/YYYY"),r=h()(e.dateShipped,"MM/DD/YYYY"),o=h()(e.expectedDeliveryDate,"MM/DD/YYYY");return n.diff(r)>0&&(t.dateShipped="react.stockMovement.error.invalidDate.label"),e.dateShipped||(t.dateShipped="react.default.error.requiredField.label"),e.shipmentType||(t.shipmentType="react.default.error.requiredField.label"),e.expectedDeliveryDate||(t.expectedDeliveryDate="react.default.error.requiredField.label"),h()(r).diff(o)>0&&(t.expectedDeliveryDate="react.stockMovement.error.deliveryDateBeforeShipDate.label",t.dateShipped="react.stockMovement.error.deliveryDateBeforeShipDate.label"),t}},{key:"render",value:function(){var e=this;return r.createElement("div",null,r.createElement(g.lV,{onSubmit:function(){},validate:this.validate,mutators:Ue({},c.A),initialValues:this.state.values,render:function(t){var n=t.handleSubmit,o=t.values,a=t.invalid;return r.createElement("form",{onSubmit:n},r.createElement("div",{className:"classic-form classic-form-condensed"},r.createElement("span",{className:"buttons-container classic-form-buttons"},r.createElement("div",{className:"dropzone float-right mb-1 btn btn-outline-secondary ".concat("ISSUED"===o.statusCode?"disabled":""," align-self-end btn-xs mr-1")},r.createElement(qe.Ay,{disabled:"ISSUED"===o.statusCode,onDrop:e.onDrop,multiple:!0},(function(t){var n=t.getRootProps;return r.createElement("div",n(),r.createElement("span",null,r.createElement("i",{className:"fa fa-upload pr-2"}),r.createElement(F.A,{id:"react.stockMovement.uploadDocuments.label",defaultMessage:"Upload Documents"})),b().map(e.state.files,(function(t){return r.createElement("div",{key:t.name,className:"chosen-file d-flex justify-content-center align-items-center"},r.createElement("div",{className:"text-truncate"},t.name),r.createElement("a",{href:"#",className:"remove-button",onClick:function(n){e.removeFile(t.name),n.stopPropagation()}},r.createElement("span",{className:"fa fa-remove"})))})))}))),r.createElement("div",{className:"dropdown"},r.createElement("button",{type:"button",onClick:e.toggleDropdown,className:"dropdown-button float-right mb-1 btn btn-outline-secondary align-self-end btn-xs mr-1"},r.createElement("span",null,r.createElement("i",{className:"fa fa-sign-out pr-2"}),r.createElement(F.A,{id:"react.default.button.download.label",defaultMessage:"Download"}))),r.createElement("div",{className:"dropdown-content print-buttons-container col-md-3 flex-grow-1 \n                      ".concat(e.state.isDropdownVisible?"visible":"")},e.state.documents.length&&b().map(e.state.documents,(function(t,n){return t.hidden?null:r.createElement(Le.A,_e({link:t.uri,buttonTitle:t.name},t,{key:n,onClick:function(){return e.saveValues(o)}}))})))),r.createElement("span",null,r.createElement("button",{type:"button",onClick:function(){return e.onSave(o)},className:"btn btn-outline-secondary float-right btn-form btn-xs ml-1",disabled:a},r.createElement("span",null,r.createElement("i",{className:"fa fa-save pr-2"}),r.createElement(F.A,{id:"react.default.button.save.label",defaultMessage:"Save"}))),r.createElement("button",{type:"button",onClick:function(){return e.saveAndExit(o)},className:"float-right mb-1 btn btn-outline-secondary align-self-end btn-xs"},r.createElement("span",null,r.createElement("i",{className:"fa fa-sign-out pr-2"}),r.createElement(F.A,{id:"react.default.button.saveAndExit.label",defaultMessage:"Save and exit"}))))),r.createElement("div",{className:"form-title"},r.createElement(F.A,{id:"react.attribute.options.label",defaultMessage:"Sending options"})),b().map(Qe,(function(t,n){return(0,te.bl)(t,n,{shipmentTypes:e.state.shipmentTypes,issued:"ISSUED"===o.statusCode,received:o.received,canBeEdited:!o.received,debouncedLocationsFetch:e.debouncedLocationsFetch})}))),r.createElement("div",null,r.createElement("div",{className:"submit-buttons"},r.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-form btn-xs",disabled:"ISSUED"===o.statusCode,onClick:function(){return e.previousPage(o,a)}},r.createElement(F.A,{id:"react.default.button.previous.label",defaultMessage:"Previous"})),r.createElement("button",{type:"submit",onClick:function(){e.sendFilesAndSave(o)},className:"".concat(o.shipped?"btn btn-outline-secondary":"btn btn-outline-success"," float-right btn-form btn-xs"),disabled:"ISSUED"===o.statusCode},r.createElement(F.A,{id:"react.stockMovement.sendShipment.label",defaultMessage:"Send shipment"})),o.shipped&&e.props.isUserAdmin?r.createElement("button",{type:"submit",onClick:function(){e.rollbackStockMovement(o)},className:"btn btn-outline-success float-right btn-xs",disabled:a||"ISSUED"!==o.statusCode},r.createElement("span",null,r.createElement("i",{className:"fa fa-undo pr-2"}),r.createElement(F.A,{id:"react.default.button.rollback.label",defaultMessage:"Rollback"}))):null),r.createElement("div",{className:"my-2 table-form"},b().map(Ze,(function(t,n){return(0,te.bl)(t,n,{hasBinLocationSupport:e.props.hasBinLocationSupport,totalCount:e.state.totalCount,loadMoreRows:e.loadMoreRows,isRowLoaded:e.isRowLoaded,isPaginated:e.props.isPaginated,isFirstPageLoaded:e.state.isFirstPageLoaded,isBoxNameEmpty:b().every(e.state.values.tableItems,(function(e){return!e.boxName})),isPalletNameEmpty:b().every(e.state.values.tableItems,(function(e){return!e.palletName})),tableItems:o.tableItems})})))))}}))}}])&&Ye(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);const Je=(0,s.Ng)((function(e){return{translate:(0,F.H)((0,i.ro)(e.localize)),currentLocationId:e.session.currentLocation.id,stockMovementTranslationsFetched:e.session.fetchedTranslations.stockMovement,debounceTime:e.session.searchConfig.debounceTime,minSearchLength:e.session.searchConfig.minSearchLength,locale:e.session.activeLanguage,isUserAdmin:e.session.isUserAdmin,hasBinLocationSupport:e.session.currentLocation.hasBinLocationSupport,isPaginated:e.session.isPaginated,pageSize:e.session.pageSize,minimumExpirationDate:e.session.minimumExpirationDate,hasCentralPurchasingEnabled:e.session.currentLocation.hasCentralPurchasingEnabled}}),{showSpinner:l.xc,hideSpinner:l.W$})(Xe);Xe.propTypes={initialValues:a().shape({}).isRequired,previousPage:a().func.isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,nextPage:a().func.isRequired,translate:a().func.isRequired,currentLocationId:a().string.isRequired,stockMovementTranslationsFetched:a().bool.isRequired,debounceTime:a().number.isRequired,minSearchLength:a().number.isRequired,locale:a().string.isRequired,isUserAdmin:a().bool.isRequired,hasBinLocationSupport:a().bool.isRequired,isPaginated:a().bool.isRequired,pageSize:a().number.isRequired,minimumExpirationDate:a().string.isRequired,hasCentralPurchasingEnabled:a().bool.isRequired};var et=n(80461);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ct(r.key),r)}}function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}function lt(e,t,n){return(t=ct(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e){var t=function(e){if("object"!=tt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tt(t)?t:t+""}var ut=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lt(n=function(e,t,n){return t=it(t),function(e,t){if(t&&("object"==tt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,at()?Reflect.construct(t,n||[],it(e).constructor):t.apply(e,n))}(this,t,[e]),"pageList",[Re,ge,Je]),lt(n,"dataFetched",!1),n.state={values:n.props.initialValues,currentPage:1},n.updateWizardValues=n.updateWizardValues.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.props.fetchTranslations("","stockMovement"),this.props.stockMovementTranslationsFetched&&(this.dataFetched=!0,this.fetchInitialValues())}},{key:"componentWillReceiveProps",value:function(e){this.props.locale&&this.props.locale!==e.locale&&this.props.fetchTranslations(e.locale,"stockMovement"),e.stockMovementTranslationsFetched&&!this.dataFetched&&(this.dataFetched=!0,this.fetchInitialValues())}},{key:"wizardTitle",get:function(){var e=this.state.values;return e.movementNumber||e.trackingNumber?[{text:this.props.translate("react.stockMovement.label","Stock Movement"),color:"#000000",delimeter:" | "},{text:e.movementNumber,color:"#000000",delimeter:" - "},{text:e.origin.name,color:"#004d40",delimeter:" to "},{text:e.destination.name,color:"#01579b",delimeter:", "},{text:e.dateRequested,color:"#4a148c",delimeter:", "},{text:e.description,color:"#770838",delimeter:""}]:[]}},{key:"additionalWizardTitle",get:function(){var e=this.state,t=e.currentPage,n=e.values,o=n.shipped?"SHIPPED":"",a=n.received?"RECEIVED":"";return 3===t?r.createElement("span",{className:"shipment-status float-right"},"".concat(o||a||"PENDING")):null}},{key:"stepList",get:function(){return[this.props.translate("react.stockMovement.create.label","Create"),this.props.translate("react.stockMovement.addItems.label","Add items"),this.props.translate("react.stockMovement.send.label","Send")]}},{key:"updateWizardValues",value:function(e,t){this.setState({currentPage:e,values:t})}},{key:"fetchInitialValues",value:function(){var e=this;if(this.props.match.params.stockMovementId){this.props.showSpinner();var t="/api/stockMovements/".concat(this.props.match.params.stockMovementId);j.Ay.get(t).then((function(t){var n=t.data.data,r=n.origin.locationType,o=n.destination.locationType,a=rt(rt({},n),{},{stockMovementId:n.id,movementNumber:n.identifier,origin:{id:n.origin.id,type:r?r.locationTypeCode:null,name:n.origin.name,label:"".concat(n.origin.organizationCode?"".concat(n.origin.organizationCode," - "):"").concat(n.origin.name)},destination:{id:n.destination.id,type:o?o.locationTypeCode:null,name:n.destination.name,label:"".concat(n.destination.name," [").concat(o?o.description:null,"]")}}),i=1;switch(a.statusCode){case"NEW":break;case"PENDING":i=2;break;default:i=3}e.setState({values:a,currentPage:i})})).catch((function(){return e.props.hideSpinner()}))}}},{key:"render",value:function(){var e=this.state,t=e.values,n=e.currentPage;return r.createElement(et.A,{pageList:this.pageList,stepList:this.stepList,initialValues:t,title:this.wizardTitle,additionalTitle:this.additionalWizardTitle,currentPage:n,prevPage:1===n?1:n-1,updateWizardValues:this.updateWizardValues})}}])&&ot(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(r.Component);const dt=(0,s.Ng)((function(e){return{locale:e.session.activeLanguage,stockMovementTranslationsFetched:e.session.fetchedTranslations.stockMovement,translate:(0,F.H)((0,i.ro)(e.localize))}}),{showSpinner:l.xc,hideSpinner:l.W$,fetchTranslations:l.dj})(ut);ut.propTypes={match:a().shape({params:a().shape({stockMovementId:a().string})}).isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,initialValues:a().shape({shipmentStatus:a().string}),locale:a().string.isRequired,stockMovementTranslationsFetched:a().bool.isRequired,fetchTranslations:a().func.isRequired,translate:a().func.isRequired},ut.defaultProps={initialValues:{}}},84079:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(96540),o=n(5556),a=n.n(o),i=n(26216),s=["value","indeterminate","custom","fieldRef","withLabel","label","defaultMessage"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(null,arguments)}var c=function(e){var t=e.value,n=e.indeterminate,o=e.custom,a=e.fieldRef,c=e.withLabel,u=e.label,d=e.defaultMessage,p=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,s),f=function(e){var t=e.target.checked;p.onChange&&p.onChange(t)};return o?r.createElement("div",{"data-testid":"custom-checkbox",className:"custom-checkbox"},r.createElement("label",{htmlFor:p.id},r.createElement("input",l({id:p.id,type:"checkbox",ref:a,checked:t},p,{onChange:f})))):c?r.createElement("div",{"data-testid":"with-label-checkbox",className:"d-flex align-items-center"},r.createElement("input",l({type:"checkbox",ref:function(e){e&&(e.indeterminate=n),a&&a(e)},checked:t},p,{onChange:f})),r.createElement("label",{htmlFor:p.id,style:{margin:"0 0 0 5px"}},r.createElement(i.A,{id:u,defaultMessage:d||u}))):r.createElement("input",l({"data-testid":"checkbox",type:"checkbox",ref:function(e){e&&(e.indeterminate=n),a&&a(e)},checked:t},p,{onChange:f}))};const u=c;c.propTypes={onChange:a().func,value:a().bool,indeterminate:a().bool,custom:a().bool,id:a().string,fieldRef:a().func,withLabel:a().bool,label:a().string,defaultMessage:a().string},c.defaultProps={onChange:null,value:null,indeterminate:!1,custom:!1,id:"",fieldRef:void 0,withLabel:!1,label:"",defaultMessage:""}},90524:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(96540),o=n(5556),a=n.n(o),i=function(e){var t=e.buttonIcon,n=e.buttonTitle,o=e.link,a=e.target,i=e.disabled,s=e.onClick;return r.createElement("a",{href:o,className:"py-1 mb-1 btn btn-outline-secondary ".concat(i?"disabled":""),target:a,rel:"noopener noreferrer",onClick:function(e){return function(e,t,n){t.preventDefault();var r=window.open("","_blank");e?e().then((function(){r.location.href=n})):r.location.href=n}(s,e,o)}},r.createElement("span",null,r.createElement("i",{className:"pr-2 fa ".concat(t)}),n))};const s=i;i.propTypes={buttonIcon:a().string,buttonTitle:a().string,link:a().string.isRequired,target:a().string,disabled:a().bool.isRequired,onClick:a().func.isRequired},i.defaultProps={buttonIcon:"fa-download",buttonTitle:"Print Document",target:"_blank"}},93638:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(96540),o=n(5556),a=n.n(o),i=n(51836),s=n(26216);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(null,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){var t=e.fieldName,n=e.fieldConfig,o=n.buttonLabel,a=n.buttonDefaultMessage,l=n.getDynamicAttr,u=n.attributes,p=void 0===u?{className:"btn-outline-primary"}:u,f=l?l(e):{},m=d(d({},p),f);return r.createElement("button",c({type:"button",key:t},m,{className:"text-truncate btn btn-xs ".concat(m.className)}),"string"==typeof o?r.createElement(i.Tooltip,{html:o&&r.createElement(s.A,{id:o,defaultMessage:a}),theme:"transparent",arrow:"true",delay:"150",duration:"250",hideDelay:"50"}," ",r.createElement(s.A,{id:o,defaultMessage:a})):r.createElement(o,null))};const m=f;f.propTypes={fieldName:a().string.isRequired,fieldConfig:a().shape({getDynamicAttr:a().func}).isRequired}}}]);
//# sourceMappingURL=bundle.929af1b45eb780bfc503.5395.js.map