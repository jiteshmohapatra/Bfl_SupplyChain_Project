"use strict";(self.webpackChunkopenboxes=self.webpackChunkopenboxes||[]).push([[1670],{10734:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(96540),r=n(4395),a=n(66792),i=["className"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(null,arguments)}const s=function(e){return o.createElement(r.A,l({},e,{renderInput:function(e){var t=e.className,n=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,i);return o.createElement(a.A,l({name:n.id},n,{className:"select-xs ".concat(t),classNamePrefix:"react-select"}))}}))}},25824:(e,t,n)=>{n.d(t,{A:()=>P});var o=n(96540),r=n(924),a=n(2543),i=n.n(a),l=n(5556),s=n.n(l),c=n(90952),u=n(70373),p=n.n(u),f=n(26438),d=n(26216);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,v(o.key),o)}}function v(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}var E=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=w(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}(this,t,[e])).state={showModal:!1},n.openModal=n.openModal.bind(n),n.closeModal=n.closeModal.bind(n),n.save=n.save.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,(a=[{key:"openModal",value:function(){this.props.onOpen(),this.setState({showModal:!0})}},{key:"closeModal",value:function(){this.props.onClose(),this.setState({showModal:!1})}},{key:"save",value:function(e){this.props.onSave(e),this.setState({showModal:!1})}},{key:"render",value:function(){var e=this,t=this.props.title,n=this.props.defaultTitleMessage;return o.createElement("div",{className:this.props.wrapperClassName},this.props.renderButton?this.props.renderButton({openModal:this.openModal}):o.createElement("button",{type:"button",className:"btn-xs ".concat(this.props.btnOpenClassName),style:this.props.btnOpenStyle,disabled:this.props.btnOpenDisabled,onClick:function(){return e.openModal()}},this.props.btnOpenIcon&&o.createElement("i",{className:"fa ".concat(this.props.btnOpenIcon," mr-1"),"aria-hidden":"true"}),this.props.btnOpenText&&!this.props.btnOpenAsIcon&&o.createElement(d.A,{id:this.props.btnOpenText,defaultMessage:this.props.btnOpenDefaultText})),o.createElement(p(),{isOpen:this.props.showModal||this.state.showModal,onRequestClose:this.closeModal,className:"modal-content-custom",shouldCloseOnOverlayClick:!1},o.createElement("div",{className:this.props.bodyContainerClassName,style:this.props.bodyContainerStyle},"string"==typeof t?o.createElement("h5",{className:"text-center"}," ",o.createElement(d.A,{id:t,defaultMessage:n})):o.createElement(t,null),o.createElement("hr",null),o.createElement(c.lV,{onSubmit:function(t){return e.save(t)},initialValues:this.props.initialValues,validate:this.props.validate,mutators:y({},r.A),render:function(t){var n=t.handleSubmit,r=t.values;return o.createElement("form",{id:"modalForm",onSubmit:n},e.props.children,e.props.renderBodyWithValues(r),i().map(e.props.fields,(function(t,n){return(0,f.bl)(t,n,y(y({},e.props.formProps),{},{values:r}))})),o.createElement("hr",null),o.createElement("div",{className:e.props.btnContainerClassName,role:"group",style:e.props.btnContainerStyle},o.createElement("button",{type:"button",className:e.props.btnCancelClassName,style:e.props.btnCancelStyle,onClick:function(){return e.closeModal()}},o.createElement(d.A,{id:e.props.btnCancelText,defaultMessage:e.props.btnCancelDefaultText})),o.createElement("button",{type:"submit",className:e.props.btnSaveClassName,style:e.props.btnSaveStyle,disabled:e.props.btnSaveDisabled},o.createElement(d.A,{id:e.props.btnSaveText,defaultMessage:e.props.btnSaveDefaultText}))))}}))))}}])&&g(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a}(o.Component);const P=E;E.propTypes={btnOpenText:s().string,btnOpenDefaultText:s().string,btnOpenClassName:s().string,btnOpenStyle:s().shape({}),btnOpenDisabled:s().bool,btnOpenAsIcon:s().bool,btnOpenIcon:s().string,title:s().oneOfType([s().string,s().func]).isRequired,defaultTitleMessage:s().string.isRequired,children:s().element,bodyContainerClassName:s().string,bodyContainerStyle:s().shape({}),btnContainerClassName:s().string,btnContainerStyle:s().shape({}),renderButton:s().func,wrapperClassName:s().string,btnSaveText:s().string,btnSaveDefaultText:s().string,btnSaveClassName:s().string,btnSaveStyle:s().shape({}),btnSaveDisabled:s().bool,btnCancelText:s().string,btnCancelDefaultText:s().string,btnCancelClassName:s().string,btnCancelStyle:s().shape({}),onOpen:s().func,onSave:s().func,onClose:s().func,validate:s().func,renderBodyWithValues:s().func,initialValues:s().oneOfType([s().shape({}),s().arrayOf(s().shape({}))]),fields:s().shape({}),formProps:s().shape({}),showModal:s().bool},E.defaultProps={btnOpenText:"react.default.button.open.label",btnOpenDefaultText:"Open",btnOpenClassName:"btn btn-outline-primary",btnOpenStyle:{},btnOpenDisabled:!1,btnOpenAsIcon:!1,btnOpenIcon:"",children:null,bodyContainerClassName:"modal-body-container",bodyContainerStyle:{},btnContainerClassName:"btn-group float-right",btnContainerStyle:{},wrapperClassName:null,btnSaveText:"react.default.button.save.label",btnSaveDefaultText:"Save",btnSaveClassName:"btn btn-outline-success",btnSaveStyle:{},btnSaveDisabled:!1,btnCancelText:"react.default.button.cancel.label",btnCancelDefaultText:"Cancel",btnCancelClassName:"btn btn-outline-secondary",btnCancelStyle:{},renderButton:void 0,onOpen:function(){return null},onSave:function(){return null},onClose:function(){return null},validate:function(){return null},renderBodyWithValues:function(){return null},initialValues:[],fields:{},formProps:{},showModal:!1}},29404:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(96540),r=n(4395),a=n(5556),i=n.n(a),l=["onChange","className","fieldRef","isResizable"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(null,arguments)}var c=function(e){var t=e.onChange,n=e.className,r=void 0===n?"":n,a=e.fieldRef,i=e.isResizable,c=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,l);return o.createElement("textarea",s({ref:a,onKeyPress:function(e){13===e.which&&e.preventDefault()},className:"form-control form-control-xs ".concat(r," resizable-").concat(i)},c,{onChange:function(e){var n=e.target.value;t&&t(n)}}))};const u=c;function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p.apply(null,arguments)}c.propTypes={onChange:i().func,className:i().string,fieldRef:i().func,isResizable:i().bool},c.defaultProps={isResizable:!0,onChange:null,className:"",fieldRef:null};const f=function(e){return o.createElement(r.A,p({},e,{renderInput:function(e){return o.createElement(u,e)}}))}},34297:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(96540),r=n(4395),a=n(40910),i=["inputClassName","className"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(null,arguments)}const s=function(e){return o.createElement(r.A,l({},e,{renderInput:function(e){var t=e.inputClassName,n=e.className,r=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,i);return o.createElement(a.A,l({isFormElement:!0,className:t||n},r))}}))}},38727:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(96540),r=n(5556),a=n.n(r),i=n(26386),l=n(42164),s=n(15516),c=["height","width","minHeight","dropzoneText","buttonLabel","buttonVariant","className","multiple","maxFiles","allowedExtensions"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u.apply(null,arguments)}var p=function(e){var t=e.height,n=e.width,r=e.minHeight,a=e.dropzoneText,p=e.buttonLabel,f=e.buttonVariant,d=e.className,b=e.multiple,m=e.maxFiles,y=e.allowedExtensions,h=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,c),g=(0,o.useCallback)((function(e){var t;null===(t=h.onChange)||void 0===t||t.call(h,b?e:e[0])}),[]),v=(0,s.A)(),O=(0,i.VB)({onDrop:g,noClick:!0,noKeyboard:!0,validator:function(e){return!y.length||y.includes(function(e){var t;return null===(t=e.path.split("."))||void 0===t?void 0:t[1]}(e))?null:{code:"invalid-extension",message:v("react.default.error.invalidFileExtension.label","File extension should be one of: ".concat(y.join(", ")),[y.join(", ")])}},multiple:b,maxFiles:m}),w=O.getRootProps,S=O.getInputProps,E=O.open,P=O.acceptedFiles,C=O.fileRejections,j=function(e){return e.map((function(e){var t,n=null!=e&&e.path?e:e.file;return o.createElement("li",{key:n.path},n.path," (",n.size," bytes)",null!=e&&null!==(t=e.errors)&&void 0!==t&&t.length?o.createElement("ul",null,e.errors.map((function(e){return o.createElement("li",{key:e.code},e.message)}))):null)}))};return o.createElement("div",{style:{width:n,height:t,minHeight:r}},o.createElement("div",u({},w({className:"dropzone d-flex flex-column justify-content-center align-items-center p-3 bg-light ".concat(d)}),h),o.createElement("input",S()),o.createElement("h5",{className:"text-secondary font-italic"},v(a.id,a.defaultMessage)),o.createElement(l.A,{className:"mt-3",onClick:E,variant:f,defaultLabel:p.defaultMessage,label:p.id})),P.length?o.createElement("aside",null,o.createElement("h6",{className:"text-success"},v("react.default.acceptedFiles.label","Accepted Files"),":"),o.createElement("ul",null,j(P))):null,C.length?o.createElement("aside",null,o.createElement("h6",{className:"text-danger"},v("react.default.rejectedFiles.label","Rejected Files"),":"),o.createElement("ul",null,j(C))):null)};const f=p;p.propTypes={dropzoneText:a().shape({id:a().string,defaultMessage:a().string}),buttonLabel:a().shape({id:a().string,defaultMessage:a().string}),buttonVariant:a().string,width:a().string,height:a().string,minHeight:a().string,className:a().string,multiple:a().bool,maxFiles:a().number,allowedExtensions:a().arrayOf(a().string)},p.defaultProps={dropzoneText:{id:"react.default.dragDropHere.label",defaultMessage:"Drag and drop file here."},buttonLabel:{id:"react.default.fileDialog.label",defaultMessage:"OPEN FILE DIALOG"},buttonVariant:"grayed",width:"auto",height:"auto",minHeight:"200px",className:"",multiple:!1,maxFiles:null,allowedExtensions:[]}},41670:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Gn});var o=n(96540),r=n(5556),a=n.n(r),i=n(88600),l=n(697),s=n(8949),c=n(2543),u=n.n(c),p=n(90952),f=n(84914),d=n.n(f),b=n(34297),m=n(26216),y=function(e){var t=e.previousPage;return o.createElement(o.Fragment,null,o.createElement("div",{className:"classic-form with-description forecasting"},o.createElement("div",{className:"form-title"},o.createElement(m.A,{id:"react.locationsConfiguration.forecasting.label",defaultMessage:"Forecasting"})),o.createElement("div",{className:"form-subtitle"},o.createElement(m.A,{id:"react.locationsConfiguration.forecast.notsupported.label",defaultMessage:"This section is not supported for the chosen Location Type."}))),o.createElement("div",{className:"submit-buttons"},o.createElement("button",{type:"button",onClick:t,className:"btn btn-outline-primary float-left btn-xs"},o.createElement(m.A,{id:"react.default.button.previous.label",defaultMessage:"Previous"})),o.createElement("button",{type:"submit",className:"btn btn-outline-primary float-right btn-xs"},o.createElement(m.A,{id:"react.default.button.finish.label",defaultMessage:"Finish"}))))};const h=y;y.propTypes={previousPage:a().func.isRequired};var g=n(70373),v=n.n(g),O=n(84976),w=n(50709),S=function(e){var t=e.setShowSuccessMessage,n=e.history,r=e.successMessageOpen;return o.createElement(v(),{isOpen:r,className:"location-modal",onRequestClose:t},o.createElement("div",{className:"success-main"},o.createElement("div",{className:"success-wrapper"},o.createElement("div",{className:"cancel-icon"},o.createElement("i",{className:"fa fa-times","aria-hidden":"true",onClick:t})),o.createElement("div",{className:"success-content"},o.createElement("i",{className:"fa fa-check-circle-o success-icon","aria-hidden":"true"}),o.createElement("h2",null,o.createElement(m.A,{id:"react.locationsConfiguration.success.congratulations",defaultMessage:"Congratulations"})),o.createElement("p",null,o.createElement(m.A,{id:"react.locationsConfiguration.success.subtitle",defaultMessage:"You have created your first location!"})),o.createElement("div",{className:"success-buttons-section d-flex flex-column"},o.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){window.location=w.T3.create()}},o.createElement(m.A,{id:"react.locationsConfiguration.success.createAnother",defaultMessage:"Create another location"})),o.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){window.location=w.SC.list()}},o.createElement(m.A,{id:"react.locationsConfiguration.success.viewLocationList",defaultMessage:"View Location List"})),o.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){return n.push(w.Nj.index())}},o.createElement(m.A,{id:"react.locationsConfiguration.success.createCategoriesAndProducts=",defaultMessage:"Create Categories and Products"})))))))};S.propTypes={setShowSuccessMessage:a().func.isRequired,history:a().shape({push:a().func}).isRequired,successMessageOpen:a().bool.isRequired};const E=(0,O.withRouter)(S);var P=n(43256),C=n(26438);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,R(o.key),o)}}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}var M={expectedLeadTimeDays:{type:b.A,label:"address.address.label",defaultMessage:"Expected Lead Time Days",attributes:{type:"number",withTooltip:!0,tooltip:"react.locationsConfiguration.forecast.expectedLeadTime.tooltip.label"}},replenishmentPeriodDays:{type:b.A,label:"address.address.label",defaultMessage:"Replenishment Period Days",attributes:{type:"number",withTooltip:!0,tooltip:"react.locationsConfiguration.forecast.replenishmentPeriod.tooltip.label"}},demandTimePeriodDays:{type:b.A,label:"address.address.label",defaultMessage:"Demand Time Period Days",attributes:{type:"number",withTooltip:!0,tooltip:"react.locationsConfiguration.forecast.demandTime.tooltip.label"}}},z=function(e){var t=[];return Object.keys(M).reduce((function(n,o){return!e[o]&&t.includes(o)?D(D({},n),{},k({},o,"react.default.error.requiredField.label")):e[o]&&(r=e[o],Number.isNaN(parseFloat(r)))?D(D({},n),{},k({},o,"react.default.error.numericField.label")):e[o]<0?D(D({},n),{},k({},o,"react.default.error.positiveNumberField.label")):n;var r}),{})},q=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=A(t),function(e,t){if(t&&("object"==j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,N()?Reflect.construct(t,n||[],A(e).constructor):t.apply(e,n))}(this,t,[e])).state={values:n.props.initialValues,locationId:n.props.initialValues.locationId,isForecastingSupported:!0,showSuccessMessage:!1},n.setShowSuccessMessage=n.setShowSuccessMessage.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),n=t,(r=[{key:"setShowSuccessMessage",value:function(){this.setState((function(e){return{showSuccessMessage:!e.showSuccessMessage}}))}},{key:"saveForecasting",value:function(e){var t=this;this.props.showSpinner();var n="/api/locations/".concat(this.state.locationId,"/updateForecastingConfiguration");this.props.hideSpinner(),P.Ay.post(n,e).then((function(){t.props.hideSpinner(),d().success(t.props.translate("react.locationsConfiguration.alert.forecastSaveCompleted.label","Forecast values for the location have been set!"),{timeout:3e3}),t.setState({showSuccessMessage:!0})})).catch((function(){return t.props.hideSpinner(),Promise.reject(new Error(t.props.translate("react.locationsConfiguration.forecasting.error.forecastSave.label","Could not set values of forecasting for this location")))}))}},{key:"previousPage",value:function(e){this.props.previousPage(D(D({},this.state.values),{},{forecasting:e}))}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:"d-flex flex-column"},o.createElement(E,{successMessageOpen:this.state.showSuccessMessage,setShowSuccessMessage:this.setShowSuccessMessage}),this.state.isForecastingSupported?o.createElement("div",{className:"configuration-wizard-content flex-column"},o.createElement(p.lV,{onSubmit:function(t){return e.saveForecasting(t)},validate:z,initialValues:u().get(this.state.values,"forecasting"),render:function(t){var n=t.handleSubmit,r=t.values;return o.createElement("form",{onSubmit:n,className:"w-100"},o.createElement("div",{className:"classic-form with-description forecasting"},o.createElement("div",{className:"form-title"},o.createElement(m.A,{id:"react.locationsConfiguration.forecasting.label",defaultMessage:"Forecasting"})),o.createElement("div",{className:"form-subtitle"},o.createElement(m.A,{id:"react.locationsConfiguration.forecasting.additionalTitle.label",defaultMessage:"On this page, you can set default values to use in forecasting for this location. These values are used in the average demand calculation and in the forecast report."})),u().map(M,(function(e,t){return(0,C.bl)(e,t)}))),o.createElement("div",{className:"submit-buttons"},o.createElement("button",{type:"button",onClick:function(){return e.previousPage(r)},className:"btn btn-outline-primary float-left btn-xs"},o.createElement(m.A,{id:"react.default.button.previous.label",defaultMessage:"Previous"})),o.createElement("button",{type:"submit",className:"btn btn-outline-primary float-right btn-xs"},o.createElement(m.A,{id:"react.default.button.finish.label",defaultMessage:"Finish"}))))}})):o.createElement(h,{previousPage:this.props.previousPage}))}}])&&T(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component),_={showSpinner:s.xc,hideSpinner:s.W$};const I=(0,l.Ng)((function(e){return{translate:(0,m.H)((0,i.ro)(e.localize))}}),_)(q);q.propTypes={previousPage:a().func.isRequired,initialValues:a().shape({active:a().bool,name:a().string,locationNumber:a().string,locationType:a().string,organization:a().string,locationGroup:a().string,manager:a().string,locationId:a().string}).isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,translate:a().func.isRequired};var B=n(46857);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function V(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,U(o.key),o)}}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z=function(){return!!e})()}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return(t=U(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}var Y={address:{type:b.A,label:"address.address.label",defaultMessage:"Street address"},address2:{type:b.A,label:"address.address2.label",defaultMessage:"Street address 2"},city:{type:b.A,label:"address.city.label",defaultMessage:"City"},stateOrProvince:{type:b.A,label:"address.stateOrProvince.label",defaultMessage:"State/Province"},postalCode:{type:b.A,label:"address.postalCode.label",defaultMessage:"Postal code"},country:{type:b.A,label:"address.country.label",defaultMessage:"Country"},description:{type:b.A,label:"address.description.label",defaultMessage:"Description"}},X=function(e){return Object.keys(Y).reduce((function(t,n){return e[n]&&e[n].length>255?K(K({},t),{},$({},n,"react.default.error.tooLongInput.label")):t}),{})},J=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=G(t),function(e,t){if(t&&("object"==F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Z()?Reflect.construct(t,n||[],G(e).constructor):t.apply(e,n))}(this,t,[e])).state={values:n.props.initialValues,locationId:n.props.initialValues.locationId},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.match.params.locationId&&this.fetchLocation()}},{key:"fetchLocation",value:function(){var e=this,t="/api/locations/".concat(this.props.match.params.locationId);P.Ay.get(t).then((function(t){var n=t.data.data;e.setState((function(e){return{values:K(K({},e.values),{},{address:n.address})}}))})).catch((function(){return Promise.reject(new Error(e.props.translate("react.locationsConfiguration.error.fetchingLocation","Could not load location data")))}))}},{key:"saveAddressOfLocation",value:function(e,t){var n=this;this.props.showSpinner();var o=(0,P.mu)(e,[null]),r=u().isEmpty(o)?{}:{address:o};P.Ay.post((0,B.GZ)(this.state.locationId),r).then((function(){n.props.hideSpinner(),t(K(K({},n.state.values),{},{address:e,locationId:n.state.locationId}))})).catch((function(){return n.props.hideSpinner(),Promise.reject(new Error(n.props.translate("react.locationsConfiguration.error.addAddress.label","Could not add address")))}))}},{key:"nextPage",value:function(e){var t=this;this.saveAddressOfLocation(e,(function(e){d().success(t.props.translate("react.locationsConfiguration.alert.addressSaveCompleted.label","Address was succesfully added to the location!"),{timeout:3e3}),t.props.nextPage(e)}))}},{key:"previousPage",value:function(e){this.saveAddressOfLocation(e,this.props.previousPage)}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:"d-flex flex-column"},o.createElement("div",{className:"configuration-wizard-content flex-column"},o.createElement(p.lV,{onSubmit:function(t){return e.nextPage(t)},validate:X,initialValues:u().get(this.state.values,"address"),render:function(t){var n=t.values,r=t.handleSubmit;return o.createElement("form",{onSubmit:r,className:"w-100"},o.createElement("div",{className:"classic-form with-description location-address"},o.createElement("div",{className:"form-title"},o.createElement(m.A,{id:"address.label",defaultMessage:"Address"})),o.createElement("div",{className:"form-subtitle"},o.createElement(m.A,{id:"react.locationsConfiguration.address.additionalTitle.label",defaultMessage:"Enter the address for your location below. This address can be referenced in custom purchasing or shipping documentation."})),u().map(Y,(function(e,t){return(0,C.bl)(e,t)}))),o.createElement("div",{className:"submit-buttons"},o.createElement("button",{type:"button",onClick:function(){return e.previousPage(n)},className:"btn btn-outline-primary float-left btn-xs"},o.createElement(m.A,{id:"react.default.button.previous.label",defaultMessage:"Previous"})),o.createElement("button",{type:"submit",className:"btn btn-outline-primary float-right btn-xs"},o.createElement(m.A,{id:"react.default.button.next.label",defaultMessage:"Next"}))))}})))}}])&&V(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component),Q={showSpinner:s.xc,hideSpinner:s.W$};const ee=(0,O.withRouter)((0,l.Ng)((function(e){return{translate:(0,m.H)((0,i.ro)(e.localize))}}),Q)(J));J.propTypes={initialValues:a().shape({active:a().bool,name:a().string,locationNumber:a().string,locationType:a().string,organization:a().string,locationGroup:a().string,manager:a().string,locationId:a().string,zoneTypeId:a().string,binTypeId:a().string}).isRequired,nextPage:a().func.isRequired,previousPage:a().func.isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,locationId:a().string.isRequired,translate:a().func.isRequired,match:a().shape({params:a().shape({locationId:a().string})}).isRequired};var te=n(84615),ne=n(4395),oe=n(35256),re=n(51836),ae=n(40910),ie=function(e){var t=e.value,n=e.onChange,r=t?"#".concat(t):"#ffffff";return o.createElement(re.Tooltip,{html:o.createElement("div",{style:{width:350}},o.createElement(oe.IG,{color:r,onChangeComplete:function(e){var t=e.hex.split("#")[1];n(t)}})),theme:"transparent",arrow:"true",trigger:"click",interactive:!0,delay:"150",duration:"250"},o.createElement("div",{className:"input-group"},o.createElement("div",{className:"input-group-prepend"},o.createElement("span",{className:"input-group-text",style:{backgroundColor:r}},"  ")),o.createElement(ae.A,{value:t,onChange:function(e){return n(e)}}),o.createElement("div",{className:"input-group-append"},o.createElement("button",{type:"button",className:"input-group-text",onClick:function(){return n(null)}},o.createElement("i",{className:"fa fa-close"})))))};const le=ie;function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},se.apply(null,arguments)}ie.propTypes={onChange:a().func.isRequired,value:a().string},ie.defaultProps={value:null};const ce=function(e){return o.createElement(ne.A,se({},e,{renderInput:function(e){return o.createElement(le,e)}}))};var ue=n(26386);function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},pe.apply(null,arguments)}var fe=n(10734);function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return(t=ge(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,ge(o.key),o)}}function ge(e){var t=function(e){if("object"!=de(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==de(t)?t:t+""}function ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ve=function(){return!!e})()}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function Se(e){var t={};return e.name||(t.name="react.default.error.requiredField.label"),t}var Ee={name:{type:b.A,label:"react.locationsConfiguration.name.label",defaultMessage:"Name",attributes:{required:!0,withTooltip:!0,tooltip:"react.locationsConfiguration.locationGroupName.tooltip.label"}}},Pe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=Oe(t),function(e,t){if(t&&("object"==de(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ve()?Reflect.construct(t,n||[],Oe(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(t,e),n=t,(r=[{key:"save",value:function(e){var t=this;if(e.name){this.props.showSpinner();var n={name:e.name};P.Ay.post("/api/locationGroups",n).then((function(n){t.props.hideSpinner(),d().success(t.props.translate("react.locationsConfiguration.alert.locationGroupSaveCompleted.label","Location group was successfully saved!"),{timeout:3e3});var o=n.data.data;t.props.onResponse({id:o.id,name:e.name}),t.props.onClose()})).catch((function(){return t.props.hideSpinner(),Promise.reject(new Error(t.props.translate("react.locationsConfiguration.error.createLocationGroup.label","Could not create location group")))}))}}},{key:"render",value:function(){var e=this;return o.createElement(v(),{isOpen:this.props.isOpen,className:"modal-content",shouldCloseOnOverlayClick:!1},o.createElement("div",null,o.createElement("h4",null,o.createElement(m.A,{id:"react.locationsConfiguration.locationGroupModal.title.label",defaultMessage:"Add new Location Group"})),o.createElement("div",{className:"my-3"},o.createElement(m.A,{id:"react.locationsConfiguration.locationGroupModal.subtitle.label",defaultMessage:"Location groups allow users with large numbers of locations to group them into networks or geographical areas. Depots within a location group will be able to ship to any other depot, but they will only be able to see and ship to receiving locations within their group. Learn more about location groups"}),o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://openboxes.atlassian.net/wiki/spaces/OBW/pages/1744732161/Location+Groups"},o.createElement(m.A,{id:"react.locationsConfiguration.here.label",defaultMessage:"here"})),". "),o.createElement(p.lV,{onSubmit:function(t){return e.save(t)},initialValues:this.initialValues,validate:Se,render:function(t){var n=t.handleSubmit,r=t.values;return o.createElement("form",{id:"modalForm",onSubmit:n},o.createElement("div",{className:"classic-form with-description"},u().map(Ee,(function(t,n){return(0,C.bl)(t,n,me(me({},e.formProps),{},{values:r}))}))),o.createElement("div",{className:"btn-toolbar justify-content-between pt-3"},o.createElement("button",{type:"button",className:"btn btn-outline-primary ml-1",onClick:function(){return e.props.onClose()}},o.createElement(m.A,{id:"Cancel",defaultMessage:"Cancel"})),o.createElement("button",{type:"submit",className:"btn btn-primary align-self-end"},o.createElement(m.A,{id:"Save",defaultMessage:"Save"}))))}})))}}])&&he(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component);const Ce=(0,O.withRouter)((0,l.Ng)((function(e){return{locale:e.session.activeLanguage,translate:(0,m.H)((0,i.ro)(e.localize))}}),{showSpinner:s.xc,hideSpinner:s.W$})(Pe));Pe.propTypes={hideSpinner:a().func.isRequired,isOpen:a().func.isRequired,onClose:a().func.isRequired,onResponse:a().func.isRequired,showSpinner:a().func.isRequired,translate:a().func.isRequired};var je=n(29404);function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t,n){return(t=De(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,De(o.key),o)}}function De(e){var t=function(e){if("object"!=Te(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Te(t)?t:t+""}function ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ke=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Me(e,t)}function ze(e){var t={};return e.name||(t.name="react.default.error.requiredField.label"),t}var qe={name:{type:b.A,label:"react.locationsConfiguration.name.label",defaultMessage:"Name",attributes:{required:!0,withTooltip:!0,tooltip:"react.locationsConfiguration.organizationName.tooltip.label"}},description:{type:je.A,label:"react.locationsConfiguration.description.label",defaultMessage:"Description",attributes:{rows:3,withTooltip:!0,tooltip:"react.locationsConfiguration.organizationDescription.tooltip.label"}}},_e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){return t=Re(t),function(e,t){if(t&&("object"==Te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ke()?Reflect.construct(t,n||[],Re(e).constructor):t.apply(e,n))}(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(t,e),n=t,(r=[{key:"save",value:function(e){var t=this;if(e.name){this.props.showSpinner();var n={name:e.name,description:e.description};P.Ay.post("/api/organizations",n).then((function(n){t.props.hideSpinner(),d().success(t.props.translate("react.locationsConfiguration.alert.organizationSaveCompleted.label","Organization was successfully saved!"),{timeout:3e3});var o=n.data.data;t.props.onResponse({id:o.id,name:e.name}),t.props.onClose()})).catch((function(){return t.props.hideSpinner(),Promise.reject(new Error(t.props.translate("react.locationsConfiguration.error.createOrganization.label","Could not create organization")))}))}}},{key:"render",value:function(){var e=this;return o.createElement(v(),{isOpen:this.props.isOpen,className:"modal-content",shouldCloseOnOverlayClick:!1},o.createElement("div",null,o.createElement("h4",null,o.createElement(m.A,{id:"react.locationsConfiguration.organizationModal.title.label",defaultMessage:"Add new Organization"})),o.createElement("div",{className:"my-3"},o.createElement(m.A,{id:"react.locationsConfiguration.organizationModal.subtitle.label",defaultMessage:"Enter a name and description for your organization. This organization is the company or entity that owns and manages the location. Read more about organizations"}),o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://openboxes.atlassian.net/wiki/spaces/OBW/pages/1291452471/Configure+Organizations+and+Locations"},o.createElement(m.A,{id:"react.locationsConfiguration.here.label",defaultMessage:"here"})),". "),o.createElement(p.lV,{onSubmit:function(t){return e.save(t)},initialValues:this.initialValues,validate:ze,render:function(t){var n=t.handleSubmit,r=t.values;return o.createElement("form",{id:"modalForm",onSubmit:n},o.createElement("div",{className:"classic-form with-description"},u().map(qe,(function(t,n){return(0,C.bl)(t,n,Ae(Ae({},e.formProps),{},{values:r}))}))),o.createElement("div",{className:"btn-toolbar justify-content-between pt-3"},o.createElement("button",{type:"button",className:"btn btn-outline-primary ml-1",onClick:function(){return e.props.onClose()}},o.createElement(m.A,{id:"Cancel",defaultMessage:"Cancel"})),o.createElement("button",{type:"submit",className:"btn btn-primary align-self-end"},o.createElement(m.A,{id:"Save",defaultMessage:"Save"}))))}})))}}])&&xe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component);const Ie=(0,O.withRouter)((0,l.Ng)((function(e){return{locale:e.session.activeLanguage,translate:(0,m.H)((0,i.ro)(e.localize))}}),{showSpinner:s.xc,hideSpinner:s.W$})(_e));_e.propTypes={hideSpinner:a().func.isRequired,isOpen:a().func.isRequired,onClose:a().func.isRequired,onResponse:a().func.isRequired,showSpinner:a().func.isRequired,translate:a().func.isRequired};var Be=n(76477),Fe=n(84079),Ve=n(24178),Ze=n(91019);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,et(o.key),o)}}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}function Xe(e){return Xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xe(e)}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}function Qe(e,t,n){return(t=et(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e){var t=function(e){if("object"!=Ge(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ge(t)?t:t+""}function tt(e){var t,n,o={};return e.name||(o.name="react.default.error.requiredField.label"),e.organization||(o.organization="react.default.error.requiredField.label"),e.locationType||(o.locationType="react.default.error.requiredField.label"),(null===(t=e.supportedActivities)||void 0===t?void 0:t.length)>1&&null!==(n=e.supportedActivities)&&void 0!==n&&n.find((function(e){return e.value===Be.A.NONE}))&&(o.supportedActivities="react.locationsConfiguration.error.supportedActivities.label"),o}var nt={active:{type:te.A,label:"react.locationsConfiguration.locationStatus.label",defaultMessage:"Location Status",attributes:{withLabel:!0,label:"Active"}},name:{type:b.A,label:"react.locationsConfiguration.name.label",defaultMessage:"Name",attributes:{required:!0,withTooltip:!0,tooltip:"react.locationsConfiguration.name.tooltip.label"}},locationNumber:{type:b.A,label:"react.locationsConfiguration.locationNumber.label",defaultMessage:"Location Number",attributes:{withTooltip:!0,tooltip:"react.locationsConfiguration.locationNumber.tooltip.label"}},organization:{type:fe.A,label:"react.locationsConfiguration.organization.label",defaultMessage:"Organization",attributes:{createNewFromModal:!0,createNewFromModalLabel:"react.locationsConfiguration.organizationModal.title.label",defaultMessage:"Add new Organization",async:!0,required:!0,showValueTooltip:!0,openOnClick:!1,autoload:!1,cache:!1,withTooltip:!0,tooltip:"react.locationsConfiguration.organization.tooltip.label",options:[],filterOptions:function(e){return e}},getDynamicAttr:function(e){return{loadOptions:e.debouncedOrganizationsFetch,newOptionModalOpen:e.openNewOrganizationModal,injectionData:e.injectionData}}},locationGroup:{type:fe.A,label:"react.locationsConfiguration.locationGroup.label",defaultMessage:"Location Group",attributes:{createNewFromModal:!0,createNewFromModalLabel:"react.locationsConfiguration.locationGroup.locationModal.title.label",defaultMessage:"Add new Location Group",async:!0,showValueTooltip:!0,openOnClick:!1,autoload:!1,cache:!1,withTooltip:!0,tooltip:"react.locationsConfiguration.locationGroup.tooltip.label",options:[],filterOptions:function(e){return e}},getDynamicAttr:function(e){return{loadOptions:e.debouncedLocationGroupsFetch,newOptionModalOpen:e.openNewLocationGroupModal}}},manager:{type:fe.A,label:"react.locationsConfiguration.manager.label",defaultMessage:"Manager",attributes:{async:!0,showValueTooltip:!0,openOnClick:!1,autoload:!1,cache:!1,options:[],labelKey:"name",filterOptions:function(e){return e}},getDynamicAttr:function(e){return{loadOptions:e.debouncedPeopleFetch}}}},ot={logoFile:{type:function(e){return o.createElement(ne.A,pe({},e,{renderInput:function(e){var t=e.value,n=e.onChange,r=(0,ue.VB)({onDrop:function(e){e&&e.length&&n(e[0])},noClick:!0,noKeyboard:!0}),a=r.getRootProps,i=r.getInputProps,l=r.open;return o.createElement("div",{className:"form-element-container"},o.createElement("div",pe({},a(),{className:"form-control form-control-xs file-field"}),o.createElement("input",i()),o.createElement("div",null,o.createElement("button",{onClick:l,type:"button",className:"btn btn-primary btn-xs"},o.createElement(m.A,{id:"react.default.button.chooseFile.label",defaultMessage:"Choose File"})),o.createElement("span",{className:"ml-3"},t?t.name:o.createElement(m.A,{id:"react.default.button.noFileChosen.label",defaultMessage:"No file chosen"})))))}}))},label:"react.locationsConfiguration.locationLogo.label",defaultMessage:"Upload Logo",attributes:{withTooltip:!0,tooltip:"react.locationsConfiguration.locationLogo.tooltip.label"}},bgColor:{type:ce,label:"react.locationsConfiguration.backgroundColor.label",defaultMessage:"Background color",attributes:{withTooltip:!0,tooltip:"react.locationsConfiguration.color.tooltip.label"}},fgColor:{type:ce,label:"react.locationsConfiguration.foregroundColor.label",defaultMessage:"Foreground color",attributes:{withTooltip:!0,tooltip:"react.locationsConfiguration.color.tooltip.label"}}},rt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qe(n=function(e,t,n){return t=Xe(t),function(e,t){if(t&&("object"==Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ye()?Reflect.construct(t,n||[],Xe(e).constructor):t.apply(e,n))}(this,t,[e]),"dataFetched",!1),n.state={showOrganizationModal:!1,showLocationGroupModal:!1,values:n.props.initialValues,useDefaultActivities:!1!==n.props.initialValues.useDefaultActivities,locationTypes:[],supportedActivities:[],supportLinks:{}},n.openNewOrganizationModal=n.openNewOrganizationModal.bind(n),n.openNewLocationGroupModal=n.openNewLocationGroupModal.bind(n),n.debouncedPeopleFetch=(0,Ve.tF)(n.props.debounceTime,n.props.minSearchLength),n.debouncedLocationGroupsFetch=(0,Ve.zU)(n.props.debounceTime,n.props.minSearchLength),n.debouncedOrganizationsFetch=(0,Ve.A0)(n.props.debounceTime,n.props.minSearchLength,[],!0),n.getSupportLinks=n.getSupportLinks.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.setInitialValues(),this.fetchLocationTypes(),this.getSupportLinks(),this.props.locConfTranslationsFetched&&(this.dataFetched=!0,this.fetchSupportedActivities()),this.props.match.params.locationId&&this.fetchLocation()}},{key:"componentWillReceiveProps",value:function(e){!this.dataFetched&&e.locConfTranslationsFetched&&(this.dataFetched=!0,this.fetchSupportedActivities())}},{key:"setInitialValues",value:function(){u().isEmpty(this.props.initialValues)&&this.setState({values:{active:!0}})}},{key:"getSupportLinks",value:function(){var e=this;P.Ay.get("/api/supportLinks").then((function(t){var n=t.data.data;e.setState({supportLinks:n})}))}},{key:"getSupportedActivities",value:function(e){var t=this;return u().chain(e).get("supportedActivities").map((function(e){return{value:e,label:t.props.translate("react.locationsConfiguration.ActivityCode.".concat(e),e)}})).value()}},{key:"fetchLocation",value:function(){var e=this,t="/api/locations/".concat(this.props.match.params.locationId);P.Ay.get(t).then((function(t){var n=t.data.data;n?e.setState((function(t){return{values:$e($e($e({},t.values),{},{locationId:e.props.match.params.locationId},n),{},{locationGroup:n.locationGroup?{value:n.locationGroup.id,id:n.locationGroup.id,name:n.locationGroup.name,label:n.locationGroup.name}:"",manager:n.manager?n.manager:"",locationType:n.locationType?{value:n.locationType.id,id:n.locationType.id,name:n.locationType.name,label:(0,Ze.Ay)(n.locationType.name,e.props.locale)}:"",supportedActivities:u().map(n.supportedActivities,(function(t){return{value:t,label:e.props.translate("react.locationsConfiguration.ActivityCode.".concat(t),t)}})),organization:{value:n.organization.id,id:n.organization.id,name:n.organization.name,label:"".concat(n.organization.code," ").concat(n.organization.name)}})}})):e.props.history.push(w.T3.create())})).catch((function(){return Promise.reject(new Error(e.props.translate("react.locationsConfiguration.error.fetchingLocation","Could not load location data")))}))}},{key:"fetchLocationTypes",value:function(){var e=this;P.Ay.get("/api/locations/locationTypes").then((function(t){var n=t.data.data,o=u().map(n,(function(t){var n=We(u().split(t.name,"|fr:"),2),o=n[0],r=n[1];return $e($e({},t),{},{label:"fr"===e.props.locale&&r?r:o})}));if(e.state.values.locationType)e.setState({locationTypes:o});else{var r=u().find(o,(function(e){return u().startsWith(e.name,"Depot")})),a=e.getSupportedActivities(r);e.setState((function(e){return{locationTypes:o,values:$e($e({},e.values),{},{locationType:r,supportedActivities:a})}}))}}))}},{key:"fetchSupportedActivities",value:function(){var e=this;P.Ay.get("/api/locations/supportedActivities").then((function(t){var n=t.data.data,o=u().map(n,(function(t){return{value:t,label:e.props.translate("react.locationsConfiguration.ActivityCode.".concat(t),t)}}));e.setState({supportedActivities:o})}))}},{key:"openNewOrganizationModal",value:function(){this.setState({showOrganizationModal:!0})}},{key:"openNewLocationGroupModal",value:function(){this.setState({showLocationGroupModal:!0})}},{key:"saveLocationDetails",value:function(e){var t=this;if(e.name&&e.organization){this.props.showSpinner();var n;n=e.locationId?"/api/locations/".concat(e.locationId,"?useDefaultActivities=").concat(this.state.useDefaultActivities):"/api/locations?useDefaultActivities=".concat(this.state.useDefaultActivities);var o=$e($e({},e),{},{supportedActivities:u().map(e.supportedActivities,(function(e){return e.value}))});P.Ay.post(n,o).then((function(n){t.props.hideSpinner(),d().success(t.props.translate("react.locationsConfiguration.alert.locationSaveCompleted.label","Location was successfully saved!"),{timeout:3e3});var o=n.data.data;t.props.history.push(w.T3.edit(o.id)),t.props.nextPage($e($e({},e),{},{locationId:o.id,useDefaultActivities:t.state.useDefaultActivities}))})).catch((function(){return t.props.hideSpinner(),Promise.reject(new Error(t.props.translate("react.stockMovement.error.createStockMovement.label","Could not create location")))}))}else this.props.hideSpinner()}},{key:"nextPage",value:function(e){var t,n,o=this;e.logoFile?(this.props.showSpinner(),(t=e.logoFile,n=new FileReader,n.readAsDataURL(t),new Promise((function(e,t){n.onload=function(){return e(n.result.split(",")[1])},n.onerror=function(e){return t(e)}}))).then((function(t){o.saveLocationDetails($e($e({},e),{},{logo:t}))}))):this.saveLocationDetails(e)}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:"configuration-wizard-content flex-column"},o.createElement(p.lV,{onSubmit:function(t){return e.nextPage(t)},validate:tt,initialValues:this.state.values,mutators:{setLocationGroupValue:function(e,t,n){var o=We(e,1)[0],r=o.id,a=o.name,i={id:r,label:a,name:a,value:r};n.changeValue(t,"locationGroup",(function(){return i}))},setOrganizationValue:function(e,t,n){var o=We(e,1)[0],r=o.id,a=o.name,i={id:r,label:a,name:a,value:r};n.changeValue(t,"organization",(function(){return i}))},resetSupportedActivities:function(t,n,o){var r=We(t,1)[0],a=e.getSupportedActivities(r);o.changeValue(n,"supportedActivities",(function(){return a}))}},render:function(t){var n=t.form.mutators,r=n.resetSupportedActivities,a=n.setLocationGroupValue,i=n.setOrganizationValue,l=t.handleSubmit,s=t.values;return o.createElement("div",null,o.createElement(Ie,{isOpen:e.state.showOrganizationModal,onClose:function(){return e.setState({showOrganizationModal:!1})},onResponse:i}),o.createElement(Ce,{isOpen:e.state.showLocationGroupModal,onClose:function(){return e.setState({showLocationGroupModal:!1})},onResponse:a}),o.createElement("form",{onSubmit:l,className:"w-100"},o.createElement("div",{className:"classic-form with-description"},o.createElement("div",{className:"form-title"},o.createElement(m.A,{id:"react.locationsConfiguration.details.label",defaultMessage:"Details"})),o.createElement("div",{className:"form-subtitle"},o.createElement(m.A,{id:"react.locationsConfiguration.additionalTitle.label",defaultMessage:"Fill in the details for your location. Click the question mark next to the field name to find out more."})),u().map(nt,(function(t,n){return(0,C.bl)(t,n,{active:s.active,debouncedLocationGroupsFetch:e.debouncedLocationGroupsFetch,debouncedOrganizationsFetch:e.debouncedOrganizationsFetch,debouncedPeopleFetch:e.debouncedPeopleFetch,openNewOrganizationModal:e.openNewOrganizationModal,openNewLocationGroupModal:e.openNewLocationGroupModal,injectionData:e.state.supportLinks})})),o.createElement("div",{className:"form-title"},o.createElement(m.A,{id:"react.locationsConfiguration.typeAndActivities.label",defaultMessage:"Location Type and Supported Activities"})),o.createElement("div",{className:"form-subtitle"},o.createElement("span",null,o.createElement(m.A,{id:"react.locationsConfiguration.typeAndActivitiesDescription.label"})," ",o.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://openboxes.atlassian.net/wiki/spaces/OBW/pages/1744633857/Location+Types+and+Supported+Activities"},o.createElement(m.A,{id:"react.locationsConfiguration.here.label",defaultMessage:"here"})),".")),o.createElement(fe.A,{fieldName:"locationType",fieldConfig:{label:"react.locationsConfiguration.locationType.label",defaultMessage:"Location Type",attributes:{className:"multi-select",required:!0,valueKey:"id",withTooltip:!0,tooltip:"react.locationsConfiguration.locationType.tooltip.label"},getDynamicAttr:function(e){return{options:e.locationTypes,onChange:function(e){r(e)}}}},locationTypes:e.state.locationTypes}),o.createElement("div",{className:"d-flex w-100 ml-1 pt-2 justify-content-between align-items-center"},o.createElement(Fe.A,{id:"useDefaultActivities",value:e.state.useDefaultActivities,onChange:function(t){return e.setState({useDefaultActivities:t})},withLabel:!0,label:e.props.translate("react.locationsConfiguration.useDefaultActivities.label","Use default settings for Supported Activities")}),o.createElement("button",{type:"button",className:"btn btn-primary btn-xs",onClick:function(){e.setState({useDefaultActivities:!0}),r(s.locationType)}},o.createElement("span",null,o.createElement("i",{className:"fa fa-refresh pr-2"}),o.createElement(m.A,{id:"react.locationsConfiguration.resetToDefault.label",defaultMessage:"Reset to default settings"})))),o.createElement("div",{className:"location-supported-activities"},o.createElement(fe.A,{fieldName:"supportedActivities",fieldConfig:{attributes:{multi:!0},getDynamicAttr:function(e){var t=e.supportedActivities;return{disabled:e.useDefaultActivities,options:t}}},supportedActivities:e.state.supportedActivities,useDefaultActivities:e.state.useDefaultActivities})),o.createElement("div",{className:"form-title"},o.createElement(m.A,{id:"react.locationsConfiguration.style.label",defaultMessage:"Style"})),o.createElement("div",{className:"form-subtitle"},o.createElement(m.A,{id:"react.locationsConfiguration.styleDescription.label",defaultMessage:"Set a custom logo and color scheme. For depot locations only."})),u().map(ot,(function(e,t){return(0,C.bl)(e,t)}))),o.createElement("div",{className:"submit-buttons"},o.createElement("button",{type:"submit",onClick:function(){e.state.useDefaultActivities&&r(s.locationType)},className:"btn btn-outline-primary float-right btn-xs"},o.createElement(m.A,{id:"react.default.button.next.label",defaultMessage:"Next"})))))}}))}}])&&Ue(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component);const at=(0,O.withRouter)((0,l.Ng)((function(e){return{location:e.session.currentLocation,locale:e.session.activeLanguage,isSuperuser:e.session.isSuperuser,translate:(0,m.H)((0,i.ro)(e.localize)),debounceTime:e.session.searchConfig.debounceTime,debouncedLocationTypesFetch:e.session.searchConfig,minSearchLength:e.session.searchConfig.minSearchLength,locConfTranslationsFetched:e.session.fetchedTranslations.locationsConfiguration,user:e.session.user}}),{showSpinner:s.xc,hideSpinner:s.W$,fetchUsers:s.hU})(rt));rt.propTypes={initialValues:a().shape({active:a().bool,useDefaultActivities:a().bool,name:a().string,locationNumber:a().string,locationType:a().string,organization:a().string,locationGroup:a().string,manager:a().string}).isRequired,nextPage:a().func.isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,debounceTime:a().number.isRequired,minSearchLength:a().number.isRequired,translate:a().func.isRequired,locConfTranslationsFetched:a().bool.isRequired,locale:a().string.isRequired,match:a().shape({params:a().shape({locationId:a().string})}).isRequired,history:a().shape({push:a().func}).isRequired};var it=n(23350),lt=n(38798),st=n(32885),ct=n.n(st),ut=n(25824);function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e,t,n){return(t=yt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,yt(o.key),o)}}function yt(e){var t=function(e){if("object"!=pt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pt(t)?t:t+""}function ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ht=function(){return!!e})()}function gt(e){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gt(e)}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}var Ot={binPages:-1,binLoading:!0},wt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=gt(t),function(e,t){if(t&&("object"==pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ht()?Reflect.construct(t,n||[],gt(e).constructor):t.apply(e,n))}(this,t,[e])).state=dt({},Ot),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=[{Header:"Status",accessor:"active",minWidth:30,className:"active-circle",headerClassName:"header",Cell:function(e){return e.original.active?o.createElement("i",{className:"fa fa-check-circle green-circle","aria-hidden":"true"}):o.createElement("i",{className:"fa fa-times-circle grey-circle","aria-hidden":"true"})}},{Header:"Name",accessor:"name",className:"cell",headerClassName:"header text-align-left"},{Header:"Bin Type",accessor:"locationType.name",className:"cell",headerClassName:"header text-align-left"},{Header:"Zone location",accessor:"zoneName",minWidth:50,className:"cell",headerClassName:"header text-align-left"},{Header:"Actions",minWidth:20,accessor:"actions",className:"action-cell",headerClassName:"header ",Cell:function(t){return o.createElement("div",{className:"d-flex justify-content-center align-items-center"},o.createElement(ut.A,{onSave:function(t){return e.props.handleLocationEdit(t)},fields:e.props.FIELDS,validate:e.props.validate,initialValues:dt(dt({},t.original),{},{locationType:t.original.locationType,zoneLocation:{id:t.original.zoneId,name:t.original.zoneName}}),formProps:{binTypes:e.props.binTypes,zoneData:e.props.zoneData},title:"react.locationsConfiguration.editBin.label",defaultTitleMessage:"Edit Bin Location",btnSaveDefaultText:"Save",btnOpenAsIcon:!0,btnOpenIcon:"fa-pencil",btnOpenClassName:"action-icons icon-pointer",btnContainerClassName:"d-flex justify-content-end",btnContainerStyle:{gap:"3px"},btnSaveClassName:"btn btn-primary",btnCancelClassName:"btn btn-outline-primary"},o.createElement("div",{className:"form-subtitle mb-lg-4"},o.createElement(m.A,{id:"react.locationsConfiguration.editBin.additionalTitle.label",defaultMessage:"Bin locations represent a physical storage location within a depot. Bins are defined by a unique name or code that indicates the position within the depot. Common bin names might include a pallet position number, rack number, or shelf action."}))),o.createElement("i",{className:"fa fa-trash-o action-icons icon-pointer","aria-hidden":"true",onClick:function(){return e.props.deleteLocation(t.original)}}))}}];return o.createElement(ct(),{data:this.props.binData,ref:this.props.refBinTable,columns:t,loading:this.state.binLoading,pages:this.state.binPages,defaultPageSize:10,manual:!0,className:"-striped -highlight zoneTable",resizable:!1,sortable:!1,multiSort:!1,previousText:o.createElement("i",{className:"fa fa-chevron-left","aria-hidden":"true"}),nextText:o.createElement("i",{className:"fa fa-chevron-right","aria-hidden":"true"}),pageText:"",onFetchData:function(t){var n=t.page>0?t.page*t.pageSize:0;P.Ay.get("/api/internalLocations/search",{paramsSerializer:function(e){return lt.A.stringify(e)},params:{locationTypeCode:["BIN_LOCATION","INTERNAL"],offset:"".concat(n),max:"".concat(t.pageSize),"parentLocation.id":"".concat(e.props.currentLocationId),includeInactive:!0}}).then((function(n){e.setState({binLoading:!1,binPages:Math.ceil(n.data.totalCount/t.pageSize)}),e.props.updateBinData(n.data.data)})).catch((function(){return Promise.reject(new Error(e.props.translate("react.locationsConfiguration.error.binList.label","Could not get list of bin locations")))}))}})}}])&&mt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component);wt.propTypes={currentLocationId:a().string.isRequired,translate:a().func.isRequired,binData:a().shape([]).isRequired,updateBinData:a().func.isRequired,handleLocationEdit:a().func.isRequired,deleteLocation:a().func.isRequired,FIELDS:a().shape({}).isRequired,validate:a().func.isRequired,binTypes:a().shape([]).isRequired,refBinTable:a().oneOfType([a().func,a().shape({current:a().instanceOf(Element)})]).isRequired,zoneData:a().shape([]).isRequired};const St=(0,l.Ng)((function(e){return{translate:(0,m.H)((0,i.ro)(e.localize))}}))(wt);function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(e,t,n){return(t=Nt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Nt(o.key),o)}}function Nt(e){var t=function(e){if("object"!=Et(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Et(t)?t:t+""}function At(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(At=function(){return!!e})()}function Lt(e){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lt(e)}function xt(e,t){return xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xt(e,t)}var Dt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=Lt(t),function(e,t){if(t&&("object"==Et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,At()?Reflect.construct(t,n||[],Lt(e).constructor):t.apply(e,n))}(this,t,[e])).state={values:{active:!0}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xt(e,t)}(t,e),n=t,(r=[{key:"handleSubmit",value:function(e){var t=this;this.props.showSpinner(),P.Ay.post("/api/locations/",(0,P.iR)(Ct(Ct({},e),{},{parentLocation:{id:this.props.locationId},locationType:{id:e.locationType.id},zone:e.zoneLocation&&{id:e.zoneLocation.id}}))).then((function(){t.props.hideSpinner(),d().success(t.props.translate("react.locationsConfiguration.addBin.success.label","Bin location has been created successfully!"),{timeout:3e3}),t.props.addBinLocation()})).catch((function(){return t.props.hideSpinner(),Promise.reject(new Error(t.props.translate("react.locationsConfiguration.addBin.error.label","Could not add bin location")))}))}},{key:"render",value:function(){var e=this;return o.createElement(ut.A,{onSave:function(t){return e.handleSubmit(t)},fields:this.props.FIELDS,validate:this.props.validate,initialValues:1===this.props.binTypes.length?Ct(Ct({},this.state.values),{},{locationType:this.props.binTypes[0]}):this.state.values,formProps:{binTypes:this.props.binTypes,zoneData:this.props.zoneData},title:"react.locationsConfiguration.addBin.label",defaultTitleMessage:"Add Bin Location",btnSaveDefaultText:"Save",btnOpenClassName:"btn btn-outline-primary add-zonebin-btn",btnOpenText:"react.locationsConfiguration.addBin.label",btnOpenDefaultText:"Add Bin Location",btnOpenIcon:"fa-plus",btnContainerClassName:"d-flex justify-content-end",btnContainerStyle:{gap:"3px"},btnSaveClassName:"btn btn-primary",btnCancelClassName:"btn btn-outline-primary"},o.createElement("div",{className:"form-subtitle mb-lg-4"},o.createElement(m.A,{id:"react.locationsConfiguration.editBin.additionalTitle.label",defaultMessage:"Bin locations represent a physical storage location within a depot. Bins are defined by a unique name or code that indicates the position within the depot. Common bin names might include a pallet position number, rack number, or shelf action."})))}}])&&Tt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component),kt={showSpinner:s.xc,hideSpinner:s.W$};Dt.propTypes={locationId:a().string.isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,translate:a().func.isRequired,addBinLocation:a().func.isRequired,FIELDS:a().shape({}).isRequired,validate:a().func.isRequired,binTypes:a().shape([]).isRequired,zoneData:a().shape([]).isRequired};const Rt=(0,l.Ng)((function(e){return{translate:(0,m.H)((0,i.ro)(e.localize))}}),kt)(Dt);function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){_t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _t(e,t,n){return(t=Bt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function It(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Bt(o.key),o)}}function Bt(e){var t=function(e){if("object"!=Mt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mt(t)?t:t+""}function Ft(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ft=function(){return!!e})()}function Vt(e){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vt(e)}function Zt(e,t){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zt(e,t)}var Gt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=Vt(t),function(e,t){if(t&&("object"==Mt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ft()?Reflect.construct(t,n||[],Vt(e).constructor):t.apply(e,n))}(this,t,[e])).state={values:{active:!0}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(t,e),n=t,(r=[{key:"handleSubmit",value:function(e){var t=this;this.props.showSpinner(),P.Ay.post("/api/locations/",(0,P.iR)(qt(qt({},e),{},{parentLocation:{id:this.props.locationId},locationType:{id:e.locationType.id}}))).then((function(){t.props.hideSpinner(),d().success(t.props.translate("react.locationsConfiguration.addZone.success.label","Zone location has been created successfully!"),{timeout:3e3}),t.props.addZoneLocation()})).catch((function(){return t.props.hideSpinner(),Promise.reject(new Error(t.props.translate("react.locationsConfiguration.addZone.error.label","Could not add zone location")))}))}},{key:"render",value:function(){var e=this;return o.createElement(ut.A,{onSave:function(t){return e.handleSubmit(t)},fields:this.props.FIELDS,validate:this.props.validate,initialValues:1===this.props.zoneTypes.length?qt(qt({},this.state.values),{},{locationType:this.props.zoneTypes[0]}):this.state.values,formProps:{zoneTypes:this.props.zoneTypes},title:"react.locationsConfiguration.addZone.label",defaultTitleMessage:"Add Zone Location",btnSaveDefaultText:"Save",btnOpenClassName:"btn btn-outline-primary add-zonebin-btn",btnOpenText:"react.locationsConfiguration.addZone.label",btnOpenDefaultText:"Add Zone Location",btnOpenIcon:"fa-plus",btnContainerClassName:"d-flex justify-content-end",btnContainerStyle:{gap:"3px"},btnSaveClassName:"btn btn-primary",btnCancelClassName:"btn btn-outline-primary"},o.createElement("div",{className:"form-subtitle mb-lg-4"},o.createElement(m.A,{id:"react.locationsConfiguration.addZone.additionalTitle.label",defaultMessage:"Zones are large areas within a depot encompassing multiple bin locations. They may represent different rooms or buildings within a depot space. To remove a zone from your depot, uncheck the box to mark it as inactive."})))}}])&&It(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component),Wt={showSpinner:s.xc,hideSpinner:s.W$};Gt.propTypes={locationId:a().string.isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,translate:a().func.isRequired,addZoneLocation:a().func.isRequired,FIELDS:a().shape({}).isRequired,validate:a().func.isRequired,zoneTypes:a().shape([]).isRequired};const Ht=(0,l.Ng)((function(e){return{translate:(0,m.H)((0,i.ro)(e.localize))}}),Wt)(Gt);var Kt=n(5419),$t=n.n(Kt),Ut=n(38727);function Yt(e){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(e)}function Xt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Jt(o.key),o)}}function Jt(e){var t=function(e){if("object"!=Yt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yt(t)?t:t+""}function Qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qt=function(){return!!e})()}function en(e){return en=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},en(e)}function tn(e,t){return tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tn(e,t)}var nn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=en(t),function(e,t){if(t&&("object"==Yt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qt()?Reflect.construct(t,n||[],en(e).constructor):t.apply(e,n))}(this,t,[e])).state={file:null,supportLinks:{}},n.onDrop=n.onDrop.bind(n),n.importBinLocation=n.importBinLocation.bind(n),n.getSupportLinks=n.getSupportLinks.bind(n),n.downloadBinLocationsTemplate=n.downloadBinLocationsTemplate.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.getSupportLinks()}},{key:"onDrop",value:function(e){this.setState({file:e})}},{key:"getSupportLinks",value:function(){var e=this;P.Ay.get("/api/supportLinks").then((function(t){var n=t.data.data;e.setState({supportLinks:n})}))}},{key:"downloadBinLocationsTemplate",value:function(){var e=this;this.props.showSpinner(),P.Ay.get("/api/locations/binLocations/template",{responseType:"blob"}).then((function(t){$t()(t.data,"BinLocations_template.xls","application/vnd.ms-excel"),e.props.hideSpinner()})).catch((function(){return e.props.hideSpinner()}))}},{key:"importBinLocation",value:function(){var e=this;this.props.showSpinner();var t=new FormData;t.append("fileContents",this.state.file);var n="/api/locations/".concat(this.props.locationId,"/binLocations/import");return P.Ay.post(n,t,{headers:{"content-type":"multipart/form-data"}}).then((function(){e.props.hideSpinner(),d().success(e.props.translate("react.locationsConfiguration.importBinLocations.successMessage.label","Bin Location imported successfully")),e.setState({file:void 0}),e.props.onResponse()})).catch((function(){e.props.hideSpinner()}))}},{key:"render",value:function(){return o.createElement(ut.A,{onSave:this.importBinLocation,btnOpenClassName:"btn btn-outline-primary add-zonebin-btn",btnOpenText:"react.locationsConfiguration.importBin.label",btnOpenDefaultText:"Import Bin Locations",btnOpenIcon:"fa-download",title:"react.locationsConfiguration.importBin.label",defaultTitleMessage:"Import Bin Location",btnContainerClassName:"d-flex justify-content-between",btnSaveClassName:"btn btn-primary",btnCancelClassName:"btn btn-outline-primary",btnSaveText:"default.button.import.label",btnSaveDefaultText:"Import",btnSaveDisabled:!this.state.file},o.createElement("div",{className:"form-subtitle mb-lg-4"},o.createElement(m.A,{id:"react.locationsConfiguration.importBinLocations.importInstruction1.label"})," ",o.createElement("a",{href:"#",onClick:this.downloadBinLocationsTemplate},o.createElement(m.A,{id:"react.locationsConfiguration.importBinLocations.here.label",defaultMessage:"here"})),". ",o.createElement(m.A,{id:"react.locationsConfiguration.importBinLocations.importInstruction2.label",data:this.state.supportLinks,options:{renderInnerHtml:!0}}),o.createElement(Ut.A,{className:"my-3",onChange:this.onDrop})))}}])&&Xt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component),on={showSpinner:s.xc,hideSpinner:s.W$};nn.propTypes={locationId:a().string.isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,translate:a().func.isRequired,onResponse:a().func.isRequired};const rn=(0,l.Ng)((function(e){return{translate:(0,m.H)((0,i.ro)(e.localize))}}),on)(nn);function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cn(e,t,n){return(t=pn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,pn(o.key),o)}}function pn(e){var t=function(e){if("object"!=an(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=an(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==an(t)?t:t+""}function fn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(fn=function(){return!!e})()}function dn(e){return dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dn(e)}function bn(e,t){return bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bn(e,t)}var mn={zonePages:-1,zoneLoading:!0},yn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=dn(t),function(e,t){if(t&&("object"==an(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fn()?Reflect.construct(t,n||[],dn(e).constructor):t.apply(e,n))}(this,t,[e])).state=sn({},mn),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=[{Header:"Status",accessor:"active",minWidth:30,className:"active-circle",headerClassName:"header",Cell:function(e){return e.original.active?o.createElement("i",{className:"fa fa-check-circle green-circle","aria-hidden":"true"}):o.createElement("i",{className:"fa fa-times-circle grey-circle","aria-hidden":"true"})}},{Header:"Name",accessor:"name",className:"cell",headerClassName:"header text-align-left"},{Header:"Location Type",accessor:"locationType.locationTypeCode",className:"cell",headerClassName:"header text-align-left"},{Header:"Actions",minWidth:20,accessor:"actions",className:"action-cell",headerClassName:"header ",Cell:function(t){return o.createElement("div",{className:"d-flex justify-content-center align-items-center"},o.createElement(ut.A,{onSave:function(t){return e.props.handleLocationEdit(t)},fields:e.props.FIELDS,validate:e.props.validate,initialValues:sn(sn({},t.original),{},{locationType:t.original.locationType}),formProps:{zoneTypes:e.props.zoneTypes},title:"react.locationsConfiguration.editZone.label",defaultTitleMessage:"Edit Zone Location",btnSaveDefaultText:"Save",btnOpenAsIcon:!0,btnOpenIcon:"fa-pencil",btnOpenClassName:"action-icons",btnContainerClassName:"d-flex justify-content-end",btnContainerStyle:{gap:"3px"},btnSaveClassName:"btn btn-primary",btnCancelClassName:"btn btn-outline-primary"},o.createElement("div",{className:"form-subtitle mb-lg-4"},o.createElement(m.A,{id:"react.locationsConfiguration.addZone.additionalTitle.label",defaultMessage:"Zones are large areas within a depot encompassing multiple bin locations. They may represent different rooms or buildings within a depot space. To remove a zone from your depot, uncheck the box to mark it as inactive."}))),o.createElement("i",{className:"fa fa-trash-o action-icons icon-pointer","aria-hidden":"true",onClick:function(){return e.props.deleteLocation(t.original)}}))}}];return o.createElement(ct(),{data:this.props.zoneData,ref:this.props.refZoneTable,columns:t,loading:this.state.zoneLoading,pages:this.state.zonePages,defaultPageSize:5,manual:!0,className:"-striped -highlight zoneTable",resizable:!1,sortable:!1,multiSort:!1,previousText:o.createElement("i",{className:"fa fa-chevron-left","aria-hidden":"true"}),nextText:o.createElement("i",{className:"fa fa-chevron-right","aria-hidden":"true"}),pageText:"",onFetchData:function(t){var n=t.page>0?t.page*t.pageSize:0;P.Ay.get("/api/internalLocations/search",{params:{locationTypeCode:"ZONE",offset:"".concat(n),max:"".concat(t.pageSize),"parentLocation.id":"".concat(e.props.currentLocationId),includeInactive:!0}}).then((function(n){e.setState({zoneLoading:!1,zonePages:Math.ceil(n.data.totalCount/t.pageSize)}),e.props.updateZoneData(n.data.data)})).catch((function(){return Promise.reject(new Error(e.props.translate("react.locationsConfiguration.error.zoneList.label","Could not get list of zones")))}))}})}}])&&un(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component);yn.propTypes={currentLocationId:a().string.isRequired,translate:a().func.isRequired,zoneData:a().shape([]).isRequired,updateZoneData:a().func.isRequired,handleLocationEdit:a().func.isRequired,deleteLocation:a().func.isRequired,FIELDS:a().shape({}).isRequired,validate:a().func.isRequired,zoneTypes:a().shape([]).isRequired,refZoneTable:a().oneOfType([a().func,a().shape({current:a().instanceOf(Element)})]).isRequired};const hn=(0,l.Ng)((function(e){return{translate:(0,m.H)((0,i.ro)(e.localize))}}))(yn);function gn(e){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(e)}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function On(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Tn(o.key),o)}}function wn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wn=function(){return!!e})()}function Sn(e){return Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sn(e)}function En(e,t){return En=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},En(e,t)}function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jn(e,t,n){return(t=Tn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tn(e){var t=function(e){if("object"!=gn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=gn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gn(t)?t:t+""}var Nn={active:{type:te.A,label:"react.locationsConfiguration.addZone.status.label",defaultMessage:"Status",attributes:{withLabel:!0,label:"Active"}},name:{type:b.A,label:"react.locationsConfiguration.name.label",defaultMessage:"Name",attributes:{required:!0,withTooltip:!0,tooltip:"react.locationsConfiguration.addZone.name.tooltip.label"}},locationType:{type:fe.A,label:"react.locationsConfiguration.zoneType.label",defaultMessage:"Zone Type",attributes:{required:!0,valueKey:"id",labelKey:"name"},getDynamicAttr:function(e){return{options:e.zoneTypes}}}},An={active:{type:te.A,label:"react.locationsConfiguration.addZone.status.label",defaultMessage:"Status",attributes:{withLabel:!0,label:"Active"}},name:{type:b.A,label:"react.locationsConfiguration.name.label",defaultMessage:"Name",attributes:{required:!0,withTooltip:!0,tooltip:"react.locationsConfiguration.addZone.name.tooltip.label"}},locationType:{type:fe.A,label:"react.locationsConfiguration.binType.label",defaultMessage:"Bin Type",attributes:{required:!0,valueKey:"id",labelKey:"name"},getDynamicAttr:function(e){return{options:e.binTypes}}},zoneLocation:{type:fe.A,label:"react.locationsConfiguration.zoneLocation.label",defaultMessage:"Zone Location",attributes:{valueKey:"id",labelKey:"name"},getDynamicAttr:function(e){return{options:e.zoneData}}}},Ln=function(e){var t=["name","locationType"];return Object.keys(Nn).reduce((function(n,o){return!e[o]&&t.includes(o)?Cn(Cn({},n),{},jn({},o,"react.default.error.requiredField.label")):n}),{})},xn=function(e){var t=["name","locationType"];return Object.keys(An).reduce((function(n,o){return!e[o]&&t.includes(o)?Cn(Cn({},n),{},jn({},o,"react.default.error.requiredField.label")):n}),{})},Dn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=Sn(t),function(e,t){if(t&&("object"==gn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wn()?Reflect.construct(t,n||[],Sn(e).constructor):t.apply(e,n))}(this,t,[e])).state={zoneData:[],binData:[],values:n.props.initialValues,zoneTypes:[],binTypes:[]},n.updateZoneData=n.updateZoneData.bind(n),n.updateBinData=n.updateBinData.bind(n),n.refetchBinTable=n.refetchBinTable.bind(n),n.refetchZoneTable=n.refetchZoneTable.bind(n),n.deleteLocation=n.deleteLocation.bind(n),n.handleLocationEdit=n.handleLocationEdit.bind(n),n.refBinTable=o.createRef(),n.refZoneTable=o.createRef(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&En(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.fetchBinAndZoneTypes()}},{key:"fetchBinAndZoneTypes",value:function(){var e=this;P.Ay.get("/api/locations/locationTypes").then((function(t){var n=t.data.data,o=u().map(n,(function(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(u().split(t.name,"|fr:"),2),o=n[0],r=n[1];return Cn(Cn({},t),{},{label:"fr"===e.props.locale&&r?r:o})})),r=o.filter((function(e){return"BIN_LOCATION"===e.locationTypeCode||"INTERNAL"===e.locationTypeCode})),a=o.filter((function(e){return"ZONE"===e.locationTypeCode}));e.setState({binTypes:r,zoneTypes:a})})).catch((function(){return Promise.reject(new Error(e.props.translate("react.locationsConfiguration.error.fetchingBinAndZoneTypes","Could not load location types")))}))}},{key:"handleLocationEdit",value:function(e){var t=this;this.props.showSpinner();var n={name:e.name,parentLocation:{id:e.parentLocation.id},active:e.active,locationType:{id:e.locationType.id},zone:e.zoneLocation&&{id:e.zoneLocation.id}};P.Ay.post("/api/locations/".concat(e.id),(0,P.iR)(n)).then((function(){t.props.hideSpinner(),"ZONE"!==e.locationType.locationTypeCode?t.binEditCallback():t.zoneEditCallback()})).catch((function(){return t.props.hideSpinner(),Promise.reject(new Error(t.props.translate("react.locationsConfiguration.editZone.error.label","Could not edit zone location")))}))}},{key:"zoneEditCallback",value:function(){d().success(this.props.translate("react.locationsConfiguration.editZone.success.label","Zone location has been edited successfully!"),{timeout:3e3}),this.refZoneTable.current.fireFetchData()}},{key:"binEditCallback",value:function(){d().success(this.props.translate("react.locationsConfiguration.editBin.success.label","Bin location has been edited successfully!"),{timeout:3e3}),this.refBinTable.current.fireFetchData()}},{key:"refetchBinTable",value:function(){this.refBinTable.current.fireFetchData()}},{key:"refetchZoneTable",value:function(){this.refZoneTable.current.fireFetchData()}},{key:"deleteLocation",value:function(e){var t=this;(0,it.ZX)({title:this.props.translate("react.locationsConfiguration.deleteZoneConfirm.title.label","Deleting a location"),message:this.props.translate("react.locationsConfiguration.deleteZoneConfirm.subtitle.label","If you press 'Yes', this will delete the location. If you decide not to delete the location, press 'No'"),buttons:[{label:this.props.translate("react.default.yes.label","Yes"),onClick:function(){P.Ay.delete("/api/locations/".concat(e.id)).then((function(){"ZONE"!==e.locationType.locationTypeCode?t.refetchBinTable():t.refetchZoneTable()})).catch((function(){return"ZONE"===e.locationType.locationTypeCode?Promise.reject(new Error(t.props.translate("react.locationsConfiguration.deleteZone.error.label","Could not delete zone location"))):Promise.reject(new Error(t.props.translate("react.locationsConfiguration.deleteBin.error.label","Could not delete bin location")))}))}},{label:this.props.translate("react.default.no.label","No")}]})}},{key:"updateZoneData",value:function(e){this.setState({zoneData:e})}},{key:"updateBinData",value:function(e){this.setState({binData:e})}},{key:"nextPage",value:function(){this.props.nextPage(this.state.values)}},{key:"previousPage",value:function(){this.props.previousPage(this.state.values)}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:"d-flex flex-column"},o.createElement("div",{className:"configuration-wizard-content flex-column"},o.createElement("div",{className:"classic-form with-description"},o.createElement("div",{className:"form-title"},o.createElement(m.A,{id:"react.locationsConfiguration.zone.label",defaultMessage:"Zone Locations"})),o.createElement("div",{className:"form-subtitle zone-subtitle"},o.createElement("div",null,o.createElement(m.A,{id:"react.locationsConfiguration.zone.additionalTitle1.label",defaultMessage:"Zones are large areas within a depot encompassing multiple bin locations. They may represent different rooms or buildings within a depot space."})),o.createElement("div",null,o.createElement(m.A,{id:"react.locationsConfiguration.zone.additionalTitle2.label",defaultMessage:"Zones are optional; bin locations can be entered with or without a zone location."}))),o.createElement("div",{className:"submit-buttons"},o.createElement(Ht,{FIELDS:Nn,validate:Ln,locationId:this.props.initialValues.locationId,addZoneLocation:this.refetchZoneTable,zoneTypes:this.state.zoneTypes})),o.createElement(hn,{zoneData:this.state.zoneData,updateZoneData:this.updateZoneData,currentLocationId:this.props.initialValues.locationId,handleLocationEdit:this.handleLocationEdit,deleteLocation:this.deleteLocation,FIELDS:Nn,validate:Ln,zoneTypes:this.state.zoneTypes,refZoneTable:this.refZoneTable})),o.createElement("div",{className:"classic-form with-description"},o.createElement("div",{className:"form-title"},o.createElement(m.A,{id:"react.locationsConfiguration.bin.label",defaultMessage:"Bin Locations"})),o.createElement("div",{className:"form-subtitle"},o.createElement(m.A,{id:"react.locationsConfiguration.bin.additionalTitle.label",defaultMessage:"Bin locations represent a physical storage location within a depot. Inventory within the depot is tracked and picked by bin location."})),o.createElement("div",{className:"d-flex bin-buttons"},o.createElement(Rt,{FIELDS:An,validate:xn,locationId:this.props.initialValues.locationId,addBinLocation:this.refetchBinTable,binTypes:this.state.binTypes,zoneData:this.state.zoneData}),o.createElement(rn,{locationId:this.props.initialValues.locationId,onResponse:this.refetchBinTable}),o.createElement("button",{type:"button",className:"btn-xs btn btn-outline-primary add-zonebin-btn"},o.createElement("i",{className:"fa fa-arrow-up mr-1","aria-hidden":"true"}),o.createElement(m.A,{id:"react.locationsConfiguration.exportBinLocations.label",defaultMessage:"Export Bin Locations"}))),o.createElement(St,{binData:this.state.binData,updateBinData:this.updateBinData,currentLocationId:this.props.initialValues.locationId,handleLocationEdit:this.handleLocationEdit,deleteLocation:this.deleteLocation,FIELDS:An,validate:xn,binTypes:this.state.binTypes,refBinTable:this.refBinTable,zoneData:this.state.zoneData})),o.createElement("div",{className:"submit-buttons d-flex justify-content-between"},o.createElement("button",{type:"button",onClick:function(){return e.previousPage()},className:"btn btn-outline-primary float-left btn-xs"},o.createElement(m.A,{id:"react.default.button.previous.label",defaultMessage:"Previous"})),o.createElement("button",{type:"button",onClick:function(){return e.nextPage()},className:"btn btn-outline-primary float-left btn-xs"},o.createElement(m.A,{id:"react.default.button.next.label",defaultMessage:"Next"})))))}}])&&On(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component),kn={showSpinner:s.xc,hideSpinner:s.W$};const Rn=(0,l.Ng)((function(e){return{translate:(0,m.H)((0,i.ro)(e.localize)),locale:e.session.activeLanguage}}),kn)(Dn);Dn.propTypes={nextPage:a().func.isRequired,previousPage:a().func.isRequired,translate:a().func.isRequired,initialValues:a().shape({active:a().bool,name:a().string,locationNumber:a().string,locationType:a().string,organization:a().string,locationGroup:a().string,manager:a().string,locationId:a().string,zoneTypeId:a().string}).isRequired,showSpinner:a().func.isRequired,hideSpinner:a().func.isRequired,locale:a().string.isRequired};var Mn=n(80461);function zn(e){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(e)}function qn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_n(o.key),o)}}function _n(e){var t=function(e){if("object"!=zn(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zn(t)?t:t+""}function In(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(In=function(){return!!e})()}function Bn(e){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bn(e)}function Fn(e,t){return Fn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fn(e,t)}var Vn={locationDetails:"Location Details",locationAddress:"Address",zoneAndBinLocations:"Zone and Bin Locations",forecasting:"Forecasting"},Zn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=Bn(t),function(e,t){if(t&&("object"==zn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,In()?Reflect.construct(t,n||[],Bn(e).constructor):t.apply(e,n))}(this,t,[e])).state={values:{},currentPage:1},n.updateWizardValues=n.updateWizardValues.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.fetchTranslations("","locationsConfiguration")}},{key:"componentWillReceiveProps",value:function(e){this.props.locale&&this.props.locale!==e.locale&&this.props.fetchTranslations(e.locale,"locationsConfiguration")}},{key:"stepList",get:function(){return[this.props.translate("react.locationsConfiguration.locationDetails.label","Details"),this.props.translate("react.locationsConfiguration.address.label","Address"),this.props.translate("react.locationsConfiguration.zoneAndBin.label","Zone and Bin Locations"),this.props.translate("react.locationsConfiguration.forecasting.label","Forecasting")]}},{key:"updateWizardValues",value:function(e,t){this.setState({currentPage:e,values:t})}},{key:"render",value:function(){var e=this.state,t=e.values,n=e.currentPage,r=[at,ee,Rn,I],a=this.props.history;return o.createElement(Mn.A,{pageList:r,stepList:this.stepList,initialValues:t,currentPage:n,prevPage:1===n?1:n-1,updateWizardValues:this.updateWizardValues,additionalProps:{history:a,supportLinks:Vn}})}}])&&qn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component);const Gn=(0,l.Ng)((function(e){return{locale:e.session.activeLanguage,location:e.session.currentLocation,translate:(0,m.H)((0,i.ro)(e.localize))}}),{fetchTranslations:s.dj})(Zn);Zn.propTypes={locale:a().string.isRequired,fetchTranslations:a().func.isRequired,translate:a().func.isRequired,history:a().shape({push:a().func}).isRequired}},80461:(e,t,n)=>{n.d(t,{A:()=>E});var o=n(96540),r=n(5556),a=n.n(r),i=n(697);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(null,arguments)}var s=function(e){var t=e.pageList[e.currentPage-1];return o.createElement("div",{className:"panel-body m-4","data-testid":"wizardPage"},o.createElement(t,l({initialValues:e.initialValues,nextPage:e.nextPage,previousPage:e.prevPage,goToPage:e.goToPage},e.additionalProps)))};const c=s;s.propTypes={pageList:a().arrayOf(a().func).isRequired,nextPage:a().func.isRequired,prevPage:a().func.isRequired,goToPage:a().func.isRequired,currentPage:a().number.isRequired,initialValues:a().shape({}),additionalProps:a().shape({})},s.defaultProps={initialValues:{},additionalProps:{}};var u=n(2543),p=n.n(u),f=function(e){return o.createElement("div",{className:"steps-main-box"},o.createElement("div",{className:"steps-inside-wrapper"},p().map(e.steps,(function(t,n){return o.createElement("div",{key:n,className:"step-container ".concat(e.currentStep===n+1?"active":""),"data-testid":"wizard-step","data-stepstate":e.currentStep===n+1?"active":"inactive"},o.createElement("div",{className:e.showStepNumber?"circle filled":"circle",onClick:function(){return e.onClick(n+1)},onKeyPress:function(){return e.onClick(n+1)},role:"button",tabIndex:"0",disabled:!e.stepsClickable},e.showStepNumber&&o.createElement("span",{className:"number"},n+1)),o.createElement("div",{className:"step-name"},t))}))))};const d=f;f.propTypes={steps:a().arrayOf(a().string).isRequired,currentStep:a().number.isRequired,onClick:a().func,stepsClickable:a().bool,showStepNumber:a().bool},f.defaultProps={onClick:function(e){return e},stepsClickable:!1,showStepNumber:!1};var b=function(e){return e.title||e.additionalTitle?o.createElement("div",{className:"panel-heading movement-number","data-testid":"wizardTitle"},e.title?o.createElement("div",null,p().map(e.title,(function(e){return o.createElement("span",{key:e.text,style:{color:e.color}},e.text,o.createElement("span",{style:{color:"black"}},e.delimeter))}))):null,e.additionalTitle):null};const m=b;function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,g(o.key),o)}}function g(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}b.propTypes={title:a().arrayOf(a().shape({})).isRequired,additionalTitle:a().oneOf([a().string,a().func])},b.defaultProps={additionalTitle:null};var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=O(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}(this,t,[e])).state={currentPage:n.props.currentPage||1,prevPage:n.props.prevPage||1,values:n.props.initialValues},n.nextPage=n.nextPage.bind(n),n.prevPage=n.prevPage.bind(n),n.goToPage=n.goToPage.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),n=t,(r=[{key:"componentWillReceiveProps",value:function(e){e.currentPage!==this.props.currentPage&&this.goToPage(e.currentPage,e.initialValues)}},{key:"nextPage",value:function(e){var t=this.state.currentPage;this.props.pageList.length>t?(this.setState({prevPage:t,currentPage:t+1,values:e}),this.props.updateWizardValues(t+1,e)):(this.setState({values:e}),this.props.updateWizardValues(t,e))}},{key:"prevPage",value:function(e){var t=this.state.prevPage;t>0?(this.setState({prevPage:t-1,currentPage:t,values:e}),this.props.updateWizardValues(t,e)):(this.setState({values:e}),this.props.updateWizardValues(1,e))}},{key:"goToPage",value:function(e,t){this.setState({prevPage:e-1,currentPage:e,values:t}),this.props.updateWizardValues(e,t)}},{key:"render",value:function(){var e=this.state,t=e.currentPage,n=e.values,r=this.props,a=r.title,i=r.pageList,l=r.stepList,s=r.additionalTitle,u=r.additionalProps,p=r.showStepNumber;return o.createElement("div",{className:"content-wrap","data-testid":"content-wrap"},o.createElement(m,{title:a,additionalTitle:s,values:n}),o.createElement(d,{steps:l,currentStep:t,showStepNumber:p}),o.createElement("div",{className:"panel panel-primary"},o.createElement(c,{pageList:i,currentPage:t,initialValues:n,nextPage:this.nextPage,prevPage:this.prevPage,goToPage:this.goToPage,additionalProps:u})))}}])&&h(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o.Component);const E=(0,i.Ng)((function(e){return{locale:e.session.activeLanguage,stockMovementTranslationsFetched:e.session.fetchedTranslations.stockMovement,hasPackingSupport:e.session.currentLocation.hasPackingSupport}}),{})(S);S.propTypes={initialValues:a().shape({shipmentStatus:a().string}),title:a().arrayOf(a().shape({})).isRequired,additionalTitle:a().oneOf([a().string,a().func]),currentPage:a().number.isRequired,prevPage:a().number.isRequired,pageList:a().arrayOf(a().func).isRequired,stepList:a().arrayOf(a().string).isRequired,updateWizardValues:a().func,additionalProps:a().shape({}),showStepNumber:a().bool},S.defaultProps={initialValues:{},additionalProps:{},additionalTitle:null,updateWizardValues:function(){},showStepNumber:!1}},84079:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(96540),r=n(5556),a=n.n(r),i=n(26216),l=["value","indeterminate","custom","fieldRef","withLabel","label","defaultMessage"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(null,arguments)}var c=function(e){var t=e.value,n=e.indeterminate,r=e.custom,a=e.fieldRef,c=e.withLabel,u=e.label,p=e.defaultMessage,f=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,l),d=function(e){var t=e.target.checked;f.onChange&&f.onChange(t)};return r?o.createElement("div",{"data-testid":"custom-checkbox",className:"custom-checkbox"},o.createElement("label",{htmlFor:f.id},o.createElement("input",s({id:f.id,type:"checkbox",ref:a,checked:t},f,{onChange:d})))):c?o.createElement("div",{"data-testid":"with-label-checkbox",className:"d-flex align-items-center"},o.createElement("input",s({type:"checkbox",ref:function(e){e&&(e.indeterminate=n),a&&a(e)},checked:t},f,{onChange:d})),o.createElement("label",{htmlFor:f.id,style:{margin:"0 0 0 5px"}},o.createElement(i.A,{id:u,defaultMessage:p||u}))):o.createElement("input",s({"data-testid":"checkbox",type:"checkbox",ref:function(e){e&&(e.indeterminate=n),a&&a(e)},checked:t},f,{onChange:d}))};const u=c;c.propTypes={onChange:a().func,value:a().bool,indeterminate:a().bool,custom:a().bool,id:a().string,fieldRef:a().func,withLabel:a().bool,label:a().string,defaultMessage:a().string},c.defaultProps={onChange:null,value:null,indeterminate:!1,custom:!1,id:"",fieldRef:void 0,withLabel:!1,label:"",defaultMessage:""}},84615:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(96540),r=n(4395),a=n(84079),i=["value"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(null,arguments)}const s=function(e){return o.createElement(r.A,l({},e,{renderInput:function(e){var t=e.value,n=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,i);return o.createElement(a.A,l({},n,{value:t||!1}))}}))}}}]);
//# sourceMappingURL=bundle.929af1b45eb780bfc503.1670.js.map