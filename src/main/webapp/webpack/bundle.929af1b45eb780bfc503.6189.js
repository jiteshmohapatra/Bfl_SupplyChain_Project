/*! For license information please see bundle.929af1b45eb780bfc503.6189.js.LICENSE.txt */
"use strict";(self.webpackChunkopenboxes=self.webpackChunkopenboxes||[]).push([[6189],{10734:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(96540),o=r(4395),i=r(66792),a=["className"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}const c=function(e){return n.createElement(o.A,l({},e,{renderInput:function(e){var t=e.className,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,a);return n.createElement(i.A,l({name:r.id},r,{className:"select-xs ".concat(t),classNamePrefix:"react-select"}))}}))}},13266:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(76477),o=r(60532),i=r(85728);const a=function(e,t,r){var a,l,c,s=(null==e?void 0:e.id)===(null==t||null===(a=t.requestedBy)||void 0===a?void 0:a.id),u=r.id===(null==t||null===(l=t.origin)||void 0===l?void 0:l.id),f=r.id===(null==t||null===(c=t.destination)||void 0===c?void 0:c.id);return(0,i.xY)(null==r?void 0:r.supportedActivities,n.A.APPROVE_REQUEST)?[o.A.APPROVED,o.A.PACKED,o.A.PICKED,o.A.PICKING].includes(null==t?void 0:t.statusCode)?u:s&&(f||u)&&t.statusCode!==o.A.REJECTED:!!u||f&&s}},29404:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(96540),o=r(4395),i=r(5556),a=r.n(i),l=["onChange","className","fieldRef","isResizable"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(null,arguments)}var s=function(e){var t=e.onChange,r=e.className,o=void 0===r?"":r,i=e.fieldRef,a=e.isResizable,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return n.createElement("textarea",c({ref:i,onKeyPress:function(e){13===e.which&&e.preventDefault()},className:"form-control form-control-xs ".concat(o," resizable-").concat(a)},s,{onChange:function(e){var r=e.target.value;t&&t(r)}}))};const u=s;function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(null,arguments)}s.propTypes={onChange:a().func,className:a().string,fieldRef:a().func,isResizable:a().bool},s.defaultProps={isResizable:!0,onChange:null,className:"",fieldRef:null};const d=function(e){return n.createElement(o.A,f({},e,{renderInput:function(e){return n.createElement(u,e)}}))}},60532:(e,t,r)=>{r.d(t,{A:()=>n});const n={CREATED:"CREATED",REQUESTING:"REQUESTING",REQUESTED:"REQUESTED",PENDING_APPROVAL:"PENDING_APPROVAL",VALIDATING:"VALIDATING",VALIDATED:"VALIDATED",APPROVED:"APPROVED",PICKING:"PICKING",PICKED:"PICKED",CHECKING:"CHECKING",CHECKED:"CHECKED",PACKED:"PACKED",REVIEWING:"REVIEWING",DISPATCHED:"DISPATCHED",CANCELED:"CANCELED",REJECTED:"REJECTED"}},74554:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Fe});var n=r(96540),o=r(5556),i=r.n(o),a=r(697),l=r(84976),c=r(8949),s=r(8089),u=r(66592),f=r(39802);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h=function(e){return m(m({requisitionStatusCode:{type:u.A,attributes:{multi:!0,filterElement:!0,placeholder:"react.stockMovement.outbound.filters.requisitionStatus.label",defaultPlaceholder:"Requisition Status",showLabelTooltip:!0,closeMenuOnSelect:!1,blurInputOnSelect:!1},getDynamicAttr:function(e){return{options:e.requisitionStatuses}}},origin:{type:u.A,attributes:{valueKey:"id",filterElement:!0,placeholder:"react.stockMovement.origin.label",defaultPlaceholder:"Origin",options:[],showLabelTooltip:!0,disabled:!0}},destination:{type:u.A,attributes:{async:!0,openOnClick:!1,autoload:!1,cache:!1,valueKey:"id",labelKey:"name",options:[],filterOptions:function(e){return e},filterElement:!0,placeholder:"react.stockMovement.destination.label",defaultPlaceholder:"Destination",showLabelTooltip:!0},getDynamicAttr:function(e){return{loadOptions:e.fetchLocations}}},shipmentType:{type:u.A,attributes:{multi:!0,filterElement:!0,placeholder:"react.stockMovement.shipmentType.label",defaultPlaceholder:"Shipment type",showLabelTooltip:!0,options:[],blurInputOnSelect:!1,closeMenuOnSelect:!1,valueKey:"id",labelKey:"displayName"},getDynamicAttr:function(e){return{options:e.shipmentTypes}}},requestedBy:{type:u.A,attributes:{async:!0,openOnClick:!1,autoload:!1,cache:!1,valueKey:"id",labelKey:"name",options:[],filterOptions:function(e){return e},filterElement:!0,placeholder:"react.stockMovement.requestedBy.label",defaultPlaceholder:"Requested By",showLabelTooltip:!0},getDynamicAttr:function(e){return{loadOptions:e.fetchPeople}}}},e&&{approver:{type:u.A,attributes:{show:!1,openOnClick:!1,autoload:!1,cache:!1,valueKey:"id",labelKey:"name",options:[],filterOptions:function(e){return e},filterElement:!0,placeholder:"react.stockMovement.request.approvers.label",defaultPlaceholder:"Approvers",showLabelTooltip:!0,multi:!0,nullOption:!0,nullOptionDefaultLabel:"None"},getDynamicAttr:function(e){return{options:e.approvers}}}}),{},{createdBy:{type:u.A,attributes:{async:!0,openOnClick:!1,autoload:!1,cache:!1,valueKey:"id",labelKey:"name",options:[],filterOptions:function(e){return e},filterElement:!0,placeholder:"react.stockMovement.createdBy.label",defaultPlaceholder:"Created By",showLabelTooltip:!0},getDynamicAttr:function(e){return{loadOptions:e.fetchUsers}}},updatedBy:{type:u.A,attributes:{async:!0,openOnClick:!1,autoload:!1,cache:!1,valueKey:"id",labelKey:"name",options:[],filterOptions:function(e){return e},filterElement:!0,placeholder:"react.stockMovement.updatedBy.label",defaultPlaceholder:"Updated By",showLabelTooltip:!0},getDynamicAttr:function(e){return{loadOptions:e.fetchUsers}}},requestType:{type:u.A,attributes:{openOnClick:!1,options:[{label:"STOCK",value:"STOCK"},{label:"ADHOC",value:"ADHOC"}],filterElement:!0,placeholder:"react.stockMovement.outbound.filters.requestType.label",defaultPlaceholder:"Request type",showLabelTooltip:!0}},createdAfter:{type:s.A,attributes:{label:"react.stockMovement.filter.createdAfter.label",defaultMessage:"Created after",localizeDate:!0,localizedDateFormat:f.A.COMMON,filterElement:!0,dateFormat:"MM/DD/YYYY"}},createdBefore:{type:s.A,attributes:{label:"react.stockMovement.filter.createdBefore.label",defaultMessage:"Created before",localizeDate:!0,localizedDateFormat:f.A.COMMON,filterElement:!0,dateFormat:"MM/DD/YYYY"}}})};var y=r(35546),b=r(24178);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return(t=function(e){var t=function(e){if("object"!=g(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=function(e){var t=e.setFilterParams,r=e.debounceTime,o=e.minSearchLength,i=e.formProps,a=e.filterFields,l=e.defaultValues,c=(0,n.useCallback)((0,b.wY)(r,o),[r,o]),s=(0,n.useCallback)((0,b.tF)(r,o),[r,o]),u=(0,n.useCallback)((0,b.Uq)(r,o,[],!0,!1,!1),[r,o]);return n.createElement("div",{className:"d-flex flex-column list-page-filters"},n.createElement(y.A,{searchFieldId:"q",searchFieldPlaceholder:"react.stockMovement.search.placeholder.label",searchFieldDefaultPlaceholder:"Search by requisition number, name etc.",filterFields:a,defaultValues:l,ignoreClearFilters:["origin","direction","sourceType"],updateFilterParams:function(e){return t(O({},e))},hidden:!1,formProps:O(O({},i),{},{fetchUsers:c,fetchLocations:u,fetchPeople:s})}))},A={fetchStatuses:c.dL};const P=(0,a.Ng)((function(e){return{debounceTime:e.session.searchConfig.debounceTime,minSearchLength:e.session.searchConfig.minSearchLength}}),A)(S);S.propTypes={setFilterParams:i().func.isRequired,debounceTime:i().number.isRequired,minSearchLength:i().number.isRequired,filterFields:i().shape({}).isRequired,defaultValues:i().shape({}).isRequired,formProps:i().shape({}).isRequired};var q=r(42164),k=r(50709),C=r(26216),R=function(e){var t=e.showMyStockMovements,r=e.isRequestsOpen;return n.createElement("div",{className:"d-flex list-page-header"},n.createElement("span",{className:"d-flex align-self-center title"},r?n.createElement(C.A,{id:"react.stockMovement.request.list.label",defaultMessage:"Request List"}):n.createElement(C.A,{id:"react.stockMovement.outbound.list.label",defaultMessage:"Outbound Movement List"})),n.createElement("div",{className:"d-flex justify-content-end buttons align-items-center"},n.createElement(q.A,{defaultLabel:"My Stock Movements",variant:"primary-outline",label:"react.stockMovement.myStockMovement.label",onClick:t}),n.createElement(l.N_,{className:"primary-button",to:k.ti.createOutbound()},n.createElement(C.A,{id:"react.stockMovement.createStockMovement.label",defaultMessage:"Create Stock Movement"}))))};R.propTypes={showMyStockMovements:i().func.isRequired,isRequestsOpen:i().bool.isRequired};const j=R;var M=r(41357),L=r(88600),x=r(61965),T=r(6016),D=r(85297),N=r(70373),I=r.n(N),B=r(2543),F=r.n(B),U=r(90952),_=r(10734),G=r(29404),K=r(26438),V={recipient:{type:_.A,label:"react.default.to.label",defaultMessage:"to",attributes:{async:!0,valueKey:"id",labelKey:"name",className:"request-modal-select text-capitalize",options:[],filterOptions:function(e){return e}},getDynamicAttr:function(e){return{loadOptions:e.debouncedPeopleFetch}}},sender:{type:_.A,label:"react.default.from.label",defaultMessage:"from",attributes:{className:"request-modal-select text-capitalize",disabled:!0}},comment:{type:G.A,label:"react.rejectRequestModal.comment.label",defaultMessage:"Comment",attributes:{rows:7,className:"request-modal-textarea",required:!0,isResizable:!1}}},H=function(e){var t=e.currentUser,r=e.requestor,o=e.debounceTime,i=e.minSearchLength,a=e.closeRejectionModal,l=e.rejectRequest,c={sender:{id:null==t?void 0:t.id,label:null==t?void 0:t.name},recipient:{id:null==r?void 0:r.id,label:null==r?void 0:r.name}},s=(0,n.useCallback)((0,b.tF)(o,i),[o,i]);return n.createElement(U.lV,{onSubmit:function(e){l(e),a()},validate:function(e){return null!=e&&e.comment?{}:{comment:"react.default.error.requiredField.label"}},initialValues:c,render:function(e){var t=e.handleSubmit,r=e.values;return n.createElement("form",{id:"modalForm",onSubmit:t},n.createElement("div",{className:"classic-form location-field-rows"},F().map(V,(function(e,t){return(0,K.bl)(e,t,{values:r,debouncedPeopleFetch:s})}))),n.createElement("div",{className:"btn-toolbar justify-content-between"},n.createElement(q.A,{type:"button",onClick:a,defaultLabel:"Cancel",label:"react.default.button.cancel.label"}),n.createElement(q.A,{type:"submit",defaultLabel:"Confirm reject",label:"react.rejectRequestModal.confirmReject.label"})))}})};const Y=(0,a.Ng)((function(e){return{currentUser:e.session.user,debounceTime:e.session.searchConfig.debounceTime,minSearchLength:e.session.searchConfig.minSearchLength}}))(H);H.propTypes={currentUser:i().shape({id:i().string.isRequired,name:i().string.isRequired}).isRequired,requestor:i().shape({id:i().string.isRequired,name:i().string.isRequired}).isRequired,debounceTime:i().number.isRequired,minSearchLength:i().number.isRequired,closeRejectionModal:i().func.isRequired,rejectRequest:i().func.isRequired};var z=function(e){var t=e.identifier;return n.createElement("div",{className:"header"},n.createElement("h4",{className:"title"},n.createElement(C.A,{id:"react.rejectRequestModal.provideReason.label",defaultMessage:"Please provide a reason for rejecting request"}),":",t))};const W=z;z.propTypes={identifier:i().string.isRequired};var J=function(e){var t=e.request,r=e.isOpenRejectionModal,o=e.closeRejectionModal,i=e.rejectRequest;return n.createElement(I(),{isOpen:r,className:"modal-content",shouldCloseOnOverlayClick:!1},n.createElement("div",null,n.createElement(W,{identifier:null==t?void 0:t.identifier}),n.createElement(Y,{requestor:null==t?void 0:t.requestedBy,closeRejectionModal:o,rejectRequest:i(null==t?void 0:t.id,null==t?void 0:t.identifier)})))};const Q=J;J.propTypes={request:i().shape({id:i().string.isRequired,requestedBy:i().shape({id:i().string.isRequired,name:i().string.isRequired})}).isRequired,isOpenRejectionModal:i().bool.isRequired,closeRejectionModal:i().func.isRequired,rejectRequest:i().func.isRequired};var $=r(76477),X=r(36307),Z=r(23350),ee=r(84914),te=r.n(ee),re=r(76191),ne=r(46857),oe=r(33152),ie=r(70317),ae=r(85204),le=r(55216);function ce(){ce=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),l=new j(n||[]);return o(a,"_invoke",{value:q(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",v="completed",h={};function y(){}function b(){}function g(){}var E={};s(E,a,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(M([])));w&&w!==r&&n.call(w,a)&&(E=w);var S=g.prototype=y.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==fe(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function q(t,r,n){var o=d;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=k(l,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?v:p,s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(fe(t)+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},A(P.prototype),s(P.prototype,l,(function(){return this})),t.AsyncIterator=P,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new P(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(S),s(S,c,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function se(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function ue(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){se(i,n,o,a,l,"next",e)}function l(e){se(i,n,o,a,l,"throw",e)}a(void 0)}))}}function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return(t=function(e){var t=function(e){if("object"!=fe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ve=r(94731),he=r(99236),ye=r(13266),be=r(22715),ge=r(85728);function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ee.apply(null,arguments)}function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Se=function(e){var t=e.filterParams,r=e.translate,o=e.requisitionStatuses,i=e.currentLocation,l=e.currentUser,s=e.isRequestsOpen,u=e.isUserAdmin,d=e.isUserRequestApprover,p=function(e){var t=(0,ae.A)({filterParams:e,url:ne.eI,errorMessageId:"react.stockMovement.outbound.fetching.error",defaultErrorMessage:"Unable to fetch outbound movements",getParams:function(t){var r,n,o=t.offset,i=t.state,a=t.sortingParams,l=e.requisitionStatusCode,c=e.requestType,s=e.origin,u=e.destination,f=e.requestedBy,d=e.createdBy,p=e.updatedBy,m=e.shipmentType,v=e.approver;return F().omitBy(pe(pe({},e),{},{offset:"".concat(o),max:"".concat(i.pageSize),requisitionStatusCode:l&&l.map((function(e){return e.id})),requestType:null==c?void 0:c.value,origin:null==s?void 0:s.id,destination:null==u?void 0:u.id,requestedBy:null==f?void 0:f.id,createdBy:null==d?void 0:d.id,updatedBy:null==p?void 0:p.id,shipmentType:null==m||null===(r=m.map)||void 0===r?void 0:r.call(m,(function(e){return e.id})),approver:null==v||null===(n=v.map)||void 0===n?void 0:n.call(v,(function(e){return e.id}))},a),(function(e){return!("object"!==fe(e)||!F().isEmpty(e))||!e}))}}),r=t.tableRef,o=t.fireFetchData,i=t.loading,l=t.tableData,s=t.onFetchHandler,u=(0,a.wA)(),f=(0,a.d4)((function(e){return{isRequisitionStatusesFetched:e.requisitionStatuses.fetched,requisitionStatuses:e.requisitionStatuses.data,translate:(0,C.H)((0,L.ro)(e.localize))}})),d=f.isRequisitionStatusesFetched,p=f.requisitionStatuses,m=f.translate;(0,n.useEffect)((function(){d&&p.length||u((0,c.dL)())}),[]);var v=function(){var e=ue(ce().mark((function e(t){var r;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u((0,c.xc)()),e.prev=1,e.next=4,re.A.deleteStockMovement(t);case 4:204===e.sent.status&&(r=m("react.stockMovement.deleted.success.message.label","Stock Movement has been deleted successfully"),te().success(r),o());case 7:return e.prev=7,u((0,c.W$)()),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=ue(ce().mark((function e(t,r){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u((0,c.xc)()),e.prev=1,e.next=4,re.A.updateStatus(t,X.A.APPROVED);case 4:(0,oe.A)(ie.A.SUCCESS)({message:"You have successfully Approved the request ".concat(r)}),o();case 6:return e.prev=6,u((0,c.W$)()),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=ue(ce().mark((function e(t){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u((0,c.xc)()),e.prev=1,e.next=4,re.A.rollbackApproval(t);case 4:(0,oe.A)(ie.A.SUCCESS)({message:"Successfully rolled back approval"}),o();case 6:return e.prev=6,u((0,c.W$)()),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})));return function(t){return e.apply(this,arguments)}}();return{tableData:l,tableRef:r,loading:i,onFetchHandler:s,exportStockMovements:function(){(0,le.A)({url:ne.eI,params:l.currentParams})},exportPendingShipmentItems:function(){(0,le.A)({url:ne.d2,params:l.currentParams})},deleteConfirmAlert:function(e){var t={label:m("react.default.yes.label","Yes"),onClick:function(){return v(e)}},r={label:m("react.default.no.label","No")};(0,Z.ZX)({title:m("react.default.areYouSure.label","Are you sure?"),message:m("react.stockMovement.areYouSure.label","Are you sure you want to delete this Stock Movement?"),buttons:[t,r]})},approveRequest:h,rejectRequest:function(e,t){return function(){var r=ue(ce().mark((function r(n){var i,a,l;return ce().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=n.sender,a=n.recipient,l=n.comment,u((0,c.xc)()),r.prev=2,r.next=5,re.A.rejectRequest({id:e,sender:null==i?void 0:i.id,recipient:null==a?void 0:a.id,comment:l});case 5:(0,oe.A)(ie.A.SUCCESS)({message:"You have successfully Rejected the request ".concat(t)}),o();case 7:return r.prev=7,u((0,c.W$)()),r.finish(7);case 10:case"end":return r.stop()}}),r,null,[[2,,7,10]])})));return function(e){return r.apply(this,arguments)}}()},rollbackRequest:y}}(t),m=p.tableData,v=p.tableRef,h=p.loading,y=p.onFetchHandler,g=p.exportStockMovements,E=p.exportPendingShipmentItems,O=p.deleteConfirmAlert,w=p.approveRequest,S=p.rejectRequest,A=p.rollbackRequest,P=Oe((0,n.useState)(!1),2),R=P[0],j=P[1],N=Oe((0,n.useState)(null),2),I=N[0],B=N[1],U=(0,n.useCallback)((function(e){var t,r=e.original,o=r.statusCode,a=r.identifier,c=(null===(t=e.original)||void 0===t||null===(t=t.requestedBy)||void 0===t?void 0:t.id)===(null==l?void 0:l.id),s=[],f={defaultLabel:"Show Stock Movement",label:"react.stockMovement.action.show.label",leftIcon:n.createElement(M.CwO,null),href:"/openboxes/stockMovement/show"};if(s.push(f),(0,ye.A)(l,e.original,i)){var p={defaultLabel:"Edit Stock Movement",label:"react.stockMovement.action.edit.label",leftIcon:n.createElement(M.Jno,null),href:"/openboxes/stockMovement/edit"};s.push(p)}if(o===X.A.PENDING_APPROVAL&&d){var m={defaultLabel:"Approve",label:"react.stockMovement.action.approve.label",leftIcon:n.createElement(M.hm8,null),onClick:function(e){return w(e,a)}};s.push(m);var v={defaultLabel:"Reject",label:"react.stockMovement.action.reject.label",leftIcon:n.createElement(RiCloseFill,null),variant:"danger",onClick:function(){var t;t=e.original,j(!0),B(t)}};s.push(v)}if((o===X.A.APPROVED||o===X.A.REJECTED)&&(d||c||u)){var h={defaultLabel:"Rolllback",label:"react.stockMovement.action.rollback.label",leftIcon:n.createElement(M.cWs,null),onClick:A};s.push(h)}return s}),[]),_=(0,n.useCallback)((function(e){var t=e.original,r=t.isPending,o=t.isReturn,a=t.order,c=t.origin,s=t.isReceived,f=t.isPartiallyReceived,d=t.currentStatus,p=[];if(t.isApprovalRequired&&(0,ge.xY)(null==c?void 0:c.supportedActivities,$.A.APPROVE_REQUEST))return U(e);var m={defaultLabel:"Show Stock Movement",label:"react.stockMovement.action.show.label",leftIcon:n.createElement(M.CwO,null),href:k.ti.show};if(p.push(m),!s&&!f&&(0,ye.A)(l,e.original,i)){var v={defaultLabel:"Edit Stock Movement",label:"react.stockMovement.action.edit.label",leftIcon:n.createElement(M.Jno,null)};v.href=o?function(){return k.L8.genericEdit(null==a?void 0:a.id)}:k.ti.genericEdit,p.push(v)}var h=i.id===(null==c?void 0:c.id);if((r||!d)&&(h||null==c||!c.isDepot)){var y={defaultLabel:"Delete Stock Movement",label:"react.stockMovement.action.delete.label",leftIcon:n.createElement(M.WFf,null),variant:"danger",onClick:O};(!o||o&&u)&&p.push(y)}return p}),[]),G=(0,n.useMemo)((function(){return[{Header:" ",width:50,sortable:!1,style:{overflow:"visible",zIndex:1},fixed:"left",Cell:function(e){return n.createElement(ve.A,{positions:["right"],dropdownClasses:"action-dropdown-offset",actions:_(e),id:e.original.id})}},{Header:n.createElement(C.A,{id:"react.stockMovement.column.itemsCount.label",defaultMessage:"# items"}),accessor:"lineItemCount",fixed:"left",className:"active-circle d-flex justify-content-center",headerClassName:"header justify-content-center",width:80,sortable:!1,Cell:function(e){return n.createElement(x.n,Ee({},e,{defaultValue:0,className:"items-count-circle"}))}},{Header:n.createElement(C.A,{id:"react.stockMovement.column.status.label",defaultMessage:"Status"}),accessor:"displayStatus",fixed:"left",width:170,sortable:!1,Cell:function(e){var t,o,i,a;return n.createElement(x.n,Ee({},e,{tooltip:!0,tooltipLabel:(a=null===(t=e.value)||void 0===t?void 0:t.name,r("react.stockMovement.status.".concat(a.toLowerCase(),".description.label"),a.toLowerCase()))}),n.createElement(be.A,{variant:null==e||null===(o=e.value)||void 0===o?void 0:o.variant,status:null==e||null===(i=e.value)||void 0===i?void 0:i.label}))}},{Header:n.createElement(C.A,{id:"react.stockMovement.column.identifier.label",defaultMessage:"Identifier"}),accessor:"identifier",fixed:"left",headerClassName:"header justify-content-center",minWidth:100,Cell:function(e){var t=e.original,o=t.id,i=t.shipmentType;return n.createElement(x.n,Ee({},e,{link:k.ti.show(o),tooltip:!0,tooltipLabel:(0,he.Ep)(r,null==i?void 0:i.displayName)}),n.createElement(D.A,{shipmentType:(0,b.EX)(i),identifier:null==e?void 0:e.value}))}},{Header:n.createElement(C.A,{id:"react.stockMovement.column.name.label",defaultMessage:"Name"}),accessor:"name",minWidth:250,sortable:!1,Cell:function(e){return n.createElement(x.n,Ee({},e,{tooltip:!0,tooltipLabel:e.original.description||e.original.name,link:k.ti.show(e.original.id)}),n.createElement("span",{className:"mx-1"},r("react.StockMovementType.enum.".concat(e.original.stockMovementType),e.original.stockMovementType)),n.createElement(M.ye6,null),n.createElement("span",null,e.original.description||e.original.name))}},{Header:n.createElement(C.A,{id:"react.stockMovement.destination.label",defaultMessage:"Destination"}),accessor:"destination.name",minWidth:250,Cell:function(e){return n.createElement(x.n,Ee({},e,{tooltip:!0}))}},{Header:n.createElement(C.A,{id:"react.stockMovement.stocklist.label",defaultMessage:"Stocklist"}),accessor:"stocklist.name",minWidth:150,Cell:function(e){return n.createElement(x.n,Ee({},e,{tooltip:!0,defaultValue:"None"}))}},{Header:n.createElement(C.A,{id:"react.stockMovement.requestedBy.label",defaultMessage:"Requested by"}),accessor:"requestedBy.name",minWidth:250,sortable:!1,Cell:function(e){return n.createElement(x.n,Ee({},e,{defaultValue:"None"}))}},{Header:n.createElement(C.A,{id:"react.stockMovement.request.approvers.label",defaultMessage:"Approvers"}),accessor:"approvers",minWidth:250,sortable:!1,show:s,Cell:function(e){var t;return n.createElement(x.n,Ee({},e,{tooltip:!0,defaultValue:"None",value:null===(t=e.value)||void 0===t||null===(t=t.map((function(e){return e.name})))||void 0===t?void 0:t.join(", ")}))}},{Header:n.createElement(C.A,{id:"react.stockMovement.outbound.column.dateRequested.label",defaultMessage:"Date Requested"}),accessor:"dateRequested",width:150,Cell:function(e){return n.createElement(T.A,Ee({localizeDate:!0,formatLocalizedDate:f.A.DISPLAY},e))}},{Header:n.createElement(C.A,{id:"react.stockMovement.column.dateCreated.label",defaultMessage:"Date Created"}),accessor:"dateCreated",width:150,Cell:function(e){return n.createElement(T.A,Ee({localizeDate:!0,formatLocalizedDate:f.A.DISPLAY},e))}}]}),[o,r]);return n.createElement(n.Fragment,null,n.createElement(Q,{request:I,closeRejectionModal:function(){j(!1),B(null)},isOpenRejectionModal:R,rejectRequest:S}),n.createElement("div",{className:"list-page-list-section"},n.createElement("div",{className:"title-text p-3 d-flex justify-content-between align-items-center"},n.createElement("div",null,s?n.createElement(C.A,{id:"react.stockMovement.requests.label",defaultMessage:"Requests"}):n.createElement(C.A,{id:"react.stockMovement.outbound.label",defaultMessage:"Outbound"}),n.createElement("span",{className:"ml-1"},"(".concat(m.totalCount,")"))),n.createElement(q.A,{isDropdown:!0,defaultLabel:"Export",label:"react.default.button.export.label",variant:"secondary",EndIcon:n.createElement(M.U3X,null)}),n.createElement("div",{className:"dropdown-menu dropdown-menu-right nav-item padding-8","aria-labelledby":"dropdownMenuButton"},n.createElement("a",{href:"#",className:"dropdown-item",onClick:g,role:"button",tabIndex:0},n.createElement(C.A,{id:"react.stockMovement.export.label",defaultMessage:"Export Stock Movements"})),n.createElement("a",{className:"dropdown-item",onClick:E,href:"#"},n.createElement(C.A,{id:"react.stockMovement.export.pendingShipmentItems.label",defaultMessage:"Export pending shipment items"})))),n.createElement(x.A,{manual:!0,sortable:!0,ref:v,columns:G,data:m.data,loading:h,defaultPageSize:10,pages:m.pages,totalData:m.totalCount,onFetchData:y,noDataText:r("react.stockMovement.empty.list.label","No Stock Movements match the given criteria")})))};const Ae=(0,a.Ng)((function(e){return{translate:(0,C.H)((0,L.ro)(e.localize)),requisitionStatuses:e.requisitionStatuses.data,currentLocation:e.session.currentLocation,isUserAdmin:e.session.isUserAdmin,isUserRequestApprover:e.session.isUserRequestApprover,currentLocale:e.session.activeLanguage,currentUser:e.session.user}}))(Se);Se.propTypes={filterParams:i().shape({}).isRequired,translate:i().func.isRequired,isRequestsOpen:i().bool.isRequired,isUserAdmin:i().bool.isRequired,isUserRequestApprover:i().bool.isRequired,currentLocation:i().shape({id:i().string.isRequired,name:i().string.isRequired}).isRequired,currentUser:i().shape({id:i().string.isRequired}).isRequired,requisitionStatuses:i().arrayOf(i().shape({id:i().string,name:i().string,variant:i().string,label:i().string})).isRequired};var Pe=r(38798),qe=r(17328);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Ce(){Ce=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),l=new j(n||[]);return o(a,"_invoke",{value:q(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",m="executing",v="completed",h={};function y(){}function b(){}function g(){}var E={};s(E,a,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(M([])));w&&w!==r&&n.call(w,a)&&(E=w);var S=g.prototype=y.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==ke(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function q(t,r,n){var o=d;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=k(l,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=f(t,r,n);if("normal"===s.type){if(o=n.done?v:p,s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ke(t)+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=s(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},A(P.prototype),s(P.prototype,l,(function(){return this})),t.AsyncIterator=P,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new P(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(S),s(S,c,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=M,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}function Re(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?je(Object(r),!0).forEach((function(t){Le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t,r){return(t=function(e){var t=function(e){if("object"!=ke(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var De=function(e){var t=xe((0,n.useState)({}),2),r=t[0],o=t[1],i=xe((0,n.useState)({}),2),s=i[0],u=i[1],f=xe((0,n.useState)(!1),2),d=f[0],p=f[1],m=(0,l.useHistory)(),v=(0,a.wA)(),y=(0,a.d4)((function(e){return{requisitionStatuses:e.requisitionStatuses.data,currentLocation:e.session.currentLocation,currentUser:e.session.user,currentLocale:e.session.activeLanguage,shipmentTypes:e.stockMovementCommon.shipmentTypes,availableApprovers:e.approvers.data}})),g=y.requisitionStatuses,E=y.currentLocation,O=y.currentUser,w=y.currentLocale,S=y.shipmentTypes,A=y.availableApprovers;(0,n.useEffect)((function(){v((0,c.CT)())}),[w]),(0,n.useEffect)((function(){v((0,c.dL)(e))}),[w,E.id]),(0,n.useEffect)((function(){v((0,c.EJ)())}),[E.id]);var P=h("ELECTRONIC"===e),q=function(){var t,r=(t=Ce().mark((function t(){var r,n,o,i,a;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=Object.keys(P).reduce((function(e,t){return Me(Me({},e),{},Le({},t,""))}),{})).origin={id:null==E?void 0:E.id,value:null==E?void 0:E.id,name:null==E?void 0:E.name,label:null==E?void 0:E.name},r.direction="OUTBOUND","ELECTRONIC"===e&&(r.sourceType="ELECTRONIC"),(n=Pe.A.parse(m.location.search)).requisitionStatusCode&&(o=(0,he.GE)(n.requisitionStatusCode),r.requisitionStatusCode=g.filter((function(e){var t=e.value;return o.includes(t)}))),n.receiptStatusCode&&(r.receiptStatusCode=(0,he.GE)(n.receiptStatusCode)),!n.destination){t.next=11;break}return t.next=10,(0,b.kJ)(n.destination);case 10:r.destination=t.sent;case 11:if(!n.requestedBy){t.next=20;break}if(n.requestedBy!==O.id){t.next=16;break}t.t0=O,t.next=19;break;case 16:return t.next=18,(0,b.Gu)(n.requestedBy);case 18:t.t0=t.sent;case 19:r.requestedBy=t.t0;case 20:if(!n.createdBy){t.next=29;break}if(n.createdBy!==O.id){t.next=25;break}t.t1=O,t.next=28;break;case 25:return t.next=27,(0,b.Gu)(n.createdBy);case 27:t.t1=t.sent;case 28:r.createdBy=t.t1;case 29:if(!n.updatedBy){t.next=38;break}if(n.updatedBy!==O.id){t.next=34;break}t.t2=O,t.next=37;break;case 34:return t.next=36,(0,b.Gu)(n.updatedBy);case 36:t.t2=t.sent;case 37:r.updatedBy=t.t2;case 38:n.createdAfter&&(r.createdAfter=n.createdAfter),n.createdBefore&&(r.createdBefore=n.createdBefore),n.shipmentType&&(i=(0,he.GE)(n.shipmentType),r.shipmentType=S.filter((function(e){var t=e.id;return i.includes(t)}))),"ELECTRONIC"===e&&n.approver&&(a=(0,he.GE)(n.approver),r.approver=A.filter((function(e){var t=e.id;return a.includes(t)})),a.includes(b.ds.id)&&r.approver.push(b.ds)),u(r),p(!0);case 44:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){Re(i,n,o,a,l,"next",e)}function l(e){Re(i,n,o,a,l,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,qe.A)({clearFilterValues:function(){var e=Object.keys(P).reduce((function(e,t){return Me(Me({},e),{},Le({},t,""))}),{direction:"OUTBOUND"}),t=(0,he.ZP)(e,{direction:{name:"direction"}}),r=Pe.A.stringify(t),n=m.location.pathname;r&&m.push({pathname:n,search:r})},filtersInitialized:d,initializeDefaultFilterValues:q}),{selectFiltersForMyStockMovements:function(){var e={id:O.id,value:O.id,label:O.name,name:O.name},t={direction:"OUTBOUND",requestedBy:e.id,createdBy:e.id};m.push({pathname:k.ti.list(),search:Pe.A.stringify(t)}),u((function(t){return Me(Me({},t),{},{requestedBy:e,createdBy:e})}))},defaultFilterValues:s,setFilterValues:function(e){var t=(0,he.ZP)(e,{direction:{name:"direction"},sourceType:{name:"sourceType"},destination:{name:"destination",accessor:"id"},requestedBy:{name:"requestedBy",accessor:"id"},createdBy:{name:"createdBy",accessor:"id"},updatedBy:{name:"updatedBy",accessor:"id"},createdAfter:{name:"createdAfter"},createdBefore:{name:"createdBefore"},requisitionStatusCode:{name:"requisitionStatusCode",accessor:"id"},receiptStatusCode:{name:"receiptStatusCode"},shipmentType:{name:"shipmentType",accessor:"id"},approver:{name:"approver",accessor:"id"}}),r=Pe.A.stringify(t),n=m.location.pathname;r&&m.push({pathname:n,search:r}),o(e)},filterParams:r}};const Ne=De;De.propTypes={sourceType:i().string.isRequired};var Ie=r(54035),Be=function(e){var t="ELECTRONIC"===e.sourceType,r=Ne(e.sourceType),o=r.selectFiltersForMyStockMovements,i=r.defaultFilterValues,a=r.setFilterValues,l=r.filterParams;(0,Ie.A)("stockMovement","StockMovementType","reactTable");var c=h(t);return n.createElement("div",{className:"d-flex flex-column list-page-main"},n.createElement(j,{isRequestsOpen:t,showMyStockMovements:o}),n.createElement(P,{defaultValues:i,setFilterParams:a,filterFields:c,formProps:{requisitionStatuses:e.requisitionStatuses,approvers:e.approvers,shipmentTypes:e.shipmentTypes}}),n.createElement(Ae,{isRequestsOpen:t,filterParams:l}))};const Fe=(0,l.withRouter)((0,a.Ng)((function(e){return{currentUser:e.session.user,currentLocation:e.session.currentLocation,requisitionStatuses:e.requisitionStatuses.data,isRequisitionStatusesFetched:e.requisitionStatuses.fetched,shipmentTypes:e.stockMovementCommon.shipmentTypes,approvers:e.approvers.data}}),{fetchStatuses:c.dL})(Be));Be.propTypes={sourceType:i().string.isRequired,requisitionStatuses:i().arrayOf(i().shape({id:i().string,name:i().string,variant:i().string,label:i().string})).isRequired,shipmentTypes:i().arrayOf(i().shape({id:i().string,name:i().string,label:i().string,description:i().string})).isRequired,approvers:i().arrayOf(i().shape({id:i().string,name:i().string,label:i().string,value:i().string})).isRequired}},85728:(e,t,r)=>{r.d(t,{Wx:()=>a,qu:()=>o,xY:()=>i});var n=r(76477),o=function(e,t,r){return e===t&&!r.includes(n.A.MANAGE_INVENTORY)&&r.includes(n.A.SUBMIT_REQUEST)},i=function(e,t){return null==e?void 0:e.includes(t)},a=function(e){return i(e,n.A.PUTAWAY_STOCK)&&i(e,n.A.PICK_STOCK)}}}]);
//# sourceMappingURL=bundle.929af1b45eb780bfc503.6189.js.map