"use strict";(self.webpackChunkopenboxes=self.webpackChunkopenboxes||[]).push([[5903],{20655:(e,t,n)=>{n.d(t,{A:()=>w});var r=n(96540),i=n(2543),a=n.n(i),o=n(5556),s=n.n(o),l=n(73088),c=n(43606),u=n(80605);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var O=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=v(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}(this,t,[e])).fieldRefs=[],n.focusField=n.focusField.bind(n),n.copyDown=n.copyDown.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(i=[{key:"shouldComponentUpdate",value:function(e){return!a().isEqualWith(this.props,e,(function(e,t){if("function"==typeof e||"function"==typeof t)return!0}))}},{key:"focusField",value:function(e,t){var n=a().get(this.fieldRefs,"[".concat(e,"].").concat(t));n&&n.focus()}},{key:"copyDown",value:function(e,t){var n=a().get(this.fieldRefs,"[".concat(e,"].").concat(t)),r=a().get(this.fieldRefs,"[".concat(e-1,"].").concat(t,".value"));n&&r&&!n.disabled&&(n.value=r,n.focus())}},{key:"render",value:function(){var e=this,t=this.props,n=t.fieldsConfig,i=t.index,a=t.field,o=t.properties,s=t.rowValues,p=void 0===s?{}:s,f=n.getDynamicRowAttr?n.getDynamicRowAttr(d(d({},o),{},{index:i,rowValues:p})):{},b=n.subfieldKey;return r.createElement("div",null,r.createElement(u.A,this.props),!f.hideSubfields&&r.createElement(l.ED,{name:"".concat(a,".").concat(b),component:c.A,fieldsConfig:n,properties:d(d({},o),{},{parentIndex:i,subfield:!0,focusField:this.focusField,copyDown:this.copyDown}),tableRef:function(t,n,r){e.fieldRefs[r]||(e.fieldRefs[r]={}),e.fieldRefs[r][n]=t}}))}}])&&m(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(r.Component);const w=O;O.propTypes={fieldsConfig:s().shape({getDynamicAttr:s().func}).isRequired,index:s().number.isRequired,field:s().string.isRequired,addRow:s().func.isRequired,removeRow:s().func.isRequired,properties:s().shape({}).isRequired,rowValues:s().shape({})},O.defaultProps={rowValues:{}}},25824:(e,t,n)=>{n.d(t,{A:()=>k});var r=n(96540),i=n(924),a=n(2543),o=n.n(a),s=n(5556),l=n.n(s),c=n(90952),u=n(70373),p=n.n(u),f=n(26438),d=n(26216);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=w(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}(this,t,[e])).state={showModal:!1},n.openModal=n.openModal.bind(n),n.closeModal=n.closeModal.bind(n),n.save=n.save.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),n=t,(a=[{key:"openModal",value:function(){this.props.onOpen(),this.setState({showModal:!0})}},{key:"closeModal",value:function(){this.props.onClose(),this.setState({showModal:!1})}},{key:"save",value:function(e){this.props.onSave(e),this.setState({showModal:!1})}},{key:"render",value:function(){var e=this,t=this.props.title,n=this.props.defaultTitleMessage;return r.createElement("div",{className:this.props.wrapperClassName},this.props.renderButton?this.props.renderButton({openModal:this.openModal}):r.createElement("button",{type:"button",className:"btn-xs ".concat(this.props.btnOpenClassName),style:this.props.btnOpenStyle,disabled:this.props.btnOpenDisabled,onClick:function(){return e.openModal()}},this.props.btnOpenIcon&&r.createElement("i",{className:"fa ".concat(this.props.btnOpenIcon," mr-1"),"aria-hidden":"true"}),this.props.btnOpenText&&!this.props.btnOpenAsIcon&&r.createElement(d.A,{id:this.props.btnOpenText,defaultMessage:this.props.btnOpenDefaultText})),r.createElement(p(),{isOpen:this.props.showModal||this.state.showModal,onRequestClose:this.closeModal,className:"modal-content-custom",shouldCloseOnOverlayClick:!1},r.createElement("div",{className:this.props.bodyContainerClassName,style:this.props.bodyContainerStyle},"string"==typeof t?r.createElement("h5",{className:"text-center"}," ",r.createElement(d.A,{id:t,defaultMessage:n})):r.createElement(t,null),r.createElement("hr",null),r.createElement(c.lV,{onSubmit:function(t){return e.save(t)},initialValues:this.props.initialValues,validate:this.props.validate,mutators:h({},i.A),render:function(t){var n=t.handleSubmit,i=t.values;return r.createElement("form",{id:"modalForm",onSubmit:n},e.props.children,e.props.renderBodyWithValues(i),o().map(e.props.fields,(function(t,n){return(0,f.bl)(t,n,h(h({},e.props.formProps),{},{values:i}))})),r.createElement("hr",null),r.createElement("div",{className:e.props.btnContainerClassName,role:"group",style:e.props.btnContainerStyle},r.createElement("button",{type:"button",className:e.props.btnCancelClassName,style:e.props.btnCancelStyle,onClick:function(){return e.closeModal()}},r.createElement(d.A,{id:e.props.btnCancelText,defaultMessage:e.props.btnCancelDefaultText})),r.createElement("button",{type:"submit",className:e.props.btnSaveClassName,style:e.props.btnSaveStyle,disabled:e.props.btnSaveDisabled},r.createElement(d.A,{id:e.props.btnSaveText,defaultMessage:e.props.btnSaveDefaultText}))))}}))))}}])&&v(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a}(r.Component);const k=S;S.propTypes={btnOpenText:l().string,btnOpenDefaultText:l().string,btnOpenClassName:l().string,btnOpenStyle:l().shape({}),btnOpenDisabled:l().bool,btnOpenAsIcon:l().bool,btnOpenIcon:l().string,title:l().oneOfType([l().string,l().func]).isRequired,defaultTitleMessage:l().string.isRequired,children:l().element,bodyContainerClassName:l().string,bodyContainerStyle:l().shape({}),btnContainerClassName:l().string,btnContainerStyle:l().shape({}),renderButton:l().func,wrapperClassName:l().string,btnSaveText:l().string,btnSaveDefaultText:l().string,btnSaveClassName:l().string,btnSaveStyle:l().shape({}),btnSaveDisabled:l().bool,btnCancelText:l().string,btnCancelDefaultText:l().string,btnCancelClassName:l().string,btnCancelStyle:l().shape({}),onOpen:l().func,onSave:l().func,onClose:l().func,validate:l().func,renderBodyWithValues:l().func,initialValues:l().oneOfType([l().shape({}),l().arrayOf(l().shape({}))]),fields:l().shape({}),formProps:l().shape({}),showModal:l().bool},S.defaultProps={btnOpenText:"react.default.button.open.label",btnOpenDefaultText:"Open",btnOpenClassName:"btn btn-outline-primary",btnOpenStyle:{},btnOpenDisabled:!1,btnOpenAsIcon:!1,btnOpenIcon:"",children:null,bodyContainerClassName:"modal-body-container",bodyContainerStyle:{},btnContainerClassName:"btn-group float-right",btnContainerStyle:{},wrapperClassName:null,btnSaveText:"react.default.button.save.label",btnSaveDefaultText:"Save",btnSaveClassName:"btn btn-outline-success",btnSaveStyle:{},btnSaveDisabled:!1,btnCancelText:"react.default.button.cancel.label",btnCancelDefaultText:"Cancel",btnCancelClassName:"btn btn-outline-secondary",btnCancelStyle:{},renderButton:void 0,onOpen:function(){return null},onSave:function(){return null},onClose:function(){return null},validate:function(){return null},renderBodyWithValues:function(){return null},initialValues:[],fields:{},formProps:{},showModal:!1}},84079:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(96540),i=n(5556),a=n.n(i),o=n(26216),s=["value","indeterminate","custom","fieldRef","withLabel","label","defaultMessage"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(null,arguments)}var c=function(e){var t=e.value,n=e.indeterminate,i=e.custom,a=e.fieldRef,c=e.withLabel,u=e.label,p=e.defaultMessage,f=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,s),d=function(e){var t=e.target.checked;f.onChange&&f.onChange(t)};return i?r.createElement("div",{"data-testid":"custom-checkbox",className:"custom-checkbox"},r.createElement("label",{htmlFor:f.id},r.createElement("input",l({id:f.id,type:"checkbox",ref:a,checked:t},f,{onChange:d})))):c?r.createElement("div",{"data-testid":"with-label-checkbox",className:"d-flex align-items-center"},r.createElement("input",l({type:"checkbox",ref:function(e){e&&(e.indeterminate=n),a&&a(e)},checked:t},f,{onChange:d})),r.createElement("label",{htmlFor:f.id,style:{margin:"0 0 0 5px"}},r.createElement(o.A,{id:u,defaultMessage:p||u}))):r.createElement("input",l({"data-testid":"checkbox",type:"checkbox",ref:function(e){e&&(e.indeterminate=n),a&&a(e)},checked:t},f,{onChange:d}))};const u=c;c.propTypes={onChange:a().func,value:a().bool,indeterminate:a().bool,custom:a().bool,id:a().string,fieldRef:a().func,withLabel:a().bool,label:a().string,defaultMessage:a().string},c.defaultProps={onChange:null,value:null,indeterminate:!1,custom:!1,id:"",fieldRef:void 0,withLabel:!1,label:"",defaultMessage:""}},84615:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(96540),i=n(4395),a=n(84079),o=["value"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const l=function(e){return r.createElement(i.A,s({},e,{renderInput:function(e){var t=e.value,n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,o);return r.createElement(a.A,s({},n,{value:t||!1}))}}))}},91394:(e,t,n)=>{n.r(t),n.d(t,{default:()=>De});var r=n(96540),i=n(2543),a=n.n(i),o=n(5556),s=n.n(o),l=n(88600),c=n(697),u=n(84976),p=n(8949),f=n(924),d=n(46894),b=n.n(d),m=n(23350),h=n(90952),y=n(41640),v=n(84615),g=n(45814),O=n(34297),w=n(50709),P=n(83476),S=n(43256),k=n(26438),E=n(66792),j=n(26216);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=function(e){if("object"!=x(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}var D={requirements:{type:y.A,arrowsNavigation:!0,fields:{checked:{type:v.A,label:"react.stockMovement.selectAll.label",defaultMessage:"Select All",flexWidth:4,getDynamicAttr:function(e){var t=e.rowIndex,n=e.allRowsSelected,i=e.selectAllCode,a=e.updateSelectedItems;return{headerHtml:function(){return r.createElement("input",{type:"checkbox",className:"mt-1",checked:n,onClick:i})},onChange:function(e){return a(e,t)}}}},"product.productCode":{type:g.A,label:"react.stockMovement.productCode.label",defaultMessage:"Code",flexWidth:5,headerAlign:"left",attributes:{cellClassName:"text-left"}},"product.name":{type:g.A,label:"react.stockMovement.product.label",defaultMessage:"Product",flexWidth:30,headerAlign:"left",attributes:{cellClassName:"text-left",showValueTooltip:!0}},zone:{type:g.A,label:"react.replenishment.zone.label",defaultMessage:"Zone",headerAlign:"left",attributes:{className:"text-left"}},"binLocation.name":{type:g.A,label:"react.replenishment.bin.label",defaultMessage:"Bin",headerAlign:"left",attributes:{formatValue:function(e){return e||"DEFAULT"},className:"text-left"}},quantityInBin:{type:g.A,label:"react.replenishment.quantityInBin.label",defaultMessage:"Qty in Bin",headerAlign:"right",flexWidth:8,attributes:{cellClassName:"text-right"}},maxQuantity:{type:g.A,label:"react.replenishment.maxQuantity.label",defaultMessage:"Max Qty",headerAlign:"right",flexWidth:8,attributes:{cellClassName:"text-right"}},quantityAvailable:{type:g.A,label:"react.replenishment.quantityAvailable.label",defaultMessage:"Qty available",headerAlign:"right",flexWidth:8,attributes:{cellClassName:"text-right"}},quantity:{type:O.A,label:"react.stockMovement.quantityToTransfer.label",defaultMessage:"Qty to Transfer",headerAlign:"center",attributes:{type:"number",cellClassName:"text-center"},flexWidth:10,fieldKey:"",getDynamicAttr:function(e){var t=e.updateRow,n=e.values,r=e.rowIndex;return{onBlur:function(){return t(n,r)}}}}}}};function L(e){var t={requirements:[]};return a().forEach(e.requirements,(function(e,n){e.checked&&(e.quantity?e.quantity<1?t.requirements[n]={quantity:"react.replenishment.error.quantity.label"}:e.quantity>e.quantityAvailable&&(t.requirements[n]={quantity:"react.replenishment.error.quantity.greaterThanQATP.label"}):t.requirements[n]={quantity:"react.replenishment.error.emptyQtyToTransfer.label"})})),a().find(e.requirements,(function(e){return e.checked}))||a().forEach(e.requirements,(function(e,n){t.requirements[n]=I(I({},t.requirements[n]),{},{checked:"react.replenishment.error.selected.label"})})),t}var V=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(n=function(e,t,n){return t=C(t),function(e,t){if(t&&("object"==x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,R()?Reflect.construct(t,n||[],C(e).constructor):t.apply(e,n))}(this,t,[e]),"dataFetched",!1),n.state={inventoryLevelStatus:"BELOW_MINIMUM",statusOptions:[],values:I(I({},n.props.initialValues),{},{requirements:[]}),isDirty:!1},n.updateRow=n.updateRow.bind(n),n.updateSelectedItems=n.updateSelectedItems.bind(n),n.selectAllRows=n.selectAllRows.bind(n),n.allRowsSelected=n.allRowsSelected.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(t,e),n=t,(i=[{key:"componentDidMount",value:function(){this.props.replenishmentTranslationsFetched&&(this.dataFetched=!0,this.fetchStatusOptions(),this.fetchRequirements(this.props.locationId)),this.props.createInfoBar(P.zX[P.ex.STOCK_REPLENISHMENT_DESCRIPTION])}},{key:"componentWillUnmount",value:function(){this.props.hideInfoBar(P.ex.STOCK_REPLENISHMENT_DESCRIPTION)}},{key:"componentWillReceiveProps",value:function(e){e.replenishmentTranslationsFetched&&(this.dataFetched?this.props.locationId!==e.locationId&&this.fetchRequirements(e.locationId):(this.dataFetched=!0,this.fetchStatusOptions(),this.fetchRequirements(this.props.locationId)))}},{key:"allRowsSelected",value:function(){return!a().find(this.state.values.requirements,(function(e){return!e.checked}))}},{key:"selectAllRows",value:function(){var e=this.allRowsSelected();this.setState((function(t){return{values:b()(t.values,{requirements:{$apply:function(t){return t.map((function(t){return I(I({},t),{},{checked:!e})}))}}})}}))}},{key:"updateSelectedItems",value:function(e,t){this.setState((function(n){return{values:b()(n.values,{requirements:N({},t,{checked:{$set:e}})})}}))}},{key:"updateRow",value:function(e,t){var n=e.requirements[t];n.quantity!==this.state.values.requirements[t].quantity&&this.setState({values:b()(e,{requirements:N({},t,{$set:n})}),isDirty:!0})}},{key:"fetchStatusOptions",value:function(){var e=this;return S.Ay.get("/api/replenishments/statusOptions").then((function(t){var n=t.data.data;e.setState({statusOptions:n})})).catch((function(){}))}},{key:"fetchRequirements",value:function(e){var t=this;this.props.showSpinner();var n=this.state.inventoryLevelStatus,r="/api/requirements?location.id=".concat(e);return n.id&&(r+="&inventoryLevelStatus=".concat(n.id)),S.Ay.get(r).then((function(e){var n=a().map((0,S.xp)(e.data.data),(function(e){return I(I({},e),{},{quantity:e.quantityNeeded,checked:!0})}));t.setState({values:{requirements:n},isDirty:!1},(function(){return t.props.hideSpinner()}))})).catch((function(){return t.props.hideSpinner()}))}},{key:"createReplenishment",value:function(e){var t=this;this.props.showSpinner();var n={replenishmentItems:e.requirements.filter((function(e){return e.checked&&e.quantity>0}))};S.Ay.post("/api/replenishments/",(0,S.iR)(n)).then((function(e){var n,r;t.props.hideSpinner(),t.props.history.push(w.$2.edit(null===(n=e.data)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.id)),t.props.nextPage(null===(r=e.data)||void 0===r?void 0:r.data)})).catch((function(){return t.props.hideSpinner()}))}},{key:"inventoryLevelStatusChange",value:function(e){var t=this;this.state.isDirty?(0,m.ZX)({title:this.props.translate("react.replenishment.message.confirmStatusChange.label","Confirm inventory level status change"),message:this.props.translate("react.replenishment.confirmStatusChange.label","Previously edited quantities will be lost after this change. Are you sure?"),buttons:[{label:this.props.translate("react.default.yes.label","Yes"),onClick:function(){return t.setState({inventoryLevelStatus:e},(function(){return t.fetchRequirements(t.props.locationId)}))}},{label:this.props.translate("react.default.no.label","No")}]}):this.setState({inventoryLevelStatus:e},(function(){return t.fetchRequirements(t.props.locationId)}))}},{key:"render",value:function(){var e=this;return r.createElement(h.lV,{onSubmit:function(){},validate:L,mutators:I({},f.A),initialValues:this.state.values,render:function(t){var n=t.handleSubmit,i=t.values,o=t.invalid;return r.createElement("div",{className:"d-flex flex-column"},r.createElement("div",{className:"d-flex justify-content-between submit-buttons mt-0 mb-3"},r.createElement("div",{className:"d-flex flex-column"},r.createElement("label",{htmlFor:"stock-level-filter"},r.createElement(j.A,{id:"react.replenishment.filter.label",defaultMessage:"Replenish bins that have a stock level"}),":"),r.createElement(E.A,{name:"stock-level-filter",value:e.state.inventoryLevelStatus,onChange:function(t){return e.inventoryLevelStatusChange(t)},options:e.state.statusOptions,className:"select-sm stocklist-select",clearable:!1})),r.createElement("button",{type:"submit",onClick:function(){o||e.createReplenishment(i)},className:"btn btn-outline-primary float-right btn-xs",disabled:o},r.createElement(j.A,{id:"react.replenishment.next.label",defaultMessage:"Next"}))),r.createElement("form",{onSubmit:n},r.createElement("div",{className:"table-form"},a().map(D,(function(t,n){return(0,k.bl)(t,n,{values:i,updateRow:e.updateRow,updateSelectedItems:e.updateSelectedItems,allRowsSelected:e.allRowsSelected(),selectAllCode:e.selectAllRows})}))),r.createElement("div",{className:"submit-buttons"},r.createElement("button",{type:"submit",onClick:function(){o||e.createReplenishment(i)},className:"btn btn-outline-primary btn-form float-right btn-xs",disabled:o},r.createElement(j.A,{id:"react.replenishment.next.label",defaultMessage:"Next"})))))}})}}])&&A(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(r.Component),_={showSpinner:p.xc,hideSpinner:p.W$,createInfoBar:p.CV,hideInfoBar:p.K7};const B=(0,c.Ng)((function(e){return{replenishmentTranslationsFetched:e.session.fetchedTranslations.replenishment,translate:(0,j.H)((0,l.ro)(e.localize))}}),_)(V);V.propTypes={initialValues:s().shape({}),showSpinner:s().func.isRequired,hideSpinner:s().func.isRequired,nextPage:s().func.isRequired,locationId:s().string.isRequired,history:s().shape({push:s().func}).isRequired,replenishmentTranslationsFetched:s().bool.isRequired,translate:s().func.isRequired},V.defaultProps={initialValues:{}};var W=n(20655);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X(r.key),r)}}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function H(e,t,n){return(t=X(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){var t=function(e){if("object"!=F(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}var G={replenishmentItems:{type:y.A,rowComponent:W.A,subfieldKey:"picklistItems",getDynamicRowAttr:function(e){var t=e.rowValues,n=e.subfield,r=t.initial?"crossed-out ":"";return n||(r+="font-weight-bold"),{className:r}},fields:{"product.productCode":{type:g.A,label:"react.stockMovement.productCode.label",defaultMessage:"Code",flexWidth:"0.5",headerAlign:"left",attributes:{cellClassName:"text-left"}},"product.name":{type:g.A,label:"react.stockMovement.product.label",defaultMessage:"Product",flexWidth:"2",headerAlign:"left",attributes:{showValueTooltip:!0,cellClassName:"text-left"}},"currentZone.name":{type:g.A,label:"react.replenishment.currentZone.label",defaultMessage:"Current Zone",flexWidth:"0.5",attributes:{showValueTooltip:!0}},"currentBinLocation.name":{type:g.A,label:"react.replenishment.currentBinLocation.label",defaultMessage:"Current Bin Location",flexWidth:"1",attributes:{showValueTooltip:!0},getDynamicAttr:function(e){var t=e.subfield;return{formatValue:function(e){return t||e?e:"DEFAULT"}}}},quantityNeeded:{type:g.A,label:"react.replenishment.quantityInBin.label",defaultMessage:"Qty Needed",flexWidth:"1",headerAlign:"right",attributes:{cellClassName:"text-right"}},"zone.name":{type:g.A,label:"react.replenishment.zone.label",defaultMessage:"Zone",flexWidth:"0.5",attributes:{showValueTooltip:!0}},"binLocation.name":{type:g.A,label:"react.replenishment.bin.label",defaultMessage:"Bin",flexWidth:"1",attributes:{showValueTooltip:!0}},lotNumber:{type:g.A,label:"react.replenishment.lot.label",defaultMessage:"Lot",flexWidth:"1"},expirationDate:{type:g.A,label:"react.replenishment.exp.label",defaultMessage:"Exp",flexWidth:"1"},quantity:{type:g.A,label:"react.stockMovement.quantityToTransfer.label",defaultMessage:"Qty to Transfer",flexWidth:"1",headerAlign:"right",attributes:{cellClassName:"text-right"}}}}},Y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(n=function(e,t,n){return t=$(t),function(e,t){if(t&&("object"==F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,K()?Reflect.construct(t,n||[],$(e).constructor):t.apply(e,n))}(this,t,[e]),"dataFetched",!1),n.state={values:{replenishment:Q({},n.props.initialValues)}},n.fetchReplenishment=n.fetchReplenishment.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(t,e),n=t,(i=[{key:"componentDidMount",value:function(){this.props.replenishmentTranslationsFetched&&(this.dataFetched=!0,this.fetchReplenishment())}},{key:"componentWillReceiveProps",value:function(e){e.replenishmentTranslationsFetched&&!this.dataFetched&&(this.dataFetched=!0,this.fetchReplenishment())}},{key:"fetchReplenishment",value:function(){var e=this;this.props.showSpinner();var t="/api/replenishments/".concat(this.props.match.params.replenishmentId);return S.Ay.get(t).then((function(t){var n=t.data.data;e.setState({values:{replenishment:Q(Q({},n),{},{replenishmentItems:a().map(n.replenishmentItems,(function(t){return e.checkForInitialPicksChanges(t)}))})}},(function(){return e.props.hideSpinner()}))})).catch((function(){return e.props.hideSpinner()}))}},{key:"checkForInitialPicksChanges",value:function(e){if(e.picklistItems.length){var t=[];return a().forEach(e.suggestedItems,(function(n){var r=a().find(e.picklistItems,(function(e){return a().get(n,"inventoryItem.id")===a().get(e,"inventoryItem.id")&&a().get(e,"binLocation.id")===a().get(n,"binLocation.id")}));(a().isEmpty(r)||r.quantity!==n.quantityPicked)&&t.push(Q(Q({},n),{},{quantity:n.quantityPicked,initial:!0}))})),Q(Q({},e),{},{picklistItems:a().concat(t,a().sortBy(e.picklistItems,["binLocation.name","initial"]))})}return e}},{key:"completeReplenishment",value:function(){var e=this;if("APPROVED"===this.state.values.replenishment.status){this.props.showSpinner();var t="/api/replenishments/".concat(this.props.match.params.replenishmentId);S.Ay.post(t,(0,S.iR)({status:"COMPLETED"})).then((function(){window.location=w.L8.show(e.props.match.params.replenishmentId),e.props.hideSpinner()})).catch((function(){return e.props.hideSpinner()}))}}},{key:"previousPage",value:function(){this.props.previousPage(this.state.values.replenishment)}},{key:"render",value:function(){var e=this;return r.createElement(h.lV,{onSubmit:function(){return e.completeReplenishment()},mutators:Q({},f.A),initialValues:this.state.values.replenishment,render:function(t){var n=t.handleSubmit;return r.createElement("div",{className:"d-flex flex-column"},r.createElement("form",{onSubmit:n,className:"print-mt"},r.createElement("div",{className:"table-form"},a().map(G,(function(t,n){return(0,k.bl)(t,n,{replenishmentId:e.props.match.params.replenishmentId,translate:e.props.translate})}))),r.createElement("div",{className:"submit-buttons"},r.createElement("button",{type:"button",onClick:function(){return e.previousPage()},className:"btn btn-outline-primary btn-form btn-xs"},r.createElement(j.A,{id:"react.default.button.previous.label",defaultMessage:"Previous"})),r.createElement("button",{type:"button",onClick:function(){return e.completeReplenishment()},className:"btn btn-outline-success float-right btn-xs mr-3"},r.createElement(j.A,{id:"react.stockTransfer.completeStockTransfer.label",defaultMessage:"Complete Stock Transfer"})))))}})}}])&&U(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(r.Component);const J=(0,c.Ng)((function(e){return{replenishmentTranslationsFetched:e.session.fetchedTranslations.replenishment,translate:(0,j.H)((0,l.ro)(e.localize))}}),{showSpinner:p.xc,hideSpinner:p.W$})(Y);Y.propTypes={showSpinner:s().func.isRequired,hideSpinner:s().func.isRequired,previousPage:s().func.isRequired,initialValues:s().shape({replenishment:s().arrayOf(s().shape({}))}).isRequired,match:s().shape({params:s().shape({replenishmentId:s().string})}).isRequired,replenishmentTranslationsFetched:s().bool.isRequired,translate:s().func.isRequired};var ee=n(93638),te=n(25824);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},re.apply(null,arguments)}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return(t=le(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,le(r.key),r)}}function le(e){var t=function(e){if("object"!=ne(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}function ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ce=function(){return!!e})()}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}var fe={availableItems:{type:y.A,getDynamicRowAttr:function(e){var t="";return e.rowValues.quantityAvailable||(t="text-disabled"),{className:t}},fields:{status:{type:g.A,fieldKey:"",flexWidth:6,getDynamicAttr:function(e){var t=e.translate;return{showValueTooltip:!0,formatValue:function(e){return e.status&&"AVAILABLE"!==e.status?t("react.stockMovement.enum.AvailableItemStatus.".concat(e.status),e.status):""}}}},lotNumber:{type:g.A,label:"react.stockMovement.lot.label",defaultMessage:"Lot"},expirationDate:{type:g.A,label:"react.stockMovement.expiry.label",defaultMessage:"Expiry",fixedWidth:"120px"},"zone.name":{type:g.A,label:"react.stockMovement.binLocation.label",defaultMessage:"Zone"},"binLocation.name":{type:g.A,label:"react.stockMovement.binLocation.label",defaultMessage:"Bin Location"},quantityAvailable:{type:g.A,label:"react.stockMovement.quantityAvailable.label",defaultMessage:"Qty Available",fixedWidth:"150px",headerAlign:"right",attributes:{cellClassName:"text-right",formatValue:function(e){return e||0===e?e.toLocaleString("en-US"):null}}},quantityPicked:{type:O.A,fieldKey:"",label:"react.stockMovement.quantityPicked.label",defaultMessage:"Qty Picked",fixedWidth:"120px",headerAlign:"right",attributes:{cellClassName:"text-right",type:"number"},getDynamicAttr:function(e){var t=e.fieldValue;return{disabled:t&&!t.quantityAvailable}}}}}};function de(e){var t={availableItems:[]},n=a().reduce(e.availableItems,(function(e,t){return e+(t.quantityPicked?a().toInteger(t.quantityPicked):0)}),0);return a().forEach(e.availableItems,(function(r,i){Number.isNaN(r.quantityPicked)||n===e.quantityRequired||"NOT_AVAILABLE"===r.status||(t.availableItems[i]={quantityPicked:"react.stockMovement.errors.differentTotalQty.label"}),r.quantityPicked>r.quantityAvailable&&(t.availableItems[i]={quantityPicked:"react.stockMovement.errors.higherTyPicked.label"}),r.quantityPicked<0&&(t.availableItems[i]={quantityPicked:"react.stockMovement.errors.negativeQtyPicked.label"})})),t}var be=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t,n){return t=ue(t),function(e,t){if(t&&("object"==ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ce()?Reflect.construct(t,n||[],ue(e).constructor):t.apply(e,n))}(this,t,[e]);var r=e.fieldConfig,i=r.attributes,a=r.getDynamicAttr,o=a?a(e):{},s=ae(ae({},i),o);return n.state={attr:s,formValues:{}},n.onOpen=n.onOpen.bind(n),n.onSave=n.onSave.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(t,e),n=t,(i=[{key:"componentWillReceiveProps",value:function(e){var t=e.fieldConfig,n=t.attributes,r=t.getDynamicAttr,i=r?r(e):{},a=ae(ae({},n),i);this.setState({attr:a})}},{key:"onOpen",value:function(){this.fetchPickPageItem()}},{key:"onSave",value:function(e){var t=this;this.props.showSpinner();var n="/api/replenishments/".concat(this.state.attr.itemId,"/picklists"),r={picklistItems:a().map(e.availableItems,(function(e){return{id:e.id||"","inventoryItem.id":e["inventoryItem.id"],"binLocation.id":e["binLocation.id"]||"",quantityPicked:a().isNil(e.quantityPicked)?"":e.quantityPicked}}))};S.Ay.put(n,r).then((function(){t.props.hideSpinner(),t.state.attr.onResponse()})).catch((function(){t.props.hideSpinner()}))}},{key:"calculatePicked",value:function(e){return r.createElement("div",null,r.createElement("div",{className:"font-weight-bold pb-2"},r.createElement(j.A,{id:"react.stockMovement.quantityPicked.label",defaultMessage:"Qty Picked"}),":",a().reduce(e.availableItems,(function(e,t){return e+(t.quantityPicked?a().toInteger(t.quantityPicked):0)}),0)),r.createElement("hr",null))}},{key:"fetchPickPageItem",value:function(){var e=this,t="/api/replenishments/".concat(this.state.attr.itemId,"/picklists");S.Ay.get(t).then((function(t){var n=t.data.data,r=a().map(n.availableItems,(function(e){var t=a().find(n.picklistItems,(function(t){return t["inventoryItem.id"]===e["inventoryItem.id"]&&t["binLocation.id"]===e["binLocation.id"]}));return t&&"NOT_AVAILABLE"!==e.status?ae(ae({},e),{},{id:t.id,quantityPicked:t.quantityPicked,binLocation:{id:t["binLocation.id"],name:t["binLocation.name"]},zone:{id:t["binLocation.zoneId"],name:t["binLocation.zoneName"]}}):ae({},e)}));e.setState({formValues:{availableItems:r,quantityRequired:n.quantityRequired,productCode:n.productCode,productName:n["product.name"]}}),e.props.hideSpinner()})).catch((function(){e.props.hideSpinner()}))}},{key:"render",value:function(){return this.state.attr.subfield?null:r.createElement(te.A,re({},this.state.attr,{onOpen:this.onOpen,onSave:this.onSave,fields:fe,validate:de,initialValues:this.state.formValues,formProps:{translate:this.props.translate},renderBodyWithValues:this.calculatePicked}),r.createElement("div",null,r.createElement("div",{className:"font-weight-bold"},r.createElement(j.A,{id:"react.stockMovement.productCode.label",defaultMessage:"Product code"}),":",this.state.formValues.productCode),r.createElement("div",{className:"font-weight-bold"},r.createElement(j.A,{id:"react.stockMovement.productName.label",defaultMessage:"Product name"}),":",this.state.formValues.productName),r.createElement("div",{className:"font-weight-bold"},r.createElement(j.A,{id:"react.stockMovement.quantityRequired.label",defaultMessage:"Qty Required"}),":",this.state.formValues.quantityRequired)))}}])&&se(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(r.Component);const me=(0,c.Ng)((function(e){return{translate:(0,j.H)((0,l.ro)(e.localize))}}),{showSpinner:p.xc,hideSpinner:p.W$})(be);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ke(r.key),r)}}function Oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Oe=function(){return!!e})()}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function Se(e,t,n){return(t=ke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e){var t=function(e){if("object"!=he(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==he(t)?t:t+""}be.propTypes={fieldName:s().string.isRequired,fieldConfig:s().shape({getDynamicAttr:s().func}).isRequired,showSpinner:s().func.isRequired,hideSpinner:s().func.isRequired,translate:s().func.isRequired};var Ee={replenishmentItems:{type:y.A,rowComponent:W.A,subfieldKey:"picklistItems",getDynamicRowAttr:function(e){var t=e.rowValues,n=e.subfield,r=t.initial?"crossed-out ":"";return n||(r+="font-weight-bold"),{className:r}},fields:{"product.productCode":{type:g.A,label:"react.stockMovement.productCode.label",defaultMessage:"Code",flexWidth:"0.5",headerAlign:"left",attributes:{cellClassName:"text-left"}},"product.name":{type:g.A,label:"react.stockMovement.product.label",defaultMessage:"Product",flexWidth:"2",headerAlign:"left",attributes:{cellClassName:"text-left",showValueTooltip:!0}},"zone.name":{type:g.A,label:"react.replenishment.zone.label",defaultMessage:"Zone",flexWidth:"0.5",attributes:{showValueTooltip:!0}},"binLocation.name":{type:g.A,label:"react.replenishment.bin.label",defaultMessage:"Bin",flexWidth:"1",attributes:{showValueTooltip:!0}},lotNumber:{type:g.A,label:"react.replenishment.lot.label",defaultMessage:"Lot",flexWidth:"1"},expirationDate:{type:g.A,label:"react.replenishment.exp.label",defaultMessage:"Exp",flexWidth:"1"},quantity:{type:g.A,label:"react.stockMovement.quantityToTransfer.label",defaultMessage:"Qty to Transfer",flexWidth:"1",headerAlign:"right",attributes:{cellClassName:"text-right"}},"currentBinLocation.name":{type:g.A,label:"react.replenishment.transferTo.label",defaultMessage:"Transfer to",flexWidth:"1",attributes:{showValueTooltip:!0},getDynamicAttr:function(e){var t=e.subfield;return{formatValue:function(e){return t||e?e:"DEFAULT"}}}},buttonEditPick:{label:"react.stockMovement.editPick.label",defaultMessage:"Edit pick",type:me,fixedWidth:"90px",fieldKey:"",attributes:{title:"react.stockMovement.editPick.label",defaultTitleMessage:"Edit Pick"},getDynamicAttr:function(e){var t=e.fieldValue,n=e.refetchReplenishment;return{subfield:e.subfield,itemId:a().get(t,"id"),btnOpenText:"react.default.button.edit.label",btnOpenDefaultText:"Edit",btnOpenClassName:"btn btn-outline-primary",onResponse:n}}},revert:{type:ee.A,label:"react.default.button.undoEdit.label",defaultMessage:"Undo edit",fixedWidth:"100px",fieldKey:"",buttonLabel:"react.default.button.undoEdit.label",buttonDefaultMessage:"Undo edit",getDynamicAttr:function(e){var t=e.fieldValue,n=e.revertUserPick;return{hidden:e.subfield,onClick:a().get(t,"id")?function(){return n(a().get(t,"id"))}:function(){return null}}},attributes:{className:"btn btn-outline-danger"}}}}},je=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Se(n=function(e,t,n){return t=we(t),function(e,t){if(t&&("object"==he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Oe()?Reflect.construct(t,n||[],we(e).constructor):t.apply(e,n))}(this,t,[e]),"dataFetched",!1),n.state={values:{replenishment:ve({},n.props.initialValues)},sorted:!1},n.revertUserPick=n.revertUserPick.bind(n),n.fetchReplenishment=n.fetchReplenishment.bind(n),n.nextPage=n.nextPage.bind(n),n.printTransferOrder=n.printTransferOrder.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(t,e),n=t,(i=[{key:"componentDidMount",value:function(){this.props.replenishmentTranslationsFetched&&(this.dataFetched=!0,this.fetchReplenishment())}},{key:"componentWillReceiveProps",value:function(e){e.replenishmentTranslationsFetched&&!this.dataFetched&&(this.dataFetched=!0,this.fetchReplenishment())}},{key:"fetchReplenishment",value:function(){var e=this;this.props.showSpinner();var t="/api/replenishments/".concat(this.props.match.params.replenishmentId);return S.Ay.get(t).then((function(t){var n=t.data.data;e.setState({values:{replenishment:ve(ve({},n),{},{replenishmentItems:a().map(n.replenishmentItems,(function(t){return e.checkForInitialPicksChanges(t)}))})}},(function(){return e.props.hideSpinner()}))})).catch((function(){return e.props.hideSpinner()}))}},{key:"recreatePickList",value:function(){var e=this;this.props.showSpinner();var t="/api/replenishments/".concat(this.props.match.params.replenishmentId,"/picklists");S.Ay.post(t).then((function(){e.fetchReplenishment()})).catch((function(){return e.props.hideSpinner()}))}},{key:"checkForInitialPicksChanges",value:function(e){if(e.picklistItems.length){var t=[];return a().forEach(e.suggestedItems,(function(n){var r=a().find(e.picklistItems,(function(e){return a().get(n,"inventoryItem.id")===a().get(e,"inventoryItem.id")&&a().get(e,"binLocation.id")===a().get(n,"binLocation.id")}));(a().isEmpty(r)||r.quantity!==n.quantityPicked)&&t.push(ve(ve({},n),{},{quantity:n.quantityPicked,initial:!0}))})),ve(ve({},e),{},{picklistItems:a().concat(t,a().sortBy(e.picklistItems,["binLocation.name","initial"]))})}return e}},{key:"nextPage",value:function(){var e=this;if("PENDING"===this.state.values.replenishment.status){this.props.showSpinner();var t="/api/replenishments/".concat(this.props.match.params.replenishmentId);S.Ay.post(t,(0,S.iR)({status:"APPROVED"})).then((function(){e.props.hideSpinner(),e.props.nextPage(e.state.values.replenishment)})).catch((function(){return e.props.hideSpinner()}))}else this.props.nextPage(this.state.values.replenishment)}},{key:"printTransferOrder",value:function(){window.open(w.$2.print(this.props.match.params.replenishmentId),"_blank")}},{key:"revertUserPick",value:function(e){var t=this;this.props.showSpinner();var n="/api/replenishments/".concat(e,"/picklistItem");S.Ay.post(n,{}).then((function(){t.props.hideSpinner(),t.fetchReplenishment()})).catch((function(){t.props.hideSpinner()}))}},{key:"refresh",value:function(){var e=this;(0,m.ZX)({title:this.props.translate("react.replenishment.confirmRefresh.label","Confirm refresh"),message:this.props.translate("react.replenishment.confirmRefresh.content.label","This button will redo the autopick on all items. Are you sure you want to continue?"),buttons:[{label:this.props.translate("react.default.yes.label","Yes"),onClick:function(){e.recreatePickList()}},{label:this.props.translate("react.default.no.label","No")}]})}},{key:"saveAndExit",value:function(){window.location=w.L8.show(this.props.match.params.replenishmentId)}},{key:"sortByBins",value:function(){if(this.state.sorted){var e=this.state.values.replenishment,t=e.replenishmentItems.map((function(e){return ve(ve({},e),{},{picklistItems:a().sortBy(e.picklistItems,["binLocation.name","quantity"])})}));this.setState({values:{replenishment:ve(ve({},e),{},{replenishmentItems:a().sortBy(t,["product.productCode"])})},sorted:!1})}else{var n=this.state.values.replenishment,r=n.replenishmentItems.map((function(e){return ve(ve({},e),{},{picklistItems:a().sortBy(e.picklistItems,["zone.name","binLocation.name"])})}));this.setState({values:{replenishment:ve(ve({},n),{},{replenishmentItems:a().sortBy(r,["picklistItems[0].zone.name","picklistItems[0].binLocation.name"])})},sorted:!0})}}},{key:"render",value:function(){var e=this;return r.createElement(h.lV,{onSubmit:function(){return e.nextPage()},mutators:ve({},f.A),initialValues:this.state.values.replenishment,render:function(t){var n=t.handleSubmit;return r.createElement("div",{className:"d-flex flex-column"},r.createElement("div",{className:"submit-buttons d-flex justify-content-end buttons-container"},r.createElement("button",{type:"button",onClick:function(){return e.printTransferOrder()},className:"mb-1 btn btn-outline-secondary btn-xs ml-1"},r.createElement("span",null,r.createElement("i",{className:"fa fa-print pr-2"}),r.createElement(j.A,{id:"react.stockTransfer.printTransferOrder.label",defaultMessage:"Print Transfer Order"}))),r.createElement("button",{type:"button",onClick:function(){return e.refresh()},className:"mb-1 btn btn-outline-secondary btn-xs ml-1"},r.createElement("span",null,r.createElement("i",{className:"fa fa-refresh pr-2"}),r.createElement(j.A,{id:"react.default.button.refresh.label",defaultMessage:"Reload"}))),r.createElement("button",{type:"button",onClick:function(){return e.saveAndExit()},className:"mb-1 btn btn-outline-secondary btn-xs ml-1 bg-white border-0"},r.createElement("span",null,r.createElement("i",{className:"fa fa-sign-out pr-2"}),r.createElement(j.A,{id:"react.default.button.saveAndExit.label",defaultMessage:"Save and exit"}))),r.createElement("button",{type:"button",onClick:function(){return e.sortByBins()},className:"float-right mb-1 btn btn-outline-secondary align-self-end btn-xs"},e.state.sorted?r.createElement("span",null,r.createElement("i",{className:"fa fa-sort pr-2"}),r.createElement(j.A,{id:"react.replenishment.originalOrder.label",defaultMessage:"Original order"})):r.createElement("span",null,r.createElement("i",{className:"fa fa-sort pr-2"}),r.createElement(j.A,{id:"react.replenishment.sortByBins.label",defaultMessage:"Sort by bins"})))),r.createElement("form",{onSubmit:n,className:"print-mt"},r.createElement("div",{className:"table-form"},a().map(Ee,(function(t,n){return(0,k.bl)(t,n,{replenishmentId:e.props.match.params.replenishmentId,refetchReplenishment:e.fetchReplenishment,locationId:e.props.locationId,translate:e.props.translate,revertUserPick:e.revertUserPick})}))),r.createElement("div",{className:"submit-buttons"},r.createElement("button",{type:"submit",className:"btn btn-outline-primary btn-form float-right btn-xs"},r.createElement(j.A,{id:"react.replenishment.next.label",defaultMessage:"Next"})))))}})}}])&&ge(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(r.Component);const xe=(0,c.Ng)((function(e){return{replenishmentTranslationsFetched:e.session.fetchedTranslations.replenishment,translate:(0,j.H)((0,l.ro)(e.localize))}}),{showSpinner:p.xc,hideSpinner:p.W$})(je);je.propTypes={showSpinner:s().func.isRequired,hideSpinner:s().func.isRequired,nextPage:s().func.isRequired,initialValues:s().shape({}).isRequired,match:s().shape({params:s().shape({replenishmentId:s().string})}).isRequired,locationId:s().string.isRequired,replenishmentTranslationsFetched:s().bool.isRequired,translate:s().func.isRequired};var Ae=n(80461);function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ne(r.key),r)}}function qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qe=function(){return!!e})()}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function Ne(e){var t=function(e){if("object"!=Re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:t+""}var Me=function(e){function t(e){var n,r,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t,n){return t=Te(t),function(e,t){if(t&&("object"==Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qe()?Reflect.construct(t,n||[],Te(e).constructor):t.apply(e,n))}(this,t,[e]),r=n,a=!1,(i=Ne(i="dataFetched"))in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a,n.state={replenishment:{},page:e.match.params.replenishmentId?2:1},n.updateWizardValues=n.updateWizardValues.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(t,e),n=t,(i=[{key:"componentDidMount",value:function(){this.props.fetchTranslations("","replenishment"),this.props.replenishmentTranslationsFetched&&(this.dataFetched=!0,this.fetchReplenishment())}},{key:"componentWillReceiveProps",value:function(e){this.props.locale&&this.props.locale!==e.locale&&this.props.fetchTranslations(e.locale,"replenishment"),e.replenishmentTranslationsFetched&&!this.dataFetched&&(this.dataFetched=!0,this.fetchReplenishment())}},{key:"stepList",get:function(){return[this.props.translate("react.replenishment.createReplenishment.label","Create Replenishment"),this.props.translate("react.replenishment.startReplenishment.label","Start Replenishment"),this.props.translate("react.replenishment.checkReplenishment.label","Check Replenishment")]}},{key:"wizardTitle",get:function(){var e=this.state.replenishment;return null!=e&&e.replenishmentNumber?[{text:this.props.translate("react.binReplenishment.label","Bin replenishment"),color:"#000000",delimeter:" | "},{text:e.replenishmentNumber,color:"#000000",delimeter:""}]:[]}},{key:"updateWizardValues",value:function(e,t){this.setState({page:e,replenishment:t})}},{key:"fetchReplenishment",value:function(){var e=this;if(this.props.match.params.replenishmentId){this.props.showSpinner();var t="/api/replenishments/".concat(this.props.match.params.replenishmentId);S.Ay.get(t).then((function(t){var n=(0,S.xp)(t.data.data);e.setState({replenishment:n,page:"PENDING"===n.status?2:3},(function(){return e.props.hideSpinner()}))})).catch((function(){return e.props.hideSpinner()}))}}},{key:"render",value:function(){var e=this.state,t=e.page,n=e.replenishment,i=this.props,o=i.location,s=i.history,l=i.match,c=o.id,u=[B,xe,J];return a().get(o,"id")?r.createElement(Ae.A,{pageList:u,stepList:this.stepList,initialValues:n,title:this.wizardTitle,currentPage:t,prevPage:1===t?1:t-1,updateWizardValues:this.updateWizardValues,additionalProps:{locationId:c,location:o,history:s,match:l}}):null}}])&&Ce(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i}(r.Component);const De=(0,u.withRouter)((0,c.Ng)((function(e){return{location:e.session.currentLocation,locale:e.session.activeLanguage,replenishmentTranslationsFetched:e.session.fetchedTranslations.replenishment,translate:(0,j.H)((0,l.ro)(e.localize))}}),{showSpinner:p.xc,hideSpinner:p.W$,fetchTranslations:p.dj})(Me));Me.propTypes={location:s().shape({id:s().string}).isRequired,locale:s().string.isRequired,replenishmentTranslationsFetched:s().bool.isRequired,fetchTranslations:s().func.isRequired,translate:s().func.isRequired,showSpinner:s().func.isRequired,hideSpinner:s().func.isRequired,match:s().shape({params:s().shape({replenishmentId:s().string})}).isRequired,history:s().shape({push:s().func}).isRequired}},93638:(e,t,n)=>{n.d(t,{A:()=>b});var r=n(96540),i=n(5556),a=n.n(i),o=n(51836),s=n(26216);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(null,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){var t=e.fieldName,n=e.fieldConfig,i=n.buttonLabel,a=n.buttonDefaultMessage,l=n.getDynamicAttr,u=n.attributes,f=void 0===u?{className:"btn-outline-primary"}:u,d=l?l(e):{},b=p(p({},f),d);return r.createElement("button",c({type:"button",key:t},b,{className:"text-truncate btn btn-xs ".concat(b.className)}),"string"==typeof i?r.createElement(o.Tooltip,{html:i&&r.createElement(s.A,{id:i,defaultMessage:a}),theme:"transparent",arrow:"true",delay:"150",duration:"250",hideDelay:"50"}," ",r.createElement(s.A,{id:i,defaultMessage:a})):r.createElement(i,null))};const b=d;d.propTypes={fieldName:a().string.isRequired,fieldConfig:a().shape({getDynamicAttr:a().func}).isRequired}}}]);
//# sourceMappingURL=bundle.929af1b45eb780bfc503.5903.js.map