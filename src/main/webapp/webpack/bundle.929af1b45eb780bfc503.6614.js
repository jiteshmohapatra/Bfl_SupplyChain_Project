"use strict";(self.webpackChunkopenboxes=self.webpackChunkopenboxes||[]).push([[6614],{32078:(e,t,r)=>{r.d(t,{A:()=>n});const n={READY:"READY",PENDING:"PENDING",APPROVED:"APPROVED",PLACED:"PLACED",COMPLETED:"COMPLETED",CANCELED:"CANCELED"}},95116:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Be});var n=r(96540),a=r(2543),o=r.n(a),s=r(5556),i=r.n(s),c=r(88600),l=r(697),u=r(84976),f=r(8949),p=r(32885),d=r.n(p),m=r(38086),h=r(46857),y=r(61965),b=r(50709),v=r(39802),T=r(83476),k=r(43256),g=r(22433),S=r(95242),E=r(26216),w=r(91019);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C.apply(null,arguments)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function L(e,t,r){return(t=D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}var M=(0,m.A)((0,g.A)(d()));function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.forEach((function(e){Object.prototype.hasOwnProperty.call(e,"_subRows")&&e._subRows?t=x(e._subRows,t):t.push(e._original)})),t}var F=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(r=function(e,t,r){return t=q(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,N()?Reflect.construct(t,r||[],q(e).constructor):t.apply(e,r))}(this,t,[e]),"getColumns",(function(){return[{Header:n.createElement(E.A,{id:"react.stockTransfer.code.label",defaultMessage:"Code"}),accessor:"product.productCode",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.product.label",defaultMessage:"Product"}),accessor:"product",style:{whiteSpace:"normal"},Cell:function(e){var t,r,a,o,s,i,c;return n.createElement(y.n,C({},e,{value:null!==(t=null===(r=e.value)||void 0===r?void 0:r.displayName)&&void 0!==t?t:null===(a=e.value)||void 0===a?void 0:a.name,tooltip:(null===(o=e.value)||void 0===o?void 0:o.displayName)&&(null===(s=e.value)||void 0===s?void 0:s.name)!==(null===(i=e.value)||void 0===i?void 0:i.displayName),tooltipLabel:null===(c=e.value)||void 0===c?void 0:c.name}))},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.lot.label",defaultMessage:"Lot"}),accessor:"lotNumber",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.expiry.label",defaultMessage:"Expiry"}),accessor:"expirationDate",style:{whiteSpace:"normal"},Cell:function(e){return n.createElement("span",null,null!=e&&e.value?r.props.formatLocalizedDate(e.value,v.A.COMMON):e.value)},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.zone.label",defaultMessage:"Zone"}),accessor:"originZone",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.binLocation.label",defaultMessage:"Bin Location"}),accessor:"originBinLocation.name",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.quantityOnHand.label",defaultMessage:"QOH"}),accessor:"quantityOnHand",style:{whiteSpace:"normal"},Cell:function(e){return n.createElement("span",null,e.value?e.value.toLocaleString("en-US"):e.value)},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.quantityAvailableToTransfer.label",defaultMessage:"Quantity Available to Transfer"}),accessor:"quantityNotPicked",style:{whiteSpace:"normal"},Cell:function(e){return n.createElement("span",null,e.value?e.value.toLocaleString("en-US"):e.value)},Filter:S.A}]})),L(r,"dataFetched",!1),L(r,"filterMethod",(function(e,t){var n=t[e.id];return"expirationDate"===e.id&&(n=r.props.formatLocalizedDate(n,v.A.COMMON)),"product"===e.id&&(n=n?"".concat(n.name," ").concat(n.displayName):null),o().toString(n).toLowerCase().includes(e.value.toLowerCase())})),L(r,"toggleAll",(function(){var e=r.state.selectAll,t=[];x(r.selectTable.getWrappedInstance().getResolvedState().sortedData).forEach((function(e){e&&0!==e.quantityNotPicked&&t.push(e._id)})),r.toggleSelection(t,!e),r.setState({selectAll:!e})})),L(r,"isSelected",(function(e){return o().includes(P(r.state.selection),e)})),L(r,"toggleSelection",(function(e,t){var n=r.state.selection,a=new Set(n);Array.isArray(e)?t?o().forEach(e,(function(e){a.add(e)})):o().forEach(e,(function(e){a.delete(e)})):a.has(e)?a.delete(e):a.has(e)||a.add(e),r.setState({selection:a})}));var a=r.getColumns();return r.state={stockTransferItems:[],columns:a,selection:new Set,selectAll:!1,selectType:"checkbox"},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),r=t,a=[{key:"componentDidMount",value:function(){this.props.stockTransferTranslationsFetched&&(this.dataFetched=!0,this.fetchStockTransferCandidates()),this.props.createInfoBar(T.zX[T.ex.STOCK_TRANSFER_DESCRIPTION])}},{key:"componentWillUnmount",value:function(){this.props.hideInfoBar(T.ex.STOCK_TRANSFER_DESCRIPTION)}},{key:"componentWillReceiveProps",value:function(e){e.stockTransferTranslationsFetched&&(this.dataFetched?this.props.locationId!==e.locationId&&this.fetchStockTransferCandidates(e.locationId):(this.dataFetched=!0,this.fetchStockTransferCandidates(this.props.locationId)))}},{key:"fetchStockTransferCandidates",value:function(e){var t=this;return this.props.showSpinner(),k.Ay.get((0,h.KC)(e)).then((function(e){var r=(0,k.xp)(e.data.data),n=[];r.forEach((function(e){var t=o().uniqueId("item_");n.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({_id:t},e))})),t.setState({stockTransferItems:n},(function(){return t.props.hideSpinner()}))})).catch((function(){return t.props.hideSpinner()}))}},{key:"createStockTransfer",value:function(){var e=this;this.props.showSpinner();var t={stockTransferItems:o().filter(this.state.stockTransferItems,(function(t){return o().includes(P(e.state.selection),t._id)}))};k.Ay.post("/api/stockTransfers/",(0,k.iR)(t)).then((function(t){var r=(0,k.xp)(t.data.data);e.props.hideSpinner(),e.props.history.push(b.L8.createById(r.id)),e.props.nextPage({stockTransfer:r})})).catch((function(){return e.props.hideSpinner()}))}},{key:"render",value:function(){var e=this,t=this.toggleSelection,r=this.toggleAll,a=this.isSelected,o=this.state,s=o.stockTransferItems,i=o.columns,c=o.selectAll,l=o.selectType,u={selectAll:c,isSelected:a,toggleAll:r,toggleSelection:t,selectType:l};return n.createElement("div",{className:"stock-transfer"},n.createElement("div",{className:"d-flex justify-content-between stock-transfer-buttons"},n.createElement("div",{className:"count-selected "},this.state.selection.size," ",n.createElement(E.A,{id:"react.stockTransfer.selected.label",defaultMessage:"Selected"})),n.createElement("button",{type:"button",disabled:this.state.selection.size<1,onClick:function(){return e.createStockTransfer()},className:"btn btn-outline-primary btn-form float-right btn-xs"},n.createElement(E.A,{id:"react.stockTransfer.startStockTransfer.label",defaultMessage:"Start Stock Transfer"}))),s?n.createElement(M,C({data:s,columns:i,ref:function(t){e.selectTable=t},className:"-striped -highlight"},u,{defaultPageSize:Number.MAX_SAFE_INTEGER,minRows:0,showPaginationBottom:!1,filterable:!0,defaultFilterMethod:this.filterMethod,SelectInputComponent:function(e){var t=e.id,r=e.checked,a=e.onClick,o=e.row;return n.createElement("input",{type:l,checked:r,disabled:o&&0===o.quantityNotPicked,onChange:function(){},onClick:function(e){var r=e.shiftKey;e.stopPropagation(),a(t,r,o)}})}})):null,n.createElement("div",{className:"submit-buttons"},n.createElement("button",{type:"button",disabled:this.state.selection.size<1,onClick:function(){return e.createStockTransfer()},className:"btn btn-outline-primary btn-form float-right btn-xs"},n.createElement(E.A,{id:"react.stockTransfer.startStockTransfer.label",defaultMessage:"Start Stock Transfer"}))))}}],a&&j(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a}(n.Component),_={showSpinner:f.xc,hideSpinner:f.W$,createInfoBar:f.CV,hideInfoBar:f.K7};const B=(0,u.withRouter)((0,l.Ng)((function(e){return{stockTransferTranslationsFetched:e.session.fetchedTranslations.stockTransfer,formatLocalizedDate:(0,w.Yq)(e.localize)}}),_)(F));F.propTypes={showSpinner:i().func.isRequired,hideSpinner:i().func.isRequired,nextPage:i().func.isRequired,locationId:i().string.isRequired,history:i().shape({push:i().func}).isRequired,stockTransferTranslationsFetched:i().bool.isRequired,formatLocalizedDate:i().func.isRequired,hideInfoBar:i().func.isRequired,createInfoBar:i().func.isRequired};var z=r(23350),H=r(84914),Q=r.n(H);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){$(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $(e,t,r){return(t=function(e){var t=function(e){if("object"!=V(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G="PENDING";function K(e,t){var r,n=e.destinationBinLocation,a=e.destinationZone;return r=t===G?{id:null,name:null,zoneId:null,zoneName:null}:{id:n&&n.id?n.id:null,name:n&&n.name?n.name:null,zoneId:a&&a.id?a.id:null,zoneName:a&&a.name?a.name:null},Z(Z({},e),{},{destinationBinLocation:r,quantity:t===G?"":e.quantity})}function Y(e,t,r){var n;return n=r===G?{id:null,name:null,zoneId:null,zoneName:null}:{id:t.destinationBinLocation.id?t.destinationBinLocation.id:null,name:t.destinationBinLocation.name?t.destinationBinLocation.name:null,zoneId:t.destinationZone?t.destinationZone.id:null,zoneName:t.destinationZone?t.destinationZone.name:null},Z(Z({},t),{},{destinationBinLocation:n,quantity:r===G?"":t.quantity,quantityOnHand:e.quantityOnHand,referenceId:e.id})}function U(e){var t=[];return o().forEach(e.stockTransferItems,(function(r){t.push(K(r,e.status)),r.splitItems.length>0&&o().forEach(r.splitItems,(function(n){t.push(Y(r,n,e.status))}))})),t}function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(null,arguments)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ie(n.key),n)}}function ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ne=function(){return!!e})()}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function se(e,t,r){return(t=ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e){var t=function(e){if("object"!=X(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==X(t)?t:t+""}var ce=(0,g.A)(d()),le=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),se(r=function(e,t,r){return t=ae(t),function(e,t){if(t&&("object"==X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ne()?Reflect.construct(t,r||[],ae(e).constructor):t.apply(e,r))}(this,t,[e]),"getColumns",(function(){return[{Header:n.createElement(E.A,{id:"react.stockTransfer.code.label",defaultMessage:"Code"}),accessor:"product.productCode",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.product.label",defaultMessage:"Product"}),accessor:"product",style:{whiteSpace:"normal"},Cell:function(e){var t,r,a,o,s,i,c;return n.createElement(y.n,te({},e,{value:null!==(t=null===(r=e.value)||void 0===r?void 0:r.displayName)&&void 0!==t?t:null===(a=e.value)||void 0===a?void 0:a.name,tooltip:(null===(o=e.value)||void 0===o?void 0:o.displayName)&&(null===(s=e.value)||void 0===s?void 0:s.name)!==(null===(i=e.value)||void 0===i?void 0:i.displayName),tooltipLabel:null===(c=e.value)||void 0===c?void 0:c.name}))},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.lot.label",defaultMessage:"Lot"}),accessor:"lotNumber",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.expiry.label",defaultMessage:"Expiry"}),accessor:"expirationDate",style:{whiteSpace:"normal"},Cell:function(e){return n.createElement("span",null,null!=e&&e.value?r.props.formatLocalizedDate(e.value,v.A.COMMON):e.value)},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.quantityAvailableToTransfer.label",defaultMessage:"Quantity Available to Transfer"}),accessor:"quantityNotPicked",style:{whiteSpace:"normal"},width:220,Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.currentZone.label",defaultMessage:"Current Zone"}),accessor:"originZone",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.currentBinLocation.label",defaultMessage:"Current Bin Location"}),accessor:"originBinLocation.name",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.qtyToTransfer.label",defaultMessage:"Qty to Transfer"}),accessor:"quantity",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.transferTo.label",defaultMessage:"Transfer to"}),accessor:"destinationBinLocation.name",style:{whiteSpace:"normal"},Filter:S.A}]})),se(r,"dataFetched",!1),se(r,"filterMethod",(function(e,t){var r=t[e.id];return"product"===e.id&&(r=r?"".concat(r.name," ").concat(r.displayName):null),o().toString(r).toLowerCase().includes(e.value.toLowerCase())})),r.getColumns=r.getColumns.bind(r);var a=r.getColumns(),s=r.props.initialValues.stockTransfer;return r.state={stockTransfer:s||{},columns:a},r.completeStockTransfer=r.completeStockTransfer.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(t,e),r=t,(a=[{key:"componentDidMount",value:function(){this.props.stockTransferTranslationsFetched&&(this.dataFetched=!0),this.fetchStockTransfer()}},{key:"componentWillReceiveProps",value:function(e){e.stockTransferTranslationsFetched&&!this.dataFetched&&(this.dataFetched=!0)}},{key:"fetchStockTransfer",value:function(){var e=this;this.props.showSpinner();var t="/api/stockTransfers/".concat(this.props.match.params.stockTransferId);k.Ay.get(t).then((function(t){var r=(0,k.xp)(t.data.data),n=function(e){var t=[];return o().forEach(e.stockTransferItems,(function(r){"CANCELED"!==r.status&&t.push(K(r,e.status)),r.splitItems.length>0&&o().forEach(r.splitItems,(function(n){t.push(Y(r,n,e.status))}))})),t}(r);e.setState({stockTransfer:ee(ee({},r),{},{stockTransferItems:n}),originalItems:r.stockTransferItems},(function(){return e.props.hideSpinner()}))})).catch((function(){return e.props.hideSpinner()}))}},{key:"save",value:function(){var e=this;this.props.showSpinner();var t="/api/stockTransfers/".concat(this.props.match.params.stockTransferId),r=ee(ee({},this.state.stockTransfer),{},{stockTransferItems:this.state.originalItems,status:"COMPLETED"});return k.Ay.put(t,(0,k.iR)(r)).then((function(){e.props.hideSpinner(),Q().success(e.props.translate("react.stockTransfer.alert.stockTransferCompleted.label","Stock transfer was successfully completed!"),{timeout:3e3}),window.location=b.L8.show(e.state.stockTransfer.id)})).catch((function(){return e.props.hideSpinner()}))}},{key:"completeStockTransfer",value:function(){var e=o().filter(this.state.stockTransfer.stockTransferItems,(function(e){return e.transferQty<e.quantityNotPicked}));o().isEmpty(e)?this.save():this.confirmLowerQuantity(e)}},{key:"confirmLowerQuantity",value:function(e){var t=this;(0,z.ZX)({title:this.props.translate("react.stockTransfer.message.confirmStockTransfer.label","Confirm Stock Transfer"),message:o().map(e,(function(e){return n.createElement("p",null,"Qty",e.quantityNotPicked-e.transferQty," ",t.props.translate("react.stockTransfer.alert.lowerQty1.label","of item")," ",e.productName," ",t.props.translate("react.stockTransfer.alert.lowerQty2.label","is still in the receiving bin. Do you want to continue?"))})),buttons:[{label:this.props.translate("react.default.yes.label","Yes"),onClick:function(){return t.save()}},{label:this.props.translate("react.default.no.label","No")}]})}},{key:"previousPage",value:function(){var e=this;this.props.showSpinner();var t="/api/stockTransfers/".concat(this.props.match.params.stockTransferId),r=ee(ee({},this.state.stockTransfer),{},{stockTransferItems:this.state.originalItems});return k.Ay.put(t,(0,k.iR)(r)).then((function(){e.props.hideSpinner(),e.props.previousPage({stockTransfer:e.state.stockTransfer})})).catch((function(){return e.props.hideSpinner()}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.columns,a={pivotBy:t.pivotBy};return n.createElement("div",{className:"stock-transfer"},this.state.stockTransfer&&"COMPLETED"===this.state.stockTransfer.status&&n.createElement("div",{className:"submit-buttons d-flex justify-content-end mb-3 mt-0"},n.createElement("button",{type:"button",onClick:function(){window.location=b.L8.show(e.state.stockTransfer.id)},className:"btn btn-outline-primary btn-form btn-xs",hidden:"COMPLETED"!==this.state.stockTransfer.status},n.createElement(E.A,{id:"react.default.button.exit.label",defaultMessage:"Exit"}))),this.state.stockTransfer.stockTransferItems?n.createElement(ce,te({data:this.state.stockTransfer.stockTransferItems,columns:r,ref:function(t){e.selectTable=t},className:"-striped -highlight"},a,{defaultPageSize:Number.MAX_SAFE_INTEGER,minRows:0,showPaginationBottom:!1,filterable:!0,defaultFilterMethod:this.filterMethod})):null,n.createElement("div",{className:"submit-buttons"},n.createElement("button",{type:"button",onClick:function(){return e.previousPage()},className:"btn btn-outline-primary btn-form btn-xs",disabled:"COMPLETED"===this.state.stockTransfer.status},n.createElement(E.A,{id:"react.default.button.previous.label",defaultMessage:"Previous"})),n.createElement("button",{type:"button",onClick:function(){return e.completeStockTransfer()},className:"btn btn-outline-success float-right btn-xs mr-3",disabled:"COMPLETED"===this.state.stockTransfer.status},n.createElement(E.A,{id:"react.stockTransfer.completeStockTransfer.label",defaultMessage:"Complete Stock Transfer"}))))}}])&&re(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a}(n.Component);const ue=(0,l.Ng)((function(e){return{translate:(0,E.H)((0,c.ro)(e.localize)),stockTransferTranslationsFetched:e.session.fetchedTranslations.stockTransfer,formatLocalizedDate:(0,w.Yq)(e.localize)}}),{showSpinner:f.xc,hideSpinner:f.W$})(le);le.propTypes={showSpinner:i().func.isRequired,hideSpinner:i().func.isRequired,nextPage:i().func.isRequired,previousPage:i().func.isRequired,translate:i().func.isRequired,initialValues:i().shape({stockTransfer:i().arrayOf(i().shape({}))}).isRequired,match:i().shape({params:i().shape({stockTransferId:i().string})}).isRequired,location:i().shape({id:i().string}).isRequired,stockTransferTranslationsFetched:i().bool.isRequired,formatLocalizedDate:i().func.isRequired};var fe=r(46894),pe=r.n(fe),de=r(38798),me=r(51836),he=r(32078),ye=r(66792);function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ve(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ke.apply(null,arguments)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ie(n.key),n)}}function Se(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Se=function(){return!!e})()}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e,t,r){return(t=Ie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ie(e){var t=function(e){if("object"!=be(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==be(t)?t:t+""}var Ce=(0,g.A)(d()),je=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(r=function(e,t,r){return t=Ee(t),function(e,t){if(t&&("object"==be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Se()?Reflect.construct(t,r||[],Ee(e).constructor):t.apply(e,r))}(this,t,[e]),"getColumns",(function(){return[{Header:n.createElement(E.A,{id:"react.stockTransfer.code.label",defaultMessage:"Code"}),accessor:"product.productCode",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.product.label",defaultMessage:"Product"}),accessor:"product",style:{whiteSpace:"normal"},Cell:function(e){var t,r,a,o,s,i,c;return n.createElement(y.n,ke({},e,{value:null!==(t=null===(r=e.value)||void 0===r?void 0:r.displayName)&&void 0!==t?t:null===(a=e.value)||void 0===a?void 0:a.name,tooltip:(null===(o=e.value)||void 0===o?void 0:o.displayName)&&(null===(s=e.value)||void 0===s?void 0:s.name)!==(null===(i=e.value)||void 0===i?void 0:i.displayName),tooltipLabel:null===(c=e.value)||void 0===c?void 0:c.name}))},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.lot.label",defaultMessage:"Lot"}),accessor:"lotNumber",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.expiry.label",defaultMessage:"Expiry"}),accessor:"expirationDate",style:{whiteSpace:"normal"},Cell:function(e){return n.createElement("span",null,null!=e&&e.value?r.props.formatLocalizedDate(e.value,v.A.COMMON):e.value)},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.quantityAvailableToTransfer.label",defaultMessage:"Quantity Available to Transfer"}),accessor:"quantityNotPicked",style:{whiteSpace:"normal"},width:220,Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.currentZone.label",defaultMessage:"Current Zone"}),accessor:"originZone",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.currentBinLocation.label",defaultMessage:"Current Bin Location"}),accessor:"originBinLocation.name",style:{whiteSpace:"normal"},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.qtyToTransfer.label",defaultMessage:"Qty to Transfer"}),accessor:"quantity",style:{whiteSpace:"normal"},Cell:function(e){var t,a=e.index,s=r.state.stockTransfer.stockTransferItems,i=o().filter(s,(function(t){return t.referenceId&&t.referenceId===e.original.referenceId})),c=!1;return!e.original.id||i.length>1?o().reduce(i,(function(e,t){return e+(t.quantity?o().toInteger(t.quantity):0)}),0)>e.original.quantityNotPicked&&o().forEach(s,(function(e){o().forEach(i,(function(n){e===n&&(c=!0,t=r.props.translate("react.stockTransfer.higherSplitQuantity.label","Sum of quantity to transfer of split items cannot be higher than quantity in current bin."))}))})):1===i.length&&e.original.quantityNotPicked<o().toInteger(e.value)&&(c=!0,t=r.props.translate("react.stockTransfer.higherQuantity.label","Quantity to transfer cannot be higher than quantity in current bin")),o().toInteger(e.value)?o().toInteger(e.value)>e.original.quantityNotPicked?(c=!0,t=r.props.translate("react.stockTransfer.higherThanQoH.label","Cant transfer more than on hand.")):o().toInteger(e.value)<0&&(c=!0,t=r.props.translate("react.stockTransfer.errors.negativeQty.label","Quantity to transfer can't be negative")):(c=!0,t=r.props.translate("react.stockTransfer.selectOrDeleteLine.label","Please select a quantity or delete the line")),n.createElement(me.Tooltip,{html:t,disabled:!c,theme:"transparent",arrow:"true",delay:"150",duration:"250",hideDelay:"50"},n.createElement("div",{className:c&&e.original.status!==he.A.CANCELED?"has-error":""},n.createElement("input",{type:"number",className:"form-control form-control-xs",value:e.value,disabled:e.original.status===he.A.CANCELED,onChange:function(e){var t=pe()(r.state.stockTransfer,{stockTransferItems:Pe({},a,{quantity:{$set:e.target.value}})});r.changeStockTransfer(t)}})))},Filter:S.A},{Header:n.createElement(E.A,{id:"react.stockTransfer.transferTo.label",defaultMessage:"Transfer to"}),accessor:"destinationBinLocation",Cell:function(e){return n.createElement(ye.A,{options:r.state.bins,value:o().get(r.state.stockTransfer.stockTransferItems,"[".concat(e.index,"].").concat(e.column.id))||null,onChange:function(t){return r.changeStockTransfer(pe()(r.state.stockTransfer,{stockTransferItems:Pe({},e.index,{destinationBinLocation:{$set:t}})}))},valueKey:"id",labelKey:"name",className:"select-xs",disabled:e.original.status===he.A.CANCELED})},Filter:S.A},{Header:"",accessor:"splitItems",Cell:function(e){return n.createElement("div",{className:"d-flex flex-row flex-wrap"},!e.original.referenceId&&n.createElement("button",{type:"button",className:"btn btn-outline-success btn-xs mr-1 mb-1",onClick:function(){return r.splitItem(e)}},n.createElement(E.A,{id:"react.stockTransfer.splitItem.label",defaultMessage:"Split line"})),n.createElement("button",{type:"button",className:"btn btn-outline-danger btn-xs mb-1",onClick:function(){return r.deleteItem(e.index)}},n.createElement(E.A,{id:"react.default.button.delete.label",defaultMessage:"Delete"})))},filterable:!1}]})),Pe(r,"dataFetched",!1),Pe(r,"filterMethod",(function(e,t){var r=t[e.id];return"destinationBinLocation"===e.id&&(r=o().get(r,"name")),"product"===e.id&&(r=r?"".concat(r.name," ").concat(r.displayName):null),o().toString(r).toLowerCase().includes(e.value.toLowerCase())})),r.getColumns=r.getColumns.bind(r);var a=r.getColumns(),s=r.props.initialValues.stockTransfer;return r.state={stockTransfer:s||{},columns:a,bins:[]},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(t,e),r=t,(a=[{key:"componentDidMount",value:function(){this.props.stockTransferTranslationsFetched&&(this.dataFetched=!0,this.fetchBins()),this.fetchStockTransfer()}},{key:"componentWillReceiveProps",value:function(e){e.stockTransferTranslationsFetched&&!this.dataFetched&&(this.dataFetched=!0,this.fetchBins())}},{key:"fetchStockTransfer",value:function(){var e=this;this.props.showSpinner();var t="/api/stockTransfers/".concat(this.props.match.params.stockTransferId);k.Ay.get(t).then((function(t){var r=(0,k.xp)(t.data.data),n=U(r);e.setState({stockTransfer:Ae(Ae({},r),{},{stockTransferItems:n})},(function(){return e.props.hideSpinner()}))})).catch((function(){return e.props.hideSpinner()}))}},{key:"fetchBins",value:function(){var e=this;this.props.showSpinner();var t=function(e){return o().chain(e).orderBy(["label"],["asc"]).value()};return k.Ay.get("/api/internalLocations",{paramsSerializer:function(e){return de.A.stringify(e)},params:{"location.id":this.props.location.id,locationTypeCode:["BIN_LOCATION","INTERNAL"],ignoreActivityCodes:["RECEIVE_STOCK"]}}).then((function(r){var n=o().partition(r.data.data,(function(e){return e.zoneName})),a=o().chain(n[0]).groupBy("zoneName").map((function(e,r){return{name:r,options:t(e)}})).orderBy(["name"],["asc"]).value(),s=t(n[1]);e.setState({bins:[].concat(ve(a),ve(s))},(function(){return e.props.hideSpinner()}))})).catch((function(){return e.props.hideSpinner()}))}},{key:"saveStockTransfer",value:function(e,t){var r,n,a,s,i=this,c="/api/stockTransfers/".concat(this.props.match.params.stockTransferId),l=(r=e,n=he.A.APPROVED,a=o().filter(r.stockTransferItems,(function(e){return!e.referenceId})),s=o().map(a,(function(e){return Z(Z({},e),{},{splitItems:o().filter(r.stockTransferItems,(function(t){return t.referenceId===e.id})),quantity:""===e.quantity?e.quantityOnHand:e.quantity})})),Z(Z({},r),{},{stockTransferItems:s,status:n}));k.Ay.put(c,(0,k.iR)(l)).then((function(e){var r=(0,k.xp)(e.data.data),n=U(r);i.setState({stockTransfer:Ae(Ae({},r),{},{stockTransferItems:n})},(function(){i.props.hideSpinner(),t&&t(r)}))})).catch((function(){return i.props.hideSpinner()}))}},{key:"changeStockTransfer",value:function(e){this.setState({stockTransfer:e})}},{key:"deleteItem",value:function(e){var t=this;this.props.showSpinner();var r=o().get(this.state.stockTransfer.stockTransferItems,"[".concat(e,"]"));if(null!=r&&r.id){var n="/api/stockTransferItems/".concat(r.id);k.Ay.delete(n).then((function(r){var n=(0,k.xp)(r.data.data);t.setState((function(t){return{stockTransfer:Ae(Ae({},n),{},{stockTransferItems:(r=t.stockTransfer.stockTransferItems,a=e,s=r[a],i=s.referenceId,c=s.id,l=r.filter((function(e,t){return i?t!==a:e.id!==c&&e.referenceId!==c})),u=o().groupBy(l,"referenceId"),l.map((function(e){return u[null==e?void 0:e.id]?e:Ae(Ae({},e),{},{status:he.A.PENDING})})))})};var r,a,s,i,c,l,u}),(function(){return t.props.hideSpinner()}))})).catch((function(){return t.props.hideSpinner()}))}else{var a=this.state.stockTransfer,s=pe()(a,{stockTransferItems:{$splice:[[e,1]]}}),i=o().find(s.stockTransferItems,(function(e){return e.id===r.referenceId}));if(0===o().filter(s.stockTransferItems,(function(e){return e.referenceId===i.id})).length&&i){var c=o().findIndex(s.stockTransferItems,i);s=pe()(s,{stockTransferItems:Pe({},c,{status:{$set:he.A.PENDING}})})}this.setState({stockTransfer:s}),this.props.hideSpinner()}}},{key:"nextPage",value:function(){var e=this;this.saveStockTransfer(this.state.stockTransfer,(function(t){e.props.nextPage({stockTransfer:t})}))}},{key:"printStockTransfer",value:function(){var e=this;this.saveStockTransfer(this.state.stockTransfer,(function(){return window.open(b.L8.print(e.props.match.params.stockTransferId),"_blank")}))}},{key:"generateStockTransfer",value:function(){}},{key:"splitItem",value:function(e){var t=e.index,r=e.original,n=Ae(Ae({},r),{},{referenceId:r.id?r.id:r.referenceId,id:null,status:null}),a=this.state.stockTransfer,o=pe()(a,{stockTransferItems:Pe({$splice:r.status!==he.A.CANCELED?[[t+1,0,n],[t+1,0,n]]:[[t+1,0,n]]},t,{$set:r.id?Ae(Ae({},r),{},{status:he.A.CANCELED,quantity:""}):Ae(Ae({},r),{},{quantity:""})})});this.setState({stockTransfer:o})}},{key:"autofill",value:function(){var e=this.state.stockTransfer;this.setState({stockTransfer:Ae(Ae({},e),{},{stockTransferItems:o().map(e.stockTransferItems,(function(e){return Ae(Ae({},e),{},{quantity:e.quantityNotPicked})}))})})}},{key:"isDisabled",value:function(){var e=this.state.stockTransfer.stockTransferItems;return e&&!!e.find((function(t){var r=t.quantity,n=t.quantityNotPicked;if(t.status!==he.A.CANCELED&&(!r||r>n||r<=0))return!0;var a=o().filter(e,(function(e){return e.referenceId&&e.referenceId===t.referenceId}));return(!t.id||a.length>1)&&o().reduce(a,(function(e,t){return e+(t.quantity?o().toInteger(t.quantity):0)}),0)>n}))}},{key:"render",value:function(){var e=this,t=this.state,r=t.columns,a={pivotBy:t.pivotBy};return n.createElement("div",{className:"stock-transfer"},n.createElement("div",{className:"d-flex"},n.createElement("div",{className:"submit-buttons"},n.createElement("button",{type:"button",onClick:function(){return e.autofill(e.state.stockTransfer)},className:"btn btn-primary btn-form btn-xs"},n.createElement(E.A,{id:"react.partialReceiving.autofillQuantities.label",defaultMessage:"Autofill quantities"}))),n.createElement("div",{className:"d-flex mb-3 justify-content-end submit-buttons"},n.createElement("button",{type:"button",onClick:function(){return e.saveStockTransfer(e.state.stockTransfer)},className:"btn btn-success btn-form btn-xs",disabled:o().some(this.state.stockTransfer.stockTransferItems,(function(e){return e.quantity>e.quantityAvailable}))},n.createElement("span",null,n.createElement("i",{className:"fa fa-save pr-2"}),n.createElement(E.A,{id:"react.default.button.save.label",defaultMessage:"Save"}))),n.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-xs p-1 ml-3 mb-1",onClick:function(){return e.printStockTransfer()}},n.createElement("span",null,n.createElement("i",{className:"fa fa-print pr-2"}),n.createElement(E.A,{id:"react.stockTransfer.generateStockTransfer.label",defaultMessage:"Generate Stock Transfer"}))))),this.state.stockTransfer.stockTransferItems?n.createElement(Ce,ke({data:this.state.stockTransfer.stockTransferItems,columns:r,ref:function(t){e.selectTable=t},className:"-striped -highlight"},a,{defaultPageSize:Number.MAX_SAFE_INTEGER,minRows:0,showPaginationBottom:!1,filterable:!0,defaultFilterMethod:this.filterMethod})):null,n.createElement("div",{className:"submit-buttons"},n.createElement("button",{type:"button",onClick:function(){return e.nextPage()},disabled:this.isDisabled(),className:"btn btn-outline-primary btn-form float-right btn-xs"},n.createElement(E.A,{id:"react.default.button.next.label",defaultMessage:"Next"}))))}}])&&ge(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a}(n.Component);const Ne=(0,l.Ng)((function(e){return{translate:(0,E.H)((0,c.ro)(e.localize)),stockTransferTranslationsFetched:e.session.fetchedTranslations.stockTransfer,formatLocalizedDate:(0,w.Yq)(e.localize)}}),{showSpinner:f.xc,hideSpinner:f.W$})(je);je.propTypes={showSpinner:i().func.isRequired,hideSpinner:i().func.isRequired,nextPage:i().func.isRequired,translate:i().func.isRequired,initialValues:i().shape({stockTransfer:i().arrayOf(i().shape({}))}).isRequired,match:i().shape({params:i().shape({stockTransferId:i().string})}).isRequired,location:i().shape({id:i().string}).isRequired,stockTransferTranslationsFetched:i().bool.isRequired,formatLocalizedDate:i().func.isRequired};var qe=r(80461);function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fe(n.key),n)}}function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(De=function(){return!!e})()}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function Fe(e){var t=function(e){if("object"!=Re(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:t+""}var _e=function(e){function t(e){var r,n,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(e,t,r){return t=Me(t),function(e,t){if(t&&("object"==Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,De()?Reflect.construct(t,r||[],Me(e).constructor):t.apply(e,r))}(this,t,[e]),n=r,o=!1,(a=Fe(a="dataFetched"))in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o,r.state={page:e.match.params.stockTransferId?2:1,stockTransfer:{}},r.updateWizardValues=r.updateWizardValues.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(t,e),r=t,(a=[{key:"componentDidMount",value:function(){this.props.fetchTranslations("","stockTransfer"),this.props.stockTransferTranslationsFetched&&(this.dataFetched=!0,this.fetchStockTransfer())}},{key:"componentWillReceiveProps",value:function(e){this.props.locale&&this.props.locale!==e.locale&&this.props.fetchTranslations(e.locale,"stockTransfer"),e.stockTransferTranslationsFetched&&!this.dataFetched&&(this.dataFetched=!0,this.fetchStockTransfer())}},{key:"stepList",get:function(){return[this.props.translate("react.stockTransfer.createStockTransfer.label","Create Stock Transfer"),this.props.translate("react.stockTransfer.startStockTransfer.label","Start Stock Transfer"),this.props.translate("react.stockTransfer.checkStockTransfer.label","Check Stock Transfer")]}},{key:"wizardTitle",get:function(){var e,t=this.state.stockTransfer;return null!=t&&null!==(e=t.stockTransfer)&&void 0!==e&&e.stockTransferNumber?[{text:this.props.translate("react.stockTransfer.label","Stock Transfer"),color:"#000000",delimeter:" | "},{text:t.stockTransfer.stockTransferNumber,color:"#000000",delimeter:""}]:[]}},{key:"updateWizardValues",value:function(e,t){this.setState({page:e,stockTransfer:t})}},{key:"fetchStockTransfer",value:function(){var e=this;if(this.props.match.params.stockTransferId){this.props.showSpinner();var t="/api/stockTransfers/".concat(this.props.match.params.stockTransferId);k.Ay.get(t).then((function(t){var r=(0,k.xp)(t.data.data);e.setState({stockTransfer:{stockTransfer:r},page:"COMPLETED"===r.status?3:2}),e.props.hideSpinner()})).catch((function(){return e.props.hideSpinner()}))}}},{key:"render",value:function(){var e=this.state,t=e.page,r=e.stockTransfer,a=this.props,s=a.location,i=a.history,c=a.match,l=s.id,u=[B,Ne,ue];return o().get(s,"id")?n.createElement(qe.A,{pageList:u,stepList:this.stepList,initialValues:r,title:this.wizardTitle,additionalTitle:null,currentPage:t,prevPage:1===t?1:t-1,updateWizardValues:this.updateWizardValues,additionalProps:{locationId:l,location:s,history:i,match:c}}):null}}])&&Le(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a}(n.Component);const Be=(0,u.withRouter)((0,l.Ng)((function(e){return{location:e.session.currentLocation,locale:e.session.activeLanguage,stockTransferTranslationsFetched:e.session.fetchedTranslations.stockTransfer,translate:(0,E.H)((0,c.ro)(e.localize))}}),{showSpinner:f.xc,hideSpinner:f.W$,fetchTranslations:f.dj})(_e));_e.propTypes={location:i().shape({id:i().string}).isRequired,locale:i().string.isRequired,stockTransferTranslationsFetched:i().bool.isRequired,fetchTranslations:i().func.isRequired,translate:i().func.isRequired,showSpinner:i().func.isRequired,hideSpinner:i().func.isRequired,match:i().shape({params:i().shape({stockTransferId:i().string})}).isRequired,history:i().shape({push:i().func}).isRequired}}}]);
//# sourceMappingURL=bundle.929af1b45eb780bfc503.6614.js.map